(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Nv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wr={exports:{}};/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Vv=wr.exports,Bc;function Kv(){return Bc||(Bc=1,(function(t,e){(function(n,o){t.exports=o()})(Vv,(function(){const n=new Map,o={set(w,u,v){n.has(w)||n.set(w,new Map);const A=n.get(w);A.has(u)||A.size===0?A.set(u,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(A.keys())[0]}.`)},get:(w,u)=>n.has(w)&&n.get(w).get(u)||null,remove(w,u){if(!n.has(w))return;const v=n.get(w);v.delete(u),v.size===0&&n.delete(w)}},i="transitionend",s=w=>(w&&window.CSS&&window.CSS.escape&&(w=w.replace(/#([^\s"#']+)/g,((u,v)=>`#${CSS.escape(v)}`))),w),r=w=>{w.dispatchEvent(new Event(i))},l=w=>!(!w||typeof w!="object")&&(w.jquery!==void 0&&(w=w[0]),w.nodeType!==void 0),a=w=>l(w)?w.jquery?w[0]:w:typeof w=="string"&&w.length>0?document.querySelector(s(w)):null,d=w=>{if(!l(w)||w.getClientRects().length===0)return!1;const u=getComputedStyle(w).getPropertyValue("visibility")==="visible",v=w.closest("details:not([open])");if(!v)return u;if(v!==w){const A=w.closest("summary");if(A&&A.parentNode!==v||A===null)return!1}return u},h=w=>!w||w.nodeType!==Node.ELEMENT_NODE||!!w.classList.contains("disabled")||(w.disabled!==void 0?w.disabled:w.hasAttribute("disabled")&&w.getAttribute("disabled")!=="false"),c=w=>{if(!document.documentElement.attachShadow)return null;if(typeof w.getRootNode=="function"){const u=w.getRootNode();return u instanceof ShadowRoot?u:null}return w instanceof ShadowRoot?w:w.parentNode?c(w.parentNode):null},p=()=>{},m=w=>{w.offsetHeight},g=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,D=[],T=()=>document.documentElement.dir==="rtl",y=w=>{var u;u=()=>{const v=g();if(v){const A=w.NAME,X=v.fn[A];v.fn[A]=w.jQueryInterface,v.fn[A].Constructor=w,v.fn[A].noConflict=()=>(v.fn[A]=X,w.jQueryInterface)}},document.readyState==="loading"?(D.length||document.addEventListener("DOMContentLoaded",(()=>{for(const v of D)v()})),D.push(u)):u()},C=(w,u=[],v=w)=>typeof w=="function"?w.call(...u):v,M=(w,u,v=!0)=>{if(!v)return void C(w);const A=(le=>{if(!le)return 0;let{transitionDuration:we,transitionDelay:Ae}=window.getComputedStyle(le);const Ie=Number.parseFloat(we),Re=Number.parseFloat(Ae);return Ie||Re?(we=we.split(",")[0],Ae=Ae.split(",")[0],1e3*(Number.parseFloat(we)+Number.parseFloat(Ae))):0})(u)+5;let X=!1;const ee=({target:le})=>{le===u&&(X=!0,u.removeEventListener(i,ee),C(w))};u.addEventListener(i,ee),setTimeout((()=>{X||r(u)}),A)},E=(w,u,v,A)=>{const X=w.length;let ee=w.indexOf(u);return ee===-1?!v&&A?w[X-1]:w[0]:(ee+=v?1:-1,A&&(ee=(ee+X)%X),w[Math.max(0,Math.min(ee,X-1))])},R=/[^.]*(?=\..*)\.|.*/,L=/\..*/,B=/::\d+$/,x={};let I=1;const N={mouseenter:"mouseover",mouseleave:"mouseout"},z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function F(w,u){return u&&`${u}::${I++}`||w.uidEvent||I++}function te(w){const u=F(w);return w.uidEvent=u,x[u]=x[u]||{},x[u]}function H(w,u,v=null){return Object.values(w).find((A=>A.callable===u&&A.delegationSelector===v))}function Q(w,u,v){const A=typeof u=="string",X=A?v:u||v;let ee=ye(w);return z.has(ee)||(ee=w),[A,X,ee]}function W(w,u,v,A,X){if(typeof u!="string"||!w)return;let[ee,le,we]=Q(u,v,A);u in N&&(le=(st=>function(Ze){if(!Ze.relatedTarget||Ze.relatedTarget!==Ze.delegateTarget&&!Ze.delegateTarget.contains(Ze.relatedTarget))return st.call(this,Ze)})(le));const Ae=te(w),Ie=Ae[we]||(Ae[we]={}),Re=H(Ie,le,ee?v:null);if(Re)return void(Re.oneOff=Re.oneOff&&X);const ke=F(le,u.replace(R,"")),ct=ee?(function(Xe,st,Ze){return function it(kt){const Pt=Xe.querySelectorAll(st);for(let{target:mt}=kt;mt&&mt!==this;mt=mt.parentNode)for(const wt of Pt)if(wt===mt)return Fe(kt,{delegateTarget:mt}),it.oneOff&&U.off(Xe,kt.type,st,Ze),Ze.apply(mt,[kt])}})(w,v,le):(function(Xe,st){return function Ze(it){return Fe(it,{delegateTarget:Xe}),Ze.oneOff&&U.off(Xe,it.type,st),st.apply(Xe,[it])}})(w,le);ct.delegationSelector=ee?v:null,ct.callable=le,ct.oneOff=X,ct.uidEvent=ke,Ie[ke]=ct,w.addEventListener(we,ct,ee)}function J(w,u,v,A,X){const ee=H(u[v],A,X);ee&&(w.removeEventListener(v,ee,!!X),delete u[v][ee.uidEvent])}function G(w,u,v,A){const X=u[v]||{};for(const[ee,le]of Object.entries(X))ee.includes(A)&&J(w,u,v,le.callable,le.delegationSelector)}function ye(w){return w=w.replace(L,""),N[w]||w}const U={on(w,u,v,A){W(w,u,v,A,!1)},one(w,u,v,A){W(w,u,v,A,!0)},off(w,u,v,A){if(typeof u!="string"||!w)return;const[X,ee,le]=Q(u,v,A),we=le!==u,Ae=te(w),Ie=Ae[le]||{},Re=u.startsWith(".");if(ee===void 0){if(Re)for(const ke of Object.keys(Ae))G(w,Ae,ke,u.slice(1));for(const[ke,ct]of Object.entries(Ie)){const Xe=ke.replace(B,"");we&&!u.includes(Xe)||J(w,Ae,le,ct.callable,ct.delegationSelector)}}else{if(!Object.keys(Ie).length)return;J(w,Ae,le,ee,X?v:null)}},trigger(w,u,v){if(typeof u!="string"||!w)return null;const A=g();let X=null,ee=!0,le=!0,we=!1;u!==ye(u)&&A&&(X=A.Event(u,v),A(w).trigger(X),ee=!X.isPropagationStopped(),le=!X.isImmediatePropagationStopped(),we=X.isDefaultPrevented());const Ae=Fe(new Event(u,{bubbles:ee,cancelable:!0}),v);return we&&Ae.preventDefault(),le&&w.dispatchEvent(Ae),Ae.defaultPrevented&&X&&X.preventDefault(),Ae}};function Fe(w,u={}){for(const[v,A]of Object.entries(u))try{w[v]=A}catch{Object.defineProperty(w,v,{configurable:!0,get:()=>A})}return w}function nt(w){if(w==="true")return!0;if(w==="false")return!1;if(w===Number(w).toString())return Number(w);if(w===""||w==="null")return null;if(typeof w!="string")return w;try{return JSON.parse(decodeURIComponent(w))}catch{return w}}function Ce(w){return w.replace(/[A-Z]/g,(u=>`-${u.toLowerCase()}`))}const se={setDataAttribute(w,u,v){w.setAttribute(`data-bs-${Ce(u)}`,v)},removeDataAttribute(w,u){w.removeAttribute(`data-bs-${Ce(u)}`)},getDataAttributes(w){if(!w)return{};const u={},v=Object.keys(w.dataset).filter((A=>A.startsWith("bs")&&!A.startsWith("bsConfig")));for(const A of v){let X=A.replace(/^bs/,"");X=X.charAt(0).toLowerCase()+X.slice(1),u[X]=nt(w.dataset[A])}return u},getDataAttribute:(w,u)=>nt(w.getAttribute(`data-bs-${Ce(u)}`))};class De{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(u){return u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u}_mergeConfigObj(u,v){const A=l(v)?se.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof A=="object"?A:{},...l(v)?se.getDataAttributes(v):{},...typeof u=="object"?u:{}}}_typeCheckConfig(u,v=this.constructor.DefaultType){for(const[X,ee]of Object.entries(v)){const le=u[X],we=l(le)?"element":(A=le)==null?`${A}`:Object.prototype.toString.call(A).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(we))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${X}" provided type "${we}" but expected type "${ee}".`)}var A}}class Me extends De{constructor(u,v){super(),(u=a(u))&&(this._element=u,this._config=this._getConfig(v),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const u of Object.getOwnPropertyNames(this))this[u]=null}_queueCallback(u,v,A=!0){M(u,v,A)}_getConfig(u){return u=this._mergeConfigObj(u,this._element),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}static getInstance(u){return o.get(a(u),this.DATA_KEY)}static getOrCreateInstance(u,v={}){return this.getInstance(u)||new this(u,typeof v=="object"?v:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(u){return`${u}${this.EVENT_KEY}`}}const me=w=>{let u=w.getAttribute("data-bs-target");if(!u||u==="#"){let v=w.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),u=v&&v!=="#"?v.trim():null}return u?u.split(",").map((v=>s(v))).join(","):null},j={find:(w,u=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(u,w)),findOne:(w,u=document.documentElement)=>Element.prototype.querySelector.call(u,w),children:(w,u)=>[].concat(...w.children).filter((v=>v.matches(u))),parents(w,u){const v=[];let A=w.parentNode.closest(u);for(;A;)v.push(A),A=A.parentNode.closest(u);return v},prev(w,u){let v=w.previousElementSibling;for(;v;){if(v.matches(u))return[v];v=v.previousElementSibling}return[]},next(w,u){let v=w.nextElementSibling;for(;v;){if(v.matches(u))return[v];v=v.nextElementSibling}return[]},focusableChildren(w){const u=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((v=>`${v}:not([tabindex^="-"])`)).join(",");return this.find(u,w).filter((v=>!h(v)&&d(v)))},getSelectorFromElement(w){const u=me(w);return u&&j.findOne(u)?u:null},getElementFromSelector(w){const u=me(w);return u?j.findOne(u):null},getMultipleElementsFromSelector(w){const u=me(w);return u?j.find(u):[]}},K=(w,u="hide")=>{const v=`click.dismiss${w.EVENT_KEY}`,A=w.NAME;U.on(document,v,`[data-bs-dismiss="${A}"]`,(function(X){if(["A","AREA"].includes(this.tagName)&&X.preventDefault(),h(this))return;const ee=j.getElementFromSelector(this)||this.closest(`.${A}`);w.getOrCreateInstance(ee)[u]()}))},ie=".bs.alert",_e=`close${ie}`,k=`closed${ie}`;class O extends Me{static get NAME(){return"alert"}close(){if(U.trigger(this._element,_e).defaultPrevented)return;this._element.classList.remove("show");const u=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,u)}_destroyElement(){this._element.remove(),U.trigger(this._element,k),this.dispose()}static jQueryInterface(u){return this.each((function(){const v=O.getOrCreateInstance(this);if(typeof u=="string"){if(v[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);v[u](this)}}))}}K(O,"close"),y(O);const P='[data-bs-toggle="button"]';class oe extends Me{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(u){return this.each((function(){const v=oe.getOrCreateInstance(this);u==="toggle"&&v[u]()}))}}U.on(document,"click.bs.button.data-api",P,(w=>{w.preventDefault();const u=w.target.closest(P);oe.getOrCreateInstance(u).toggle()})),y(oe);const ne=".bs.swipe",re=`touchstart${ne}`,ue=`touchmove${ne}`,ve=`touchend${ne}`,ce=`pointerdown${ne}`,fe=`pointerup${ne}`,Te={endCallback:null,leftCallback:null,rightCallback:null},Se={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Pe extends De{constructor(u,v){super(),this._element=u,u&&Pe.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Te}static get DefaultType(){return Se}static get NAME(){return"swipe"}dispose(){U.off(this._element,ne)}_start(u){this._supportPointerEvents?this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX):this._deltaX=u.touches[0].clientX}_end(u){this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(u){this._deltaX=u.touches&&u.touches.length>1?0:u.touches[0].clientX-this._deltaX}_handleSwipe(){const u=Math.abs(this._deltaX);if(u<=40)return;const v=u/this._deltaX;this._deltaX=0,v&&C(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,ce,(u=>this._start(u))),U.on(this._element,fe,(u=>this._end(u))),this._element.classList.add("pointer-event")):(U.on(this._element,re,(u=>this._start(u))),U.on(this._element,ue,(u=>this._move(u))),U.on(this._element,ve,(u=>this._end(u))))}_eventIsPointerPenTouch(u){return this._supportPointerEvents&&(u.pointerType==="pen"||u.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ne=".bs.carousel",ot=".data-api",et="ArrowLeft",Je="ArrowRight",Rt="next",Tt="prev",jt="left",Xt="right",Wt=`slide${Ne}`,kn=`slid${Ne}`,q=`keydown${Ne}`,_=`mouseenter${Ne}`,Z=`mouseleave${Ne}`,Sn=`dragstart${Ne}`,$o=`load${Ne}${ot}`,Lo=`click${Ne}${ot}`,Io="carousel",Oo="active",vo=".active",$s=".carousel-item",li=vo+$s,ai={[et]:Xt,[Je]:jt},ui={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ls={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Hn extends Me{constructor(u,v){super(u,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=j.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Io&&this.cycle()}static get Default(){return ui}static get DefaultType(){return Ls}static get NAME(){return"carousel"}next(){this._slide(Rt)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(Tt)}pause(){this._isSliding&&r(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?U.one(this._element,kn,(()=>this.cycle())):this.cycle())}to(u){const v=this._getItems();if(u>v.length-1||u<0)return;if(this._isSliding)return void U.one(this._element,kn,(()=>this.to(u)));const A=this._getItemIndex(this._getActive());if(A===u)return;const X=u>A?Rt:Tt;this._slide(X,v[u])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(u){return u.defaultInterval=u.interval,u}_addEventListeners(){this._config.keyboard&&U.on(this._element,q,(u=>this._keydown(u))),this._config.pause==="hover"&&(U.on(this._element,_,(()=>this.pause())),U.on(this._element,Z,(()=>this._maybeEnableCycle()))),this._config.touch&&Pe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of j.find(".carousel-item img",this._element))U.on(v,Sn,(A=>A.preventDefault()));const u={leftCallback:()=>this._slide(this._directionToOrder(jt)),rightCallback:()=>this._slide(this._directionToOrder(Xt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Pe(this._element,u)}_keydown(u){if(/input|textarea/i.test(u.target.tagName))return;const v=ai[u.key];v&&(u.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(u){return this._getItems().indexOf(u)}_setActiveIndicatorElement(u){if(!this._indicatorsElement)return;const v=j.findOne(vo,this._indicatorsElement);v.classList.remove(Oo),v.removeAttribute("aria-current");const A=j.findOne(`[data-bs-slide-to="${u}"]`,this._indicatorsElement);A&&(A.classList.add(Oo),A.setAttribute("aria-current","true"))}_updateInterval(){const u=this._activeElement||this._getActive();if(!u)return;const v=Number.parseInt(u.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(u,v=null){if(this._isSliding)return;const A=this._getActive(),X=u===Rt,ee=v||E(this._getItems(),A,X,this._config.wrap);if(ee===A)return;const le=this._getItemIndex(ee),we=ke=>U.trigger(this._element,ke,{relatedTarget:ee,direction:this._orderToDirection(u),from:this._getItemIndex(A),to:le});if(we(Wt).defaultPrevented||!A||!ee)return;const Ae=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(le),this._activeElement=ee;const Ie=X?"carousel-item-start":"carousel-item-end",Re=X?"carousel-item-next":"carousel-item-prev";ee.classList.add(Re),m(ee),A.classList.add(Ie),ee.classList.add(Ie),this._queueCallback((()=>{ee.classList.remove(Ie,Re),ee.classList.add(Oo),A.classList.remove(Oo,Re,Ie),this._isSliding=!1,we(kn)}),A,this._isAnimated()),Ae&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return j.findOne(li,this._element)}_getItems(){return j.find($s,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(u){return T()?u===jt?Tt:Rt:u===jt?Rt:Tt}_orderToDirection(u){return T()?u===Tt?jt:Xt:u===Tt?Xt:jt}static jQueryInterface(u){return this.each((function(){const v=Hn.getOrCreateInstance(this,u);if(typeof u!="number"){if(typeof u=="string"){if(v[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);v[u]()}}else v.to(u)}))}}U.on(document,Lo,"[data-bs-slide], [data-bs-slide-to]",(function(w){const u=j.getElementFromSelector(this);if(!u||!u.classList.contains(Io))return;w.preventDefault();const v=Hn.getOrCreateInstance(u),A=this.getAttribute("data-bs-slide-to");return A?(v.to(A),void v._maybeEnableCycle()):se.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())})),U.on(window,$o,(()=>{const w=j.find('[data-bs-ride="carousel"]');for(const u of w)Hn.getOrCreateInstance(u)})),y(Hn);const Ro=".bs.collapse",Gi=`show${Ro}`,b=`shown${Ro}`,$=`hide${Ro}`,V=`hidden${Ro}`,he=`click${Ro}.data-api`,ge="show",de="collapse",ze="collapsing",Le=`:scope .${de} .${de}`,qe='[data-bs-toggle="collapse"]',tn={parent:null,toggle:!0},Dt={parent:"(null|element)",toggle:"boolean"};class Ft extends Me{constructor(u,v){super(u,v),this._isTransitioning=!1,this._triggerArray=[];const A=j.find(qe);for(const X of A){const ee=j.getSelectorFromElement(X),le=j.find(ee).filter((we=>we===this._element));ee!==null&&le.length&&this._triggerArray.push(X)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tn}static get DefaultType(){return Dt}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let u=[];if(this._config.parent&&(u=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((X=>X!==this._element)).map((X=>Ft.getOrCreateInstance(X,{toggle:!1})))),u.length&&u[0]._isTransitioning||U.trigger(this._element,Gi).defaultPrevented)return;for(const X of u)X.hide();const v=this._getDimension();this._element.classList.remove(de),this._element.classList.add(ze),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const A=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(de,ge),this._element.style[v]="",U.trigger(this._element,b)}),this._element,!0),this._element.style[v]=`${this._element[A]}px`}hide(){if(this._isTransitioning||!this._isShown()||U.trigger(this._element,$).defaultPrevented)return;const u=this._getDimension();this._element.style[u]=`${this._element.getBoundingClientRect()[u]}px`,m(this._element),this._element.classList.add(ze),this._element.classList.remove(de,ge);for(const v of this._triggerArray){const A=j.getElementFromSelector(v);A&&!this._isShown(A)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[u]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(de),U.trigger(this._element,V)}),this._element,!0)}_isShown(u=this._element){return u.classList.contains(ge)}_configAfterMerge(u){return u.toggle=!!u.toggle,u.parent=a(u.parent),u}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const u=this._getFirstLevelChildren(qe);for(const v of u){const A=j.getElementFromSelector(v);A&&this._addAriaAndCollapsedClass([v],this._isShown(A))}}_getFirstLevelChildren(u){const v=j.find(Le,this._config.parent);return j.find(u,this._config.parent).filter((A=>!v.includes(A)))}_addAriaAndCollapsedClass(u,v){if(u.length)for(const A of u)A.classList.toggle("collapsed",!v),A.setAttribute("aria-expanded",v)}static jQueryInterface(u){const v={};return typeof u=="string"&&/show|hide/.test(u)&&(v.toggle=!1),this.each((function(){const A=Ft.getOrCreateInstance(this,v);if(typeof u=="string"){if(A[u]===void 0)throw new TypeError(`No method named "${u}"`);A[u]()}}))}}U.on(document,he,qe,(function(w){(w.target.tagName==="A"||w.delegateTarget&&w.delegateTarget.tagName==="A")&&w.preventDefault();for(const u of j.getMultipleElementsFromSelector(this))Ft.getOrCreateInstance(u,{toggle:!1}).toggle()})),y(Ft);var ht="top",$t="bottom",Vt="right",nn="left",Po="auto",Is=[ht,$t,Vt,nn],us="start",Os="end",fu="clippingParents",cl="viewport",Rs="popper",hu="reference",dl=Is.reduce((function(w,u){return w.concat([u+"-"+us,u+"-"+Os])}),[]),fl=[].concat(Is,[Po]).reduce((function(w,u){return w.concat([u,u+"-"+us,u+"-"+Os])}),[]),pu="beforeRead",vu="read",mu="afterRead",gu="beforeMain",bu="main",yu="afterMain",wu="beforeWrite",xu="write",Du="afterWrite",_u=[pu,vu,mu,gu,bu,yu,wu,xu,Du];function to(w){return w?(w.nodeName||"").toLowerCase():null}function Mn(w){if(w==null)return window;if(w.toString()!=="[object Window]"){var u=w.ownerDocument;return u&&u.defaultView||window}return w}function cs(w){return w instanceof Mn(w).Element||w instanceof Element}function On(w){return w instanceof Mn(w).HTMLElement||w instanceof HTMLElement}function hl(w){return typeof ShadowRoot<"u"&&(w instanceof Mn(w).ShadowRoot||w instanceof ShadowRoot)}const pl={name:"applyStyles",enabled:!0,phase:"write",fn:function(w){var u=w.state;Object.keys(u.elements).forEach((function(v){var A=u.styles[v]||{},X=u.attributes[v]||{},ee=u.elements[v];On(ee)&&to(ee)&&(Object.assign(ee.style,A),Object.keys(X).forEach((function(le){var we=X[le];we===!1?ee.removeAttribute(le):ee.setAttribute(le,we===!0?"":we)})))}))},effect:function(w){var u=w.state,v={popper:{position:u.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(u.elements.popper.style,v.popper),u.styles=v,u.elements.arrow&&Object.assign(u.elements.arrow.style,v.arrow),function(){Object.keys(u.elements).forEach((function(A){var X=u.elements[A],ee=u.attributes[A]||{},le=Object.keys(u.styles.hasOwnProperty(A)?u.styles[A]:v[A]).reduce((function(we,Ae){return we[Ae]="",we}),{});On(X)&&to(X)&&(Object.assign(X.style,le),Object.keys(ee).forEach((function(we){X.removeAttribute(we)})))}))}},requires:["computeStyles"]};function no(w){return w.split("-")[0]}var ds=Math.max,Zi=Math.min,Ps=Math.round;function vl(){var w=navigator.userAgentData;return w!=null&&w.brands&&Array.isArray(w.brands)?w.brands.map((function(u){return u.brand+"/"+u.version})).join(" "):navigator.userAgent}function Cu(){return!/^((?!chrome|android).)*safari/i.test(vl())}function Bs(w,u,v){u===void 0&&(u=!1),v===void 0&&(v=!1);var A=w.getBoundingClientRect(),X=1,ee=1;u&&On(w)&&(X=w.offsetWidth>0&&Ps(A.width)/w.offsetWidth||1,ee=w.offsetHeight>0&&Ps(A.height)/w.offsetHeight||1);var le=(cs(w)?Mn(w):window).visualViewport,we=!Cu()&&v,Ae=(A.left+(we&&le?le.offsetLeft:0))/X,Ie=(A.top+(we&&le?le.offsetTop:0))/ee,Re=A.width/X,ke=A.height/ee;return{width:Re,height:ke,top:Ie,right:Ae+Re,bottom:Ie+ke,left:Ae,x:Ae,y:Ie}}function ml(w){var u=Bs(w),v=w.offsetWidth,A=w.offsetHeight;return Math.abs(u.width-v)<=1&&(v=u.width),Math.abs(u.height-A)<=1&&(A=u.height),{x:w.offsetLeft,y:w.offsetTop,width:v,height:A}}function Eu(w,u){var v=u.getRootNode&&u.getRootNode();if(w.contains(u))return!0;if(v&&hl(v)){var A=u;do{if(A&&w.isSameNode(A))return!0;A=A.parentNode||A.host}while(A)}return!1}function mo(w){return Mn(w).getComputedStyle(w)}function Xh(w){return["table","td","th"].indexOf(to(w))>=0}function Bo(w){return((cs(w)?w.ownerDocument:w.document)||window.document).documentElement}function Qi(w){return to(w)==="html"?w:w.assignedSlot||w.parentNode||(hl(w)?w.host:null)||Bo(w)}function Au(w){return On(w)&&mo(w).position!=="fixed"?w.offsetParent:null}function ci(w){for(var u=Mn(w),v=Au(w);v&&Xh(v)&&mo(v).position==="static";)v=Au(v);return v&&(to(v)==="html"||to(v)==="body"&&mo(v).position==="static")?u:v||(function(A){var X=/firefox/i.test(vl());if(/Trident/i.test(vl())&&On(A)&&mo(A).position==="fixed")return null;var ee=Qi(A);for(hl(ee)&&(ee=ee.host);On(ee)&&["html","body"].indexOf(to(ee))<0;){var le=mo(ee);if(le.transform!=="none"||le.perspective!=="none"||le.contain==="paint"||["transform","perspective"].indexOf(le.willChange)!==-1||X&&le.willChange==="filter"||X&&le.filter&&le.filter!=="none")return ee;ee=ee.parentNode}return null})(w)||u}function gl(w){return["top","bottom"].indexOf(w)>=0?"x":"y"}function di(w,u,v){return ds(w,Zi(u,v))}function Su(w){return Object.assign({},{top:0,right:0,bottom:0,left:0},w)}function Fu(w,u){return u.reduce((function(v,A){return v[A]=w,v}),{})}const ku={name:"arrow",enabled:!0,phase:"main",fn:function(w){var u,v=w.state,A=w.name,X=w.options,ee=v.elements.arrow,le=v.modifiersData.popperOffsets,we=no(v.placement),Ae=gl(we),Ie=[nn,Vt].indexOf(we)>=0?"height":"width";if(ee&&le){var Re=(function(Mt,Et){return Su(typeof(Mt=typeof Mt=="function"?Mt(Object.assign({},Et.rects,{placement:Et.placement})):Mt)!="number"?Mt:Fu(Mt,Is))})(X.padding,v),ke=ml(ee),ct=Ae==="y"?ht:nn,Xe=Ae==="y"?$t:Vt,st=v.rects.reference[Ie]+v.rects.reference[Ae]-le[Ae]-v.rects.popper[Ie],Ze=le[Ae]-v.rects.reference[Ae],it=ci(ee),kt=it?Ae==="y"?it.clientHeight||0:it.clientWidth||0:0,Pt=st/2-Ze/2,mt=Re[ct],wt=kt-ke[Ie]-Re[Xe],dt=kt/2-ke[Ie]/2+Pt,bt=di(mt,dt,wt),Ct=Ae;v.modifiersData[A]=((u={})[Ct]=bt,u.centerOffset=bt-dt,u)}},effect:function(w){var u=w.state,v=w.options.element,A=v===void 0?"[data-popper-arrow]":v;A!=null&&(typeof A!="string"||(A=u.elements.popper.querySelector(A)))&&Eu(u.elements.popper,A)&&(u.elements.arrow=A)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ns(w){return w.split("-")[1]}var Jh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mu(w){var u,v=w.popper,A=w.popperRect,X=w.placement,ee=w.variation,le=w.offsets,we=w.position,Ae=w.gpuAcceleration,Ie=w.adaptive,Re=w.roundOffsets,ke=w.isFixed,ct=le.x,Xe=ct===void 0?0:ct,st=le.y,Ze=st===void 0?0:st,it=typeof Re=="function"?Re({x:Xe,y:Ze}):{x:Xe,y:Ze};Xe=it.x,Ze=it.y;var kt=le.hasOwnProperty("x"),Pt=le.hasOwnProperty("y"),mt=nn,wt=ht,dt=window;if(Ie){var bt=ci(v),Ct="clientHeight",Mt="clientWidth";bt===Mn(v)&&mo(bt=Bo(v)).position!=="static"&&we==="absolute"&&(Ct="scrollHeight",Mt="scrollWidth"),(X===ht||(X===nn||X===Vt)&&ee===Os)&&(wt=$t,Ze-=(ke&&bt===dt&&dt.visualViewport?dt.visualViewport.height:bt[Ct])-A.height,Ze*=Ae?1:-1),X!==nn&&(X!==ht&&X!==$t||ee!==Os)||(mt=Vt,Xe-=(ke&&bt===dt&&dt.visualViewport?dt.visualViewport.width:bt[Mt])-A.width,Xe*=Ae?1:-1)}var Et,Jt=Object.assign({position:we},Ie&&Jh),Tn=Re===!0?(function(Wn,mn){var Pn=Wn.x,Bn=Wn.y,qt=mn.devicePixelRatio||1;return{x:Ps(Pn*qt)/qt||0,y:Ps(Bn*qt)/qt||0}})({x:Xe,y:Ze},Mn(v)):{x:Xe,y:Ze};return Xe=Tn.x,Ze=Tn.y,Ae?Object.assign({},Jt,((Et={})[wt]=Pt?"0":"",Et[mt]=kt?"0":"",Et.transform=(dt.devicePixelRatio||1)<=1?"translate("+Xe+"px, "+Ze+"px)":"translate3d("+Xe+"px, "+Ze+"px, 0)",Et)):Object.assign({},Jt,((u={})[wt]=Pt?Ze+"px":"",u[mt]=kt?Xe+"px":"",u.transform="",u))}const bl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(w){var u=w.state,v=w.options,A=v.gpuAcceleration,X=A===void 0||A,ee=v.adaptive,le=ee===void 0||ee,we=v.roundOffsets,Ae=we===void 0||we,Ie={placement:no(u.placement),variation:Ns(u.placement),popper:u.elements.popper,popperRect:u.rects.popper,gpuAcceleration:X,isFixed:u.options.strategy==="fixed"};u.modifiersData.popperOffsets!=null&&(u.styles.popper=Object.assign({},u.styles.popper,Mu(Object.assign({},Ie,{offsets:u.modifiersData.popperOffsets,position:u.options.strategy,adaptive:le,roundOffsets:Ae})))),u.modifiersData.arrow!=null&&(u.styles.arrow=Object.assign({},u.styles.arrow,Mu(Object.assign({},Ie,{offsets:u.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ae})))),u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-placement":u.placement})},data:{}};var er={passive:!0};const yl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(w){var u=w.state,v=w.instance,A=w.options,X=A.scroll,ee=X===void 0||X,le=A.resize,we=le===void 0||le,Ae=Mn(u.elements.popper),Ie=[].concat(u.scrollParents.reference,u.scrollParents.popper);return ee&&Ie.forEach((function(Re){Re.addEventListener("scroll",v.update,er)})),we&&Ae.addEventListener("resize",v.update,er),function(){ee&&Ie.forEach((function(Re){Re.removeEventListener("scroll",v.update,er)})),we&&Ae.removeEventListener("resize",v.update,er)}},data:{}};var Gh={left:"right",right:"left",bottom:"top",top:"bottom"};function tr(w){return w.replace(/left|right|bottom|top/g,(function(u){return Gh[u]}))}var Zh={start:"end",end:"start"};function Tu(w){return w.replace(/start|end/g,(function(u){return Zh[u]}))}function wl(w){var u=Mn(w);return{scrollLeft:u.pageXOffset,scrollTop:u.pageYOffset}}function xl(w){return Bs(Bo(w)).left+wl(w).scrollLeft}function Dl(w){var u=mo(w),v=u.overflow,A=u.overflowX,X=u.overflowY;return/auto|scroll|overlay|hidden/.test(v+X+A)}function $u(w){return["html","body","#document"].indexOf(to(w))>=0?w.ownerDocument.body:On(w)&&Dl(w)?w:$u(Qi(w))}function fi(w,u){var v;u===void 0&&(u=[]);var A=$u(w),X=A===((v=w.ownerDocument)==null?void 0:v.body),ee=Mn(A),le=X?[ee].concat(ee.visualViewport||[],Dl(A)?A:[]):A,we=u.concat(le);return X?we:we.concat(fi(Qi(le)))}function _l(w){return Object.assign({},w,{left:w.x,top:w.y,right:w.x+w.width,bottom:w.y+w.height})}function Lu(w,u,v){return u===cl?_l((function(A,X){var ee=Mn(A),le=Bo(A),we=ee.visualViewport,Ae=le.clientWidth,Ie=le.clientHeight,Re=0,ke=0;if(we){Ae=we.width,Ie=we.height;var ct=Cu();(ct||!ct&&X==="fixed")&&(Re=we.offsetLeft,ke=we.offsetTop)}return{width:Ae,height:Ie,x:Re+xl(A),y:ke}})(w,v)):cs(u)?(function(A,X){var ee=Bs(A,!1,X==="fixed");return ee.top=ee.top+A.clientTop,ee.left=ee.left+A.clientLeft,ee.bottom=ee.top+A.clientHeight,ee.right=ee.left+A.clientWidth,ee.width=A.clientWidth,ee.height=A.clientHeight,ee.x=ee.left,ee.y=ee.top,ee})(u,v):_l((function(A){var X,ee=Bo(A),le=wl(A),we=(X=A.ownerDocument)==null?void 0:X.body,Ae=ds(ee.scrollWidth,ee.clientWidth,we?we.scrollWidth:0,we?we.clientWidth:0),Ie=ds(ee.scrollHeight,ee.clientHeight,we?we.scrollHeight:0,we?we.clientHeight:0),Re=-le.scrollLeft+xl(A),ke=-le.scrollTop;return mo(we||ee).direction==="rtl"&&(Re+=ds(ee.clientWidth,we?we.clientWidth:0)-Ae),{width:Ae,height:Ie,x:Re,y:ke}})(Bo(w)))}function Iu(w){var u,v=w.reference,A=w.element,X=w.placement,ee=X?no(X):null,le=X?Ns(X):null,we=v.x+v.width/2-A.width/2,Ae=v.y+v.height/2-A.height/2;switch(ee){case ht:u={x:we,y:v.y-A.height};break;case $t:u={x:we,y:v.y+v.height};break;case Vt:u={x:v.x+v.width,y:Ae};break;case nn:u={x:v.x-A.width,y:Ae};break;default:u={x:v.x,y:v.y}}var Ie=ee?gl(ee):null;if(Ie!=null){var Re=Ie==="y"?"height":"width";switch(le){case us:u[Ie]=u[Ie]-(v[Re]/2-A[Re]/2);break;case Os:u[Ie]=u[Ie]+(v[Re]/2-A[Re]/2)}}return u}function Vs(w,u){u===void 0&&(u={});var v=u,A=v.placement,X=A===void 0?w.placement:A,ee=v.strategy,le=ee===void 0?w.strategy:ee,we=v.boundary,Ae=we===void 0?fu:we,Ie=v.rootBoundary,Re=Ie===void 0?cl:Ie,ke=v.elementContext,ct=ke===void 0?Rs:ke,Xe=v.altBoundary,st=Xe!==void 0&&Xe,Ze=v.padding,it=Ze===void 0?0:Ze,kt=Su(typeof it!="number"?it:Fu(it,Is)),Pt=ct===Rs?hu:Rs,mt=w.rects.popper,wt=w.elements[st?Pt:ct],dt=(function(mn,Pn,Bn,qt){var oo=Pn==="clippingParents"?(function(Lt){var gn=fi(Qi(Lt)),Nn=["absolute","fixed"].indexOf(mo(Lt).position)>=0&&On(Lt)?ci(Lt):Lt;return cs(Nn)?gn.filter((function(Vo){return cs(Vo)&&Eu(Vo,Nn)&&to(Vo)!=="body"})):[]})(mn):[].concat(Pn),so=[].concat(oo,[Bn]),Us=so[0],rn=so.reduce((function(Lt,gn){var Nn=Lu(mn,gn,qt);return Lt.top=ds(Nn.top,Lt.top),Lt.right=Zi(Nn.right,Lt.right),Lt.bottom=Zi(Nn.bottom,Lt.bottom),Lt.left=ds(Nn.left,Lt.left),Lt}),Lu(mn,Us,qt));return rn.width=rn.right-rn.left,rn.height=rn.bottom-rn.top,rn.x=rn.left,rn.y=rn.top,rn})(cs(wt)?wt:wt.contextElement||Bo(w.elements.popper),Ae,Re,le),bt=Bs(w.elements.reference),Ct=Iu({reference:bt,element:mt,placement:X}),Mt=_l(Object.assign({},mt,Ct)),Et=ct===Rs?Mt:bt,Jt={top:dt.top-Et.top+kt.top,bottom:Et.bottom-dt.bottom+kt.bottom,left:dt.left-Et.left+kt.left,right:Et.right-dt.right+kt.right},Tn=w.modifiersData.offset;if(ct===Rs&&Tn){var Wn=Tn[X];Object.keys(Jt).forEach((function(mn){var Pn=[Vt,$t].indexOf(mn)>=0?1:-1,Bn=[ht,$t].indexOf(mn)>=0?"y":"x";Jt[mn]+=Wn[Bn]*Pn}))}return Jt}function Qh(w,u){u===void 0&&(u={});var v=u,A=v.placement,X=v.boundary,ee=v.rootBoundary,le=v.padding,we=v.flipVariations,Ae=v.allowedAutoPlacements,Ie=Ae===void 0?fl:Ae,Re=Ns(A),ke=Re?we?dl:dl.filter((function(st){return Ns(st)===Re})):Is,ct=ke.filter((function(st){return Ie.indexOf(st)>=0}));ct.length===0&&(ct=ke);var Xe=ct.reduce((function(st,Ze){return st[Ze]=Vs(w,{placement:Ze,boundary:X,rootBoundary:ee,padding:le})[no(Ze)],st}),{});return Object.keys(Xe).sort((function(st,Ze){return Xe[st]-Xe[Ze]}))}const Ou={name:"flip",enabled:!0,phase:"main",fn:function(w){var u=w.state,v=w.options,A=w.name;if(!u.modifiersData[A]._skip){for(var X=v.mainAxis,ee=X===void 0||X,le=v.altAxis,we=le===void 0||le,Ae=v.fallbackPlacements,Ie=v.padding,Re=v.boundary,ke=v.rootBoundary,ct=v.altBoundary,Xe=v.flipVariations,st=Xe===void 0||Xe,Ze=v.allowedAutoPlacements,it=u.options.placement,kt=no(it),Pt=Ae||(kt!==it&&st?(function(Lt){if(no(Lt)===Po)return[];var gn=tr(Lt);return[Tu(Lt),gn,Tu(gn)]})(it):[tr(it)]),mt=[it].concat(Pt).reduce((function(Lt,gn){return Lt.concat(no(gn)===Po?Qh(u,{placement:gn,boundary:Re,rootBoundary:ke,padding:Ie,flipVariations:st,allowedAutoPlacements:Ze}):gn)}),[]),wt=u.rects.reference,dt=u.rects.popper,bt=new Map,Ct=!0,Mt=mt[0],Et=0;Et<mt.length;Et++){var Jt=mt[Et],Tn=no(Jt),Wn=Ns(Jt)===us,mn=[ht,$t].indexOf(Tn)>=0,Pn=mn?"width":"height",Bn=Vs(u,{placement:Jt,boundary:Re,rootBoundary:ke,altBoundary:ct,padding:Ie}),qt=mn?Wn?Vt:nn:Wn?$t:ht;wt[Pn]>dt[Pn]&&(qt=tr(qt));var oo=tr(qt),so=[];if(ee&&so.push(Bn[Tn]<=0),we&&so.push(Bn[qt]<=0,Bn[oo]<=0),so.every((function(Lt){return Lt}))){Mt=Jt,Ct=!1;break}bt.set(Jt,so)}if(Ct)for(var Us=function(Lt){var gn=mt.find((function(Nn){var Vo=bt.get(Nn);if(Vo)return Vo.slice(0,Lt).every((function(cr){return cr}))}));if(gn)return Mt=gn,"break"},rn=st?3:1;rn>0&&Us(rn)!=="break";rn--);u.placement!==Mt&&(u.modifiersData[A]._skip=!0,u.placement=Mt,u.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ru(w,u,v){return v===void 0&&(v={x:0,y:0}),{top:w.top-u.height-v.y,right:w.right-u.width+v.x,bottom:w.bottom-u.height+v.y,left:w.left-u.width-v.x}}function Pu(w){return[ht,Vt,$t,nn].some((function(u){return w[u]>=0}))}const Bu={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(w){var u=w.state,v=w.name,A=u.rects.reference,X=u.rects.popper,ee=u.modifiersData.preventOverflow,le=Vs(u,{elementContext:"reference"}),we=Vs(u,{altBoundary:!0}),Ae=Ru(le,A),Ie=Ru(we,X,ee),Re=Pu(Ae),ke=Pu(Ie);u.modifiersData[v]={referenceClippingOffsets:Ae,popperEscapeOffsets:Ie,isReferenceHidden:Re,hasPopperEscaped:ke},u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-reference-hidden":Re,"data-popper-escaped":ke})}},Nu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(w){var u=w.state,v=w.options,A=w.name,X=v.offset,ee=X===void 0?[0,0]:X,le=fl.reduce((function(Re,ke){return Re[ke]=(function(ct,Xe,st){var Ze=no(ct),it=[nn,ht].indexOf(Ze)>=0?-1:1,kt=typeof st=="function"?st(Object.assign({},Xe,{placement:ct})):st,Pt=kt[0],mt=kt[1];return Pt=Pt||0,mt=(mt||0)*it,[nn,Vt].indexOf(Ze)>=0?{x:mt,y:Pt}:{x:Pt,y:mt}})(ke,u.rects,ee),Re}),{}),we=le[u.placement],Ae=we.x,Ie=we.y;u.modifiersData.popperOffsets!=null&&(u.modifiersData.popperOffsets.x+=Ae,u.modifiersData.popperOffsets.y+=Ie),u.modifiersData[A]=le}},Cl={name:"popperOffsets",enabled:!0,phase:"read",fn:function(w){var u=w.state,v=w.name;u.modifiersData[v]=Iu({reference:u.rects.reference,element:u.rects.popper,placement:u.placement})},data:{}},Vu={name:"preventOverflow",enabled:!0,phase:"main",fn:function(w){var u=w.state,v=w.options,A=w.name,X=v.mainAxis,ee=X===void 0||X,le=v.altAxis,we=le!==void 0&&le,Ae=v.boundary,Ie=v.rootBoundary,Re=v.altBoundary,ke=v.padding,ct=v.tether,Xe=ct===void 0||ct,st=v.tetherOffset,Ze=st===void 0?0:st,it=Vs(u,{boundary:Ae,rootBoundary:Ie,padding:ke,altBoundary:Re}),kt=no(u.placement),Pt=Ns(u.placement),mt=!Pt,wt=gl(kt),dt=wt==="x"?"y":"x",bt=u.modifiersData.popperOffsets,Ct=u.rects.reference,Mt=u.rects.popper,Et=typeof Ze=="function"?Ze(Object.assign({},u.rects,{placement:u.placement})):Ze,Jt=typeof Et=="number"?{mainAxis:Et,altAxis:Et}:Object.assign({mainAxis:0,altAxis:0},Et),Tn=u.modifiersData.offset?u.modifiersData.offset[u.placement]:null,Wn={x:0,y:0};if(bt){if(ee){var mn,Pn=wt==="y"?ht:nn,Bn=wt==="y"?$t:Vt,qt=wt==="y"?"height":"width",oo=bt[wt],so=oo+it[Pn],Us=oo-it[Bn],rn=Xe?-Mt[qt]/2:0,Lt=Pt===us?Ct[qt]:Mt[qt],gn=Pt===us?-Mt[qt]:-Ct[qt],Nn=u.elements.arrow,Vo=Xe&&Nn?ml(Nn):{width:0,height:0},cr=u.modifiersData["arrow#persistent"]?u.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ac=cr[Pn],Sc=cr[Bn],dr=di(0,Ct[qt],Vo[qt]),Tv=mt?Ct[qt]/2-rn-dr-Ac-Jt.mainAxis:Lt-dr-Ac-Jt.mainAxis,$v=mt?-Ct[qt]/2+rn+dr+Sc+Jt.mainAxis:gn+dr+Sc+Jt.mainAxis,Bl=u.elements.arrow&&ci(u.elements.arrow),Lv=Bl?wt==="y"?Bl.clientTop||0:Bl.clientLeft||0:0,Fc=(mn=Tn?.[wt])!=null?mn:0,Iv=oo+$v-Fc,kc=di(Xe?Zi(so,oo+Tv-Fc-Lv):so,oo,Xe?ds(Us,Iv):Us);bt[wt]=kc,Wn[wt]=kc-oo}if(we){var Mc,Ov=wt==="x"?ht:nn,Rv=wt==="x"?$t:Vt,ys=bt[dt],fr=dt==="y"?"height":"width",Tc=ys+it[Ov],$c=ys-it[Rv],Nl=[ht,nn].indexOf(kt)!==-1,Lc=(Mc=Tn?.[dt])!=null?Mc:0,Ic=Nl?Tc:ys-Ct[fr]-Mt[fr]-Lc+Jt.altAxis,Oc=Nl?ys+Ct[fr]+Mt[fr]-Lc-Jt.altAxis:$c,Rc=Xe&&Nl?(function(Pv,Bv,Vl){var Pc=di(Pv,Bv,Vl);return Pc>Vl?Vl:Pc})(Ic,ys,Oc):di(Xe?Ic:Tc,ys,Xe?Oc:$c);bt[dt]=Rc,Wn[dt]=Rc-ys}u.modifiersData[A]=Wn}},requiresIfExists:["offset"]};function ep(w,u,v){v===void 0&&(v=!1);var A,X,ee=On(u),le=On(u)&&(function(ke){var ct=ke.getBoundingClientRect(),Xe=Ps(ct.width)/ke.offsetWidth||1,st=Ps(ct.height)/ke.offsetHeight||1;return Xe!==1||st!==1})(u),we=Bo(u),Ae=Bs(w,le,v),Ie={scrollLeft:0,scrollTop:0},Re={x:0,y:0};return(ee||!ee&&!v)&&((to(u)!=="body"||Dl(we))&&(Ie=(A=u)!==Mn(A)&&On(A)?{scrollLeft:(X=A).scrollLeft,scrollTop:X.scrollTop}:wl(A)),On(u)?((Re=Bs(u,!0)).x+=u.clientLeft,Re.y+=u.clientTop):we&&(Re.x=xl(we))),{x:Ae.left+Ie.scrollLeft-Re.x,y:Ae.top+Ie.scrollTop-Re.y,width:Ae.width,height:Ae.height}}function tp(w){var u=new Map,v=new Set,A=[];function X(ee){v.add(ee.name),[].concat(ee.requires||[],ee.requiresIfExists||[]).forEach((function(le){if(!v.has(le)){var we=u.get(le);we&&X(we)}})),A.push(ee)}return w.forEach((function(ee){u.set(ee.name,ee)})),w.forEach((function(ee){v.has(ee.name)||X(ee)})),A}var Ku={placement:"bottom",modifiers:[],strategy:"absolute"};function zu(){for(var w=arguments.length,u=new Array(w),v=0;v<w;v++)u[v]=arguments[v];return!u.some((function(A){return!(A&&typeof A.getBoundingClientRect=="function")}))}function nr(w){w===void 0&&(w={});var u=w,v=u.defaultModifiers,A=v===void 0?[]:v,X=u.defaultOptions,ee=X===void 0?Ku:X;return function(le,we,Ae){Ae===void 0&&(Ae=ee);var Ie,Re,ke={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ku,ee),modifiersData:{},elements:{reference:le,popper:we},attributes:{},styles:{}},ct=[],Xe=!1,st={state:ke,setOptions:function(it){var kt=typeof it=="function"?it(ke.options):it;Ze(),ke.options=Object.assign({},ee,ke.options,kt),ke.scrollParents={reference:cs(le)?fi(le):le.contextElement?fi(le.contextElement):[],popper:fi(we)};var Pt,mt,wt=(function(dt){var bt=tp(dt);return _u.reduce((function(Ct,Mt){return Ct.concat(bt.filter((function(Et){return Et.phase===Mt})))}),[])})((Pt=[].concat(A,ke.options.modifiers),mt=Pt.reduce((function(dt,bt){var Ct=dt[bt.name];return dt[bt.name]=Ct?Object.assign({},Ct,bt,{options:Object.assign({},Ct.options,bt.options),data:Object.assign({},Ct.data,bt.data)}):bt,dt}),{}),Object.keys(mt).map((function(dt){return mt[dt]}))));return ke.orderedModifiers=wt.filter((function(dt){return dt.enabled})),ke.orderedModifiers.forEach((function(dt){var bt=dt.name,Ct=dt.options,Mt=Ct===void 0?{}:Ct,Et=dt.effect;if(typeof Et=="function"){var Jt=Et({state:ke,name:bt,instance:st,options:Mt});ct.push(Jt||function(){})}})),st.update()},forceUpdate:function(){if(!Xe){var it=ke.elements,kt=it.reference,Pt=it.popper;if(zu(kt,Pt)){ke.rects={reference:ep(kt,ci(Pt),ke.options.strategy==="fixed"),popper:ml(Pt)},ke.reset=!1,ke.placement=ke.options.placement,ke.orderedModifiers.forEach((function(Et){return ke.modifiersData[Et.name]=Object.assign({},Et.data)}));for(var mt=0;mt<ke.orderedModifiers.length;mt++)if(ke.reset!==!0){var wt=ke.orderedModifiers[mt],dt=wt.fn,bt=wt.options,Ct=bt===void 0?{}:bt,Mt=wt.name;typeof dt=="function"&&(ke=dt({state:ke,options:Ct,name:Mt,instance:st})||ke)}else ke.reset=!1,mt=-1}}},update:(Ie=function(){return new Promise((function(it){st.forceUpdate(),it(ke)}))},function(){return Re||(Re=new Promise((function(it){Promise.resolve().then((function(){Re=void 0,it(Ie())}))}))),Re}),destroy:function(){Ze(),Xe=!0}};if(!zu(le,we))return st;function Ze(){ct.forEach((function(it){return it()})),ct=[]}return st.setOptions(Ae).then((function(it){!Xe&&Ae.onFirstUpdate&&Ae.onFirstUpdate(it)})),st}}var np=nr(),op=nr({defaultModifiers:[yl,Cl,bl,pl]}),El=nr({defaultModifiers:[yl,Cl,bl,pl,Nu,Ou,Vu,ku,Bu]});const Uu=Object.freeze(Object.defineProperty({__proto__:null,afterMain:yu,afterRead:mu,afterWrite:Du,applyStyles:pl,arrow:ku,auto:Po,basePlacements:Is,beforeMain:gu,beforeRead:pu,beforeWrite:wu,bottom:$t,clippingParents:fu,computeStyles:bl,createPopper:El,createPopperBase:np,createPopperLite:op,detectOverflow:Vs,end:Os,eventListeners:yl,flip:Ou,hide:Bu,left:nn,main:bu,modifierPhases:_u,offset:Nu,placements:fl,popper:Rs,popperGenerator:nr,popperOffsets:Cl,preventOverflow:Vu,read:vu,reference:hu,right:Vt,start:us,top:ht,variationPlacements:dl,viewport:cl,write:xu},Symbol.toStringTag,{value:"Module"})),Hu="dropdown",fs=".bs.dropdown",Al=".data-api",sp="ArrowUp",ju="ArrowDown",ip=`hide${fs}`,rp=`hidden${fs}`,lp=`show${fs}`,ap=`shown${fs}`,Wu=`click${fs}${Al}`,qu=`keydown${fs}${Al}`,up=`keyup${fs}${Al}`,Ks="show",hs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',cp=`${hs}.${Ks}`,or=".dropdown-menu",dp=T()?"top-end":"top-start",fp=T()?"top-start":"top-end",hp=T()?"bottom-end":"bottom-start",pp=T()?"bottom-start":"bottom-end",vp=T()?"left-start":"right-start",mp=T()?"right-start":"left-start",gp={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},bp={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class jn extends Me{constructor(u,v){super(u,v),this._popper=null,this._parent=this._element.parentNode,this._menu=j.next(this._element,or)[0]||j.prev(this._element,or)[0]||j.findOne(or,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return gp}static get DefaultType(){return bp}static get NAME(){return Hu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(h(this._element)||this._isShown())return;const u={relatedTarget:this._element};if(!U.trigger(this._element,lp,u).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))U.on(v,"mouseover",p);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ks),this._element.classList.add(Ks),U.trigger(this._element,ap,u)}}hide(){if(h(this._element)||!this._isShown())return;const u={relatedTarget:this._element};this._completeHide(u)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(u){if(!U.trigger(this._element,ip,u).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))U.off(v,"mouseover",p);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ks),this._element.classList.remove(Ks),this._element.setAttribute("aria-expanded","false"),se.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,rp,u),this._element.focus()}}_getConfig(u){if(typeof(u=super._getConfig(u)).reference=="object"&&!l(u.reference)&&typeof u.reference.getBoundingClientRect!="function")throw new TypeError(`${Hu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return u}_createPopper(){if(Uu===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let u=this._element;this._config.reference==="parent"?u=this._parent:l(this._config.reference)?u=a(this._config.reference):typeof this._config.reference=="object"&&(u=this._config.reference);const v=this._getPopperConfig();this._popper=El(u,this._menu,v)}_isShown(){return this._menu.classList.contains(Ks)}_getPlacement(){const u=this._parent;if(u.classList.contains("dropend"))return vp;if(u.classList.contains("dropstart"))return mp;if(u.classList.contains("dropup-center"))return"top";if(u.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return u.classList.contains("dropup")?v?fp:dp:v?pp:hp}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:u}=this._config;return typeof u=="string"?u.split(",").map((v=>Number.parseInt(v,10))):typeof u=="function"?v=>u(v,this._element):u}_getPopperConfig(){const u={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(se.setDataAttribute(this._menu,"popper","static"),u.modifiers=[{name:"applyStyles",enabled:!1}]),{...u,...C(this._config.popperConfig,[void 0,u])}}_selectMenuItem({key:u,target:v}){const A=j.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((X=>d(X)));A.length&&E(A,v,u===ju,!A.includes(v)).focus()}static jQueryInterface(u){return this.each((function(){const v=jn.getOrCreateInstance(this,u);if(typeof u=="string"){if(v[u]===void 0)throw new TypeError(`No method named "${u}"`);v[u]()}}))}static clearMenus(u){if(u.button===2||u.type==="keyup"&&u.key!=="Tab")return;const v=j.find(cp);for(const A of v){const X=jn.getInstance(A);if(!X||X._config.autoClose===!1)continue;const ee=u.composedPath(),le=ee.includes(X._menu);if(ee.includes(X._element)||X._config.autoClose==="inside"&&!le||X._config.autoClose==="outside"&&le||X._menu.contains(u.target)&&(u.type==="keyup"&&u.key==="Tab"||/input|select|option|textarea|form/i.test(u.target.tagName)))continue;const we={relatedTarget:X._element};u.type==="click"&&(we.clickEvent=u),X._completeHide(we)}}static dataApiKeydownHandler(u){const v=/input|textarea/i.test(u.target.tagName),A=u.key==="Escape",X=[sp,ju].includes(u.key);if(!X&&!A||v&&!A)return;u.preventDefault();const ee=this.matches(hs)?this:j.prev(this,hs)[0]||j.next(this,hs)[0]||j.findOne(hs,u.delegateTarget.parentNode),le=jn.getOrCreateInstance(ee);if(X)return u.stopPropagation(),le.show(),void le._selectMenuItem(u);le._isShown()&&(u.stopPropagation(),le.hide(),ee.focus())}}U.on(document,qu,hs,jn.dataApiKeydownHandler),U.on(document,qu,or,jn.dataApiKeydownHandler),U.on(document,Wu,jn.clearMenus),U.on(document,up,jn.clearMenus),U.on(document,Wu,hs,(function(w){w.preventDefault(),jn.getOrCreateInstance(this).toggle()})),y(jn);const Yu="backdrop",Xu="show",Ju=`mousedown.bs.${Yu}`,yp={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},wp={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Gu extends De{constructor(u){super(),this._config=this._getConfig(u),this._isAppended=!1,this._element=null}static get Default(){return yp}static get DefaultType(){return wp}static get NAME(){return Yu}show(u){if(!this._config.isVisible)return void C(u);this._append();const v=this._getElement();this._config.isAnimated&&m(v),v.classList.add(Xu),this._emulateAnimation((()=>{C(u)}))}hide(u){this._config.isVisible?(this._getElement().classList.remove(Xu),this._emulateAnimation((()=>{this.dispose(),C(u)}))):C(u)}dispose(){this._isAppended&&(U.off(this._element,Ju),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const u=document.createElement("div");u.className=this._config.className,this._config.isAnimated&&u.classList.add("fade"),this._element=u}return this._element}_configAfterMerge(u){return u.rootElement=a(u.rootElement),u}_append(){if(this._isAppended)return;const u=this._getElement();this._config.rootElement.append(u),U.on(u,Ju,(()=>{C(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(u){M(u,this._getElement(),this._config.isAnimated)}}const sr=".bs.focustrap",xp=`focusin${sr}`,Dp=`keydown.tab${sr}`,Zu="backward",_p={autofocus:!0,trapElement:null},Cp={autofocus:"boolean",trapElement:"element"};class Qu extends De{constructor(u){super(),this._config=this._getConfig(u),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _p}static get DefaultType(){return Cp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,sr),U.on(document,xp,(u=>this._handleFocusin(u))),U.on(document,Dp,(u=>this._handleKeydown(u))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,sr))}_handleFocusin(u){const{trapElement:v}=this._config;if(u.target===document||u.target===v||v.contains(u.target))return;const A=j.focusableChildren(v);A.length===0?v.focus():this._lastTabNavDirection===Zu?A[A.length-1].focus():A[0].focus()}_handleKeydown(u){u.key==="Tab"&&(this._lastTabNavDirection=u.shiftKey?Zu:"forward")}}const ec=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",tc=".sticky-top",ir="padding-right",nc="margin-right";class Sl{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ir,(v=>v+u)),this._setElementAttributes(ec,ir,(v=>v+u)),this._setElementAttributes(tc,nc,(v=>v-u))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ir),this._resetElementAttributes(ec,ir),this._resetElementAttributes(tc,nc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,v,A){const X=this.getWidth();this._applyManipulationCallback(u,(ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+X)return;this._saveInitialAttribute(ee,v);const le=window.getComputedStyle(ee).getPropertyValue(v);ee.style.setProperty(v,`${A(Number.parseFloat(le))}px`)}))}_saveInitialAttribute(u,v){const A=u.style.getPropertyValue(v);A&&se.setDataAttribute(u,v,A)}_resetElementAttributes(u,v){this._applyManipulationCallback(u,(A=>{const X=se.getDataAttribute(A,v);X!==null?(se.removeDataAttribute(A,v),A.style.setProperty(v,X)):A.style.removeProperty(v)}))}_applyManipulationCallback(u,v){if(l(u))v(u);else for(const A of j.find(u,this._element))v(A)}}const Rn=".bs.modal",Ep=`hide${Rn}`,Ap=`hidePrevented${Rn}`,oc=`hidden${Rn}`,sc=`show${Rn}`,Sp=`shown${Rn}`,Fp=`resize${Rn}`,kp=`click.dismiss${Rn}`,Mp=`mousedown.dismiss${Rn}`,Tp=`keydown.dismiss${Rn}`,$p=`click${Rn}.data-api`,ic="modal-open",rc="show",Fl="modal-static",Lp={backdrop:!0,focus:!0,keyboard:!0},Ip={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ps extends Me{constructor(u,v){super(u,v),this._dialog=j.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Sl,this._addEventListeners()}static get Default(){return Lp}static get DefaultType(){return Ip}static get NAME(){return"modal"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||this._isTransitioning||U.trigger(this._element,sc,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ic),this._adjustDialog(),this._backdrop.show((()=>this._showElement(u))))}hide(){this._isShown&&!this._isTransitioning&&(U.trigger(this._element,Ep).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(rc),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){U.off(window,Rn),U.off(this._dialog,Rn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Gu({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Qu({trapElement:this._element})}_showElement(u){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=j.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),m(this._element),this._element.classList.add(rc),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,Sp,{relatedTarget:u})}),this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,Tp,(u=>{u.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),U.on(window,Fp,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),U.on(this._element,Mp,(u=>{U.one(this._element,kp,(v=>{this._element===u.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ic),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,oc)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(U.trigger(this._element,Ap).defaultPrevented)return;const u=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(Fl)||(u||(this._element.style.overflowY="hidden"),this._element.classList.add(Fl),this._queueCallback((()=>{this._element.classList.remove(Fl),this._queueCallback((()=>{this._element.style.overflowY=v}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const u=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),A=v>0;if(A&&!u){const X=T()?"paddingLeft":"paddingRight";this._element.style[X]=`${v}px`}if(!A&&u){const X=T()?"paddingRight":"paddingLeft";this._element.style[X]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(u,v){return this.each((function(){const A=ps.getOrCreateInstance(this,u);if(typeof u=="string"){if(A[u]===void 0)throw new TypeError(`No method named "${u}"`);A[u](v)}}))}}U.on(document,$p,'[data-bs-toggle="modal"]',(function(w){const u=j.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&w.preventDefault(),U.one(u,sc,(A=>{A.defaultPrevented||U.one(u,oc,(()=>{d(this)&&this.focus()}))}));const v=j.findOne(".modal.show");v&&ps.getInstance(v).hide(),ps.getOrCreateInstance(u).toggle(this)})),K(ps),y(ps);const go=".bs.offcanvas",lc=".data-api",Op=`load${go}${lc}`,ac="show",uc="showing",cc="hiding",dc=".offcanvas.show",Rp=`show${go}`,Pp=`shown${go}`,Bp=`hide${go}`,fc=`hidePrevented${go}`,hc=`hidden${go}`,Np=`resize${go}`,Vp=`click${go}${lc}`,Kp=`keydown.dismiss${go}`,zp={backdrop:!0,keyboard:!0,scroll:!1},Up={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class bo extends Me{constructor(u,v){super(u,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return zp}static get DefaultType(){return Up}static get NAME(){return"offcanvas"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||U.trigger(this._element,Rp,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Sl().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(uc),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ac),this._element.classList.remove(uc),U.trigger(this._element,Pp,{relatedTarget:u})}),this._element,!0))}hide(){this._isShown&&(U.trigger(this._element,Bp).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(cc),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(ac,cc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Sl().reset(),U.trigger(this._element,hc)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const u=!!this._config.backdrop;return new Gu({className:"offcanvas-backdrop",isVisible:u,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:u?()=>{this._config.backdrop!=="static"?this.hide():U.trigger(this._element,fc)}:null})}_initializeFocusTrap(){return new Qu({trapElement:this._element})}_addEventListeners(){U.on(this._element,Kp,(u=>{u.key==="Escape"&&(this._config.keyboard?this.hide():U.trigger(this._element,fc))}))}static jQueryInterface(u){return this.each((function(){const v=bo.getOrCreateInstance(this,u);if(typeof u=="string"){if(v[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);v[u](this)}}))}}U.on(document,Vp,'[data-bs-toggle="offcanvas"]',(function(w){const u=j.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&w.preventDefault(),h(this))return;U.one(u,hc,(()=>{d(this)&&this.focus()}));const v=j.findOne(dc);v&&v!==u&&bo.getInstance(v).hide(),bo.getOrCreateInstance(u).toggle(this)})),U.on(window,Op,(()=>{for(const w of j.find(dc))bo.getOrCreateInstance(w).show()})),U.on(window,Np,(()=>{for(const w of j.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(w).position!=="fixed"&&bo.getOrCreateInstance(w).hide()})),K(bo),y(bo);const pc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Hp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),jp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Wp=(w,u)=>{const v=w.nodeName.toLowerCase();return u.includes(v)?!Hp.has(v)||!!jp.test(w.nodeValue):u.filter((A=>A instanceof RegExp)).some((A=>A.test(v)))},qp={allowList:pc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Yp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xp={entry:"(string|element|function|null)",selector:"(string|element)"};class Jp extends De{constructor(u){super(),this._config=this._getConfig(u)}static get Default(){return qp}static get DefaultType(){return Yp}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((u=>this._resolvePossibleFunction(u))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(u){return this._checkContent(u),this._config.content={...this._config.content,...u},this}toHtml(){const u=document.createElement("div");u.innerHTML=this._maybeSanitize(this._config.template);for(const[X,ee]of Object.entries(this._config.content))this._setContent(u,ee,X);const v=u.children[0],A=this._resolvePossibleFunction(this._config.extraClass);return A&&v.classList.add(...A.split(" ")),v}_typeCheckConfig(u){super._typeCheckConfig(u),this._checkContent(u.content)}_checkContent(u){for(const[v,A]of Object.entries(u))super._typeCheckConfig({selector:v,entry:A},Xp)}_setContent(u,v,A){const X=j.findOne(A,u);X&&((v=this._resolvePossibleFunction(v))?l(v)?this._putElementInTemplate(a(v),X):this._config.html?X.innerHTML=this._maybeSanitize(v):X.textContent=v:X.remove())}_maybeSanitize(u){return this._config.sanitize?(function(v,A,X){if(!v.length)return v;if(X&&typeof X=="function")return X(v);const ee=new window.DOMParser().parseFromString(v,"text/html"),le=[].concat(...ee.body.querySelectorAll("*"));for(const we of le){const Ae=we.nodeName.toLowerCase();if(!Object.keys(A).includes(Ae)){we.remove();continue}const Ie=[].concat(...we.attributes),Re=[].concat(A["*"]||[],A[Ae]||[]);for(const ke of Ie)Wp(ke,Re)||we.removeAttribute(ke.nodeName)}return ee.body.innerHTML})(u,this._config.allowList,this._config.sanitizeFn):u}_resolvePossibleFunction(u){return C(u,[void 0,this])}_putElementInTemplate(u,v){if(this._config.html)return v.innerHTML="",void v.append(u);v.textContent=u.textContent}}const Gp=new Set(["sanitize","allowList","sanitizeFn"]),kl="fade",rr="show",Zp=".tooltip-inner",vc=".modal",mc="hide.bs.modal",hi="hover",Ml="focus",Tl="click",Qp={AUTO:"auto",TOP:"top",RIGHT:T()?"left":"right",BOTTOM:"bottom",LEFT:T()?"right":"left"},ev={allowList:pc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},tv={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class vs extends Me{constructor(u,v){if(Uu===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(u,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ev}static get DefaultType(){return tv}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(vc),mc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const u=U.trigger(this._element,this.constructor.eventName("show")),v=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(u.defaultPrevented||!v)return;this._disposePopper();const A=this._getTipElement();this._element.setAttribute("aria-describedby",A.getAttribute("id"));const{container:X}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(X.append(A),U.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(A),A.classList.add(rr),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))U.on(ee,"mouseover",p);this._queueCallback((()=>{U.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!U.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(rr),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))U.off(u,"mouseover",p);this._activeTrigger[Tl]=!1,this._activeTrigger[Ml]=!1,this._activeTrigger[hi]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(u){const v=this._getTemplateFactory(u).toHtml();if(!v)return null;v.classList.remove(kl,rr),v.classList.add(`bs-${this.constructor.NAME}-auto`);const A=(X=>{do X+=Math.floor(1e6*Math.random());while(document.getElementById(X));return X})(this.constructor.NAME).toString();return v.setAttribute("id",A),this._isAnimated()&&v.classList.add(kl),v}setContent(u){this._newContent=u,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(u){return this._templateFactory?this._templateFactory.changeContent(u):this._templateFactory=new Jp({...this._config,content:u,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Zp]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(u){return this.constructor.getOrCreateInstance(u.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(kl)}_isShown(){return this.tip&&this.tip.classList.contains(rr)}_createPopper(u){const v=C(this._config.placement,[this,u,this._element]),A=Qp[v.toUpperCase()];return El(this._element,u,this._getPopperConfig(A))}_getOffset(){const{offset:u}=this._config;return typeof u=="string"?u.split(",").map((v=>Number.parseInt(v,10))):typeof u=="function"?v=>u(v,this._element):u}_resolvePossibleFunction(u){return C(u,[this._element,this._element])}_getPopperConfig(u){const v={placement:u,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:A=>{this._getTipElement().setAttribute("data-popper-placement",A.state.placement)}}]};return{...v,...C(this._config.popperConfig,[void 0,v])}}_setListeners(){const u=this._config.trigger.split(" ");for(const v of u)if(v==="click")U.on(this._element,this.constructor.eventName("click"),this._config.selector,(A=>{const X=this._initializeOnDelegatedTarget(A);X._activeTrigger[Tl]=!(X._isShown()&&X._activeTrigger[Tl]),X.toggle()}));else if(v!=="manual"){const A=v===hi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),X=v===hi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");U.on(this._element,A,this._config.selector,(ee=>{const le=this._initializeOnDelegatedTarget(ee);le._activeTrigger[ee.type==="focusin"?Ml:hi]=!0,le._enter()})),U.on(this._element,X,this._config.selector,(ee=>{const le=this._initializeOnDelegatedTarget(ee);le._activeTrigger[ee.type==="focusout"?Ml:hi]=le._element.contains(ee.relatedTarget),le._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(vc),mc,this._hideModalHandler)}_fixTitle(){const u=this._element.getAttribute("title");u&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",u),this._element.setAttribute("data-bs-original-title",u),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(u,v){clearTimeout(this._timeout),this._timeout=setTimeout(u,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(u){const v=se.getDataAttributes(this._element);for(const A of Object.keys(v))Gp.has(A)&&delete v[A];return u={...v,...typeof u=="object"&&u?u:{}},u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u.container=u.container===!1?document.body:a(u.container),typeof u.delay=="number"&&(u.delay={show:u.delay,hide:u.delay}),typeof u.title=="number"&&(u.title=u.title.toString()),typeof u.content=="number"&&(u.content=u.content.toString()),u}_getDelegateConfig(){const u={};for(const[v,A]of Object.entries(this._config))this.constructor.Default[v]!==A&&(u[v]=A);return u.selector=!1,u.trigger="manual",u}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(u){return this.each((function(){const v=vs.getOrCreateInstance(this,u);if(typeof u=="string"){if(v[u]===void 0)throw new TypeError(`No method named "${u}"`);v[u]()}}))}}y(vs);const nv=".popover-header",ov=".popover-body",sv={...vs.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},iv={...vs.DefaultType,content:"(null|string|element|function)"};class lr extends vs{static get Default(){return sv}static get DefaultType(){return iv}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[nv]:this._getTitle(),[ov]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(u){return this.each((function(){const v=lr.getOrCreateInstance(this,u);if(typeof u=="string"){if(v[u]===void 0)throw new TypeError(`No method named "${u}"`);v[u]()}}))}}y(lr);const $l=".bs.scrollspy",rv=`activate${$l}`,gc=`click${$l}`,lv=`load${$l}.data-api`,zs="active",Ll="[href]",bc=".nav-link",av=`${bc}, .nav-item > ${bc}, .list-group-item`,uv={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},cv={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class pi extends Me{constructor(u,v){super(u,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return uv}static get DefaultType(){return cv}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const u of this._observableSections.values())this._observer.observe(u)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(u){return u.target=a(u.target)||document.body,u.rootMargin=u.offset?`${u.offset}px 0px -30%`:u.rootMargin,typeof u.threshold=="string"&&(u.threshold=u.threshold.split(",").map((v=>Number.parseFloat(v)))),u}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,gc),U.on(this._config.target,gc,Ll,(u=>{const v=this._observableSections.get(u.target.hash);if(v){u.preventDefault();const A=this._rootElement||window,X=v.offsetTop-this._element.offsetTop;if(A.scrollTo)return void A.scrollTo({top:X,behavior:"smooth"});A.scrollTop=X}})))}_getNewObserver(){const u={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((v=>this._observerCallback(v)),u)}_observerCallback(u){const v=le=>this._targetLinks.get(`#${le.target.id}`),A=le=>{this._previousScrollData.visibleEntryTop=le.target.offsetTop,this._process(v(le))},X=(this._rootElement||document.documentElement).scrollTop,ee=X>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=X;for(const le of u){if(!le.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(le));continue}const we=le.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&we){if(A(le),!X)return}else ee||we||A(le)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const u=j.find(Ll,this._config.target);for(const v of u){if(!v.hash||h(v))continue;const A=j.findOne(decodeURI(v.hash),this._element);d(A)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,A))}}_process(u){this._activeTarget!==u&&(this._clearActiveClass(this._config.target),this._activeTarget=u,u.classList.add(zs),this._activateParents(u),U.trigger(this._element,rv,{relatedTarget:u}))}_activateParents(u){if(u.classList.contains("dropdown-item"))j.findOne(".dropdown-toggle",u.closest(".dropdown")).classList.add(zs);else for(const v of j.parents(u,".nav, .list-group"))for(const A of j.prev(v,av))A.classList.add(zs)}_clearActiveClass(u){u.classList.remove(zs);const v=j.find(`${Ll}.${zs}`,u);for(const A of v)A.classList.remove(zs)}static jQueryInterface(u){return this.each((function(){const v=pi.getOrCreateInstance(this,u);if(typeof u=="string"){if(v[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);v[u]()}}))}}U.on(window,lv,(()=>{for(const w of j.find('[data-bs-spy="scroll"]'))pi.getOrCreateInstance(w)})),y(pi);const ms=".bs.tab",dv=`hide${ms}`,fv=`hidden${ms}`,hv=`show${ms}`,pv=`shown${ms}`,vv=`click${ms}`,mv=`keydown${ms}`,gv=`load${ms}`,bv="ArrowLeft",yc="ArrowRight",yv="ArrowUp",wc="ArrowDown",Il="Home",xc="End",gs="active",Dc="fade",Ol="show",_c=".dropdown-toggle",Rl=`:not(${_c})`,Cc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Pl=`.nav-link${Rl}, .list-group-item${Rl}, [role="tab"]${Rl}, ${Cc}`,wv=`.${gs}[data-bs-toggle="tab"], .${gs}[data-bs-toggle="pill"], .${gs}[data-bs-toggle="list"]`;class bs extends Me{constructor(u){super(u),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,mv,(v=>this._keydown(v))))}static get NAME(){return"tab"}show(){const u=this._element;if(this._elemIsActive(u))return;const v=this._getActiveElem(),A=v?U.trigger(v,dv,{relatedTarget:u}):null;U.trigger(u,hv,{relatedTarget:v}).defaultPrevented||A&&A.defaultPrevented||(this._deactivate(v,u),this._activate(u,v))}_activate(u,v){u&&(u.classList.add(gs),this._activate(j.getElementFromSelector(u)),this._queueCallback((()=>{u.getAttribute("role")==="tab"?(u.removeAttribute("tabindex"),u.setAttribute("aria-selected",!0),this._toggleDropDown(u,!0),U.trigger(u,pv,{relatedTarget:v})):u.classList.add(Ol)}),u,u.classList.contains(Dc)))}_deactivate(u,v){u&&(u.classList.remove(gs),u.blur(),this._deactivate(j.getElementFromSelector(u)),this._queueCallback((()=>{u.getAttribute("role")==="tab"?(u.setAttribute("aria-selected",!1),u.setAttribute("tabindex","-1"),this._toggleDropDown(u,!1),U.trigger(u,fv,{relatedTarget:v})):u.classList.remove(Ol)}),u,u.classList.contains(Dc)))}_keydown(u){if(![bv,yc,yv,wc,Il,xc].includes(u.key))return;u.stopPropagation(),u.preventDefault();const v=this._getChildren().filter((X=>!h(X)));let A;if([Il,xc].includes(u.key))A=v[u.key===Il?0:v.length-1];else{const X=[yc,wc].includes(u.key);A=E(v,u.target,X,!0)}A&&(A.focus({preventScroll:!0}),bs.getOrCreateInstance(A).show())}_getChildren(){return j.find(Pl,this._parent)}_getActiveElem(){return this._getChildren().find((u=>this._elemIsActive(u)))||null}_setInitialAttributes(u,v){this._setAttributeIfNotExists(u,"role","tablist");for(const A of v)this._setInitialAttributesOnChild(A)}_setInitialAttributesOnChild(u){u=this._getInnerElement(u);const v=this._elemIsActive(u),A=this._getOuterElement(u);u.setAttribute("aria-selected",v),A!==u&&this._setAttributeIfNotExists(A,"role","presentation"),v||u.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(u,"role","tab"),this._setInitialAttributesOnTargetPanel(u)}_setInitialAttributesOnTargetPanel(u){const v=j.getElementFromSelector(u);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),u.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${u.id}`))}_toggleDropDown(u,v){const A=this._getOuterElement(u);if(!A.classList.contains("dropdown"))return;const X=(ee,le)=>{const we=j.findOne(ee,A);we&&we.classList.toggle(le,v)};X(_c,gs),X(".dropdown-menu",Ol),A.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(u,v,A){u.hasAttribute(v)||u.setAttribute(v,A)}_elemIsActive(u){return u.classList.contains(gs)}_getInnerElement(u){return u.matches(Pl)?u:j.findOne(Pl,u)}_getOuterElement(u){return u.closest(".nav-item, .list-group-item")||u}static jQueryInterface(u){return this.each((function(){const v=bs.getOrCreateInstance(this);if(typeof u=="string"){if(v[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);v[u]()}}))}}U.on(document,vv,Cc,(function(w){["A","AREA"].includes(this.tagName)&&w.preventDefault(),h(this)||bs.getOrCreateInstance(this).show()})),U.on(window,gv,(()=>{for(const w of j.find(wv))bs.getOrCreateInstance(w)})),y(bs);const No=".bs.toast",xv=`mouseover${No}`,Dv=`mouseout${No}`,_v=`focusin${No}`,Cv=`focusout${No}`,Ev=`hide${No}`,Av=`hidden${No}`,Sv=`show${No}`,Fv=`shown${No}`,Ec="hide",ar="show",ur="showing",kv={animation:"boolean",autohide:"boolean",delay:"number"},Mv={animation:!0,autohide:!0,delay:5e3};class vi extends Me{constructor(u,v){super(u,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Mv}static get DefaultType(){return kv}static get NAME(){return"toast"}show(){U.trigger(this._element,Sv).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Ec),m(this._element),this._element.classList.add(ar,ur),this._queueCallback((()=>{this._element.classList.remove(ur),U.trigger(this._element,Fv),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(U.trigger(this._element,Ev).defaultPrevented||(this._element.classList.add(ur),this._queueCallback((()=>{this._element.classList.add(Ec),this._element.classList.remove(ur,ar),U.trigger(this._element,Av)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ar),super.dispose()}isShown(){return this._element.classList.contains(ar)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(u,v){switch(u.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const A=u.relatedTarget;this._element===A||this._element.contains(A)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,xv,(u=>this._onInteraction(u,!0))),U.on(this._element,Dv,(u=>this._onInteraction(u,!1))),U.on(this._element,_v,(u=>this._onInteraction(u,!0))),U.on(this._element,Cv,(u=>this._onInteraction(u,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(u){return this.each((function(){const v=vi.getOrCreateInstance(this,u);if(typeof u=="string"){if(v[u]===void 0)throw new TypeError(`No method named "${u}"`);v[u](this)}}))}}return K(vi),y(vi),{Alert:O,Button:oe,Carousel:Hn,Collapse:Ft,Dropdown:jn,Modal:ps,Offcanvas:bo,Popover:lr,ScrollSpy:pi,Tab:bs,Toast:vi,Tooltip:vs}}))})(wr)),wr.exports}Kv();/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Va(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const It={},Zs=[],fo=()=>{},ef=()=>!1,Yr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ka=t=>t.startsWith("onUpdate:"),sn=Object.assign,za=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},zv=Object.prototype.hasOwnProperty,_t=(t,e)=>zv.call(t,e),We=Array.isArray,Qs=t=>ji(t)==="[object Map]",Xr=t=>ji(t)==="[object Set]",Nc=t=>ji(t)==="[object Date]",ut=t=>typeof t=="function",Yt=t=>typeof t=="string",Qn=t=>typeof t=="symbol",Nt=t=>t!==null&&typeof t=="object",tf=t=>(Nt(t)||ut(t))&&ut(t.then)&&ut(t.catch),nf=Object.prototype.toString,ji=t=>nf.call(t),Uv=t=>ji(t).slice(8,-1),of=t=>ji(t)==="[object Object]",Ua=t=>Yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ci=Va(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jr=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Hv=/-(\w)/g,ns=Jr(t=>t.replace(Hv,(e,n)=>n?n.toUpperCase():"")),jv=/\B([A-Z])/g,ls=Jr(t=>t.replace(jv,"-$1").toLowerCase()),sf=Jr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Kl=Jr(t=>t?`on${sf(t)}`:""),Qo=(t,e)=>!Object.is(t,e),xr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},rf=(t,e,n,o=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:o,value:n})},aa=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Wv=t=>{const e=Yt(t)?Number(t):NaN;return isNaN(e)?t:e};let Vc;const Gr=()=>Vc||(Vc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function en(t){if(We(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],i=Yt(o)?Jv(o):en(o);if(i)for(const s in i)e[s]=i[s]}return e}else if(Yt(t)||Nt(t))return t}const qv=/;(?![^(]*\))/g,Yv=/:([^]+)/,Xv=/\/\*[^]*?\*\//g;function Jv(t){const e={};return t.replace(Xv,"").split(qv).forEach(n=>{if(n){const o=n.split(Yv);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function vt(t){let e="";if(Yt(t))e=t;else if(We(t))for(let n=0;n<t.length;n++){const o=vt(t[n]);o&&(e+=o+" ")}else if(Nt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Gv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zv=Va(Gv);function lf(t){return!!t||t===""}function Qv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let o=0;n&&o<t.length;o++)n=ni(t[o],e[o]);return n}function ni(t,e){if(t===e)return!0;let n=Nc(t),o=Nc(e);if(n||o)return n&&o?t.getTime()===e.getTime():!1;if(n=Qn(t),o=Qn(e),n||o)return t===e;if(n=We(t),o=We(e),n||o)return n&&o?Qv(t,e):!1;if(n=Nt(t),o=Nt(e),n||o){if(!n||!o)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const r in t){const l=t.hasOwnProperty(r),a=e.hasOwnProperty(r);if(l&&!a||!l&&a||!ni(t[r],e[r]))return!1}}return String(t)===String(e)}function af(t,e){return t.findIndex(n=>ni(n,e))}const uf=t=>!!(t&&t.__v_isRef===!0),Ve=t=>Yt(t)?t:t==null?"":We(t)||Nt(t)&&(t.toString===nf||!ut(t.toString))?uf(t)?Ve(t.value):JSON.stringify(t,cf,2):String(t),cf=(t,e)=>uf(e)?cf(t,e.value):Qs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[o,i],s)=>(n[zl(o,s)+" =>"]=i,n),{})}:Xr(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>zl(n))}:Qn(e)?zl(e):Nt(e)&&!We(e)&&!of(e)?String(e):e,zl=(t,e="")=>{var n;return Qn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class df{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=fn;try{return fn=this,e()}finally{fn=n}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ff(t){return new df(t)}function hf(){return fn}function em(t,e=!1){fn&&fn.cleanups.push(t)}let Bt;const Ul=new WeakSet;class pf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ul.has(this)&&(Ul.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kc(this),gf(this);const e=Bt,n=Jn;Bt=this,Jn=!0;try{return this.fn()}finally{bf(this),Bt=e,Jn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Wa(e);this.deps=this.depsTail=void 0,Kc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ul.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ua(this)&&this.run()}get dirty(){return ua(this)}}let vf=0,Ei,Ai;function mf(t,e=!1){if(t.flags|=8,e){t.next=Ai,Ai=t;return}t.next=Ei,Ei=t}function Ha(){vf++}function ja(){if(--vf>0)return;if(Ai){let e=Ai;for(Ai=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ei;){let e=Ei;for(Ei=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(o){t||(t=o)}e=n}}if(t)throw t}function gf(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function bf(t){let e,n=t.depsTail,o=n;for(;o;){const i=o.prevDep;o.version===-1?(o===n&&(n=i),Wa(o),tm(o)):e=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=i}t.deps=e,t.depsTail=n}function ua(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(yf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function yf(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Pi)||(t.globalVersion=Pi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ua(t))))return;t.flags|=2;const e=t.dep,n=Bt,o=Jn;Bt=t,Jn=!0;try{gf(t);const i=t.fn(t._value);(e.version===0||Qo(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Bt=n,Jn=o,bf(t),t.flags&=-3}}function Wa(t,e=!1){const{dep:n,prevSub:o,nextSub:i}=t;if(o&&(o.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=o,t.nextSub=void 0),n.subs===t&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Wa(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function tm(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Jn=!0;const wf=[];function ko(){wf.push(Jn),Jn=!1}function Mo(){const t=wf.pop();Jn=t===void 0?!0:t}function Kc(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Bt;Bt=void 0;try{e()}finally{Bt=n}}}let Pi=0;class nm{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qa{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Bt||!Jn||Bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Bt)n=this.activeLink=new nm(Bt,this),Bt.deps?(n.prevDep=Bt.depsTail,Bt.depsTail.nextDep=n,Bt.depsTail=n):Bt.deps=Bt.depsTail=n,xf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Bt.depsTail,n.nextDep=void 0,Bt.depsTail.nextDep=n,Bt.depsTail=n,Bt.deps===n&&(Bt.deps=o)}return n}trigger(e){this.version++,Pi++,this.notify(e)}notify(e){Ha();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ja()}}}function xf(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let o=e.deps;o;o=o.nextDep)xf(o)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Mr=new WeakMap,ks=Symbol(""),ca=Symbol(""),Bi=Symbol("");function hn(t,e,n){if(Jn&&Bt){let o=Mr.get(t);o||Mr.set(t,o=new Map);let i=o.get(n);i||(o.set(n,i=new qa),i.map=o,i.key=n),i.track()}}function Do(t,e,n,o,i,s){const r=Mr.get(t);if(!r){Pi++;return}const l=a=>{a&&a.trigger()};if(Ha(),e==="clear")r.forEach(l);else{const a=We(t),d=a&&Ua(n);if(a&&n==="length"){const h=Number(o);r.forEach((c,p)=>{(p==="length"||p===Bi||!Qn(p)&&p>=h)&&l(c)})}else switch((n!==void 0||r.has(void 0))&&l(r.get(n)),d&&l(r.get(Bi)),e){case"add":a?d&&l(r.get("length")):(l(r.get(ks)),Qs(t)&&l(r.get(ca)));break;case"delete":a||(l(r.get(ks)),Qs(t)&&l(r.get(ca)));break;case"set":Qs(t)&&l(r.get(ks));break}}ja()}function om(t,e){const n=Mr.get(t);return n&&n.get(e)}function Hs(t){const e=yt(t);return e===t?e:(hn(e,"iterate",Bi),Un(t)?e:e.map(un))}function Zr(t){return hn(t=yt(t),"iterate",Bi),t}const sm={__proto__:null,[Symbol.iterator](){return Hl(this,Symbol.iterator,un)},concat(...t){return Hs(this).concat(...t.map(e=>We(e)?Hs(e):e))},entries(){return Hl(this,"entries",t=>(t[1]=un(t[1]),t))},every(t,e){return yo(this,"every",t,e,void 0,arguments)},filter(t,e){return yo(this,"filter",t,e,n=>n.map(un),arguments)},find(t,e){return yo(this,"find",t,e,un,arguments)},findIndex(t,e){return yo(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return yo(this,"findLast",t,e,un,arguments)},findLastIndex(t,e){return yo(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return yo(this,"forEach",t,e,void 0,arguments)},includes(...t){return jl(this,"includes",t)},indexOf(...t){return jl(this,"indexOf",t)},join(t){return Hs(this).join(t)},lastIndexOf(...t){return jl(this,"lastIndexOf",t)},map(t,e){return yo(this,"map",t,e,void 0,arguments)},pop(){return mi(this,"pop")},push(...t){return mi(this,"push",t)},reduce(t,...e){return zc(this,"reduce",t,e)},reduceRight(t,...e){return zc(this,"reduceRight",t,e)},shift(){return mi(this,"shift")},some(t,e){return yo(this,"some",t,e,void 0,arguments)},splice(...t){return mi(this,"splice",t)},toReversed(){return Hs(this).toReversed()},toSorted(t){return Hs(this).toSorted(t)},toSpliced(...t){return Hs(this).toSpliced(...t)},unshift(...t){return mi(this,"unshift",t)},values(){return Hl(this,"values",un)}};function Hl(t,e,n){const o=Zr(t),i=o[e]();return o!==t&&!Un(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const im=Array.prototype;function yo(t,e,n,o,i,s){const r=Zr(t),l=r!==t&&!Un(t),a=r[e];if(a!==im[e]){const c=a.apply(t,s);return l?un(c):c}let d=n;r!==t&&(l?d=function(c,p){return n.call(this,un(c),p,t)}:n.length>2&&(d=function(c,p){return n.call(this,c,p,t)}));const h=a.call(r,d,o);return l&&i?i(h):h}function zc(t,e,n,o){const i=Zr(t);let s=n;return i!==t&&(Un(t)?n.length>3&&(s=function(r,l,a){return n.call(this,r,l,a,t)}):s=function(r,l,a){return n.call(this,r,un(l),a,t)}),i[e](s,...o)}function jl(t,e,n){const o=yt(t);hn(o,"iterate",Bi);const i=o[e](...n);return(i===-1||i===!1)&&Ga(n[0])?(n[0]=yt(n[0]),o[e](...n)):i}function mi(t,e,n=[]){ko(),Ha();const o=yt(t)[e].apply(t,n);return ja(),Mo(),o}const rm=Va("__proto__,__v_isRef,__isVue"),Df=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Qn));function lm(t){Qn(t)||(t=String(t));const e=yt(this);return hn(e,"has",t),e.hasOwnProperty(t)}class _f{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,o){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return o===(i?s?gm:Sf:s?Af:Ef).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(o)?e:void 0;const r=We(e);if(!i){let a;if(r&&(a=sm[n]))return a;if(n==="hasOwnProperty")return lm}const l=Reflect.get(e,n,Zt(e)?e:o);return(Qn(n)?Df.has(n):rm(n))||(i||hn(e,"get",n),s)?l:Zt(l)?r&&Ua(n)?l:l.value:Nt(l)?i?Xa(l):Qr(l):l}}class Cf extends _f{constructor(e=!1){super(!1,e)}set(e,n,o,i){let s=e[n];if(!this._isShallow){const a=os(s);if(!Un(o)&&!os(o)&&(s=yt(s),o=yt(o)),!We(e)&&Zt(s)&&!Zt(o))return a||(s.value=o),!0}const r=We(e)&&Ua(n)?Number(n)<e.length:_t(e,n),l=Reflect.set(e,n,o,Zt(e)?e:i);return e===yt(i)&&(r?Qo(o,s)&&Do(e,"set",n,o):Do(e,"add",n,o)),l}deleteProperty(e,n){const o=_t(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&o&&Do(e,"delete",n,void 0),i}has(e,n){const o=Reflect.has(e,n);return(!Qn(n)||!Df.has(n))&&hn(e,"has",n),o}ownKeys(e){return hn(e,"iterate",We(e)?"length":ks),Reflect.ownKeys(e)}}class am extends _f{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const um=new Cf,cm=new am,dm=new Cf(!0);const da=t=>t,hr=t=>Reflect.getPrototypeOf(t);function fm(t,e,n){return function(...o){const i=this.__v_raw,s=yt(i),r=Qs(s),l=t==="entries"||t===Symbol.iterator&&r,a=t==="keys"&&r,d=i[t](...o),h=n?da:e?Tr:un;return!e&&hn(s,"iterate",a?ca:ks),{next(){const{value:c,done:p}=d.next();return p?{value:c,done:p}:{value:l?[h(c[0]),h(c[1])]:h(c),done:p}},[Symbol.iterator](){return this}}}}function pr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function hm(t,e){const n={get(i){const s=this.__v_raw,r=yt(s),l=yt(i);t||(Qo(i,l)&&hn(r,"get",i),hn(r,"get",l));const{has:a}=hr(r),d=e?da:t?Tr:un;if(a.call(r,i))return d(s.get(i));if(a.call(r,l))return d(s.get(l));s!==r&&s.get(i)},get size(){const i=this.__v_raw;return!t&&hn(yt(i),"iterate",ks),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,r=yt(s),l=yt(i);return t||(Qo(i,l)&&hn(r,"has",i),hn(r,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const r=this,l=r.__v_raw,a=yt(l),d=e?da:t?Tr:un;return!t&&hn(a,"iterate",ks),l.forEach((h,c)=>i.call(s,d(h),d(c),r))}};return sn(n,t?{add:pr("add"),set:pr("set"),delete:pr("delete"),clear:pr("clear")}:{add(i){!e&&!Un(i)&&!os(i)&&(i=yt(i));const s=yt(this);return hr(s).has.call(s,i)||(s.add(i),Do(s,"add",i,i)),this},set(i,s){!e&&!Un(s)&&!os(s)&&(s=yt(s));const r=yt(this),{has:l,get:a}=hr(r);let d=l.call(r,i);d||(i=yt(i),d=l.call(r,i));const h=a.call(r,i);return r.set(i,s),d?Qo(s,h)&&Do(r,"set",i,s):Do(r,"add",i,s),this},delete(i){const s=yt(this),{has:r,get:l}=hr(s);let a=r.call(s,i);a||(i=yt(i),a=r.call(s,i)),l&&l.call(s,i);const d=s.delete(i);return a&&Do(s,"delete",i,void 0),d},clear(){const i=yt(this),s=i.size!==0,r=i.clear();return s&&Do(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=fm(i,t,e)}),n}function Ya(t,e){const n=hm(t,e);return(o,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?o:Reflect.get(_t(n,i)&&i in o?n:o,i,s)}const pm={get:Ya(!1,!1)},vm={get:Ya(!1,!0)},mm={get:Ya(!0,!1)};const Ef=new WeakMap,Af=new WeakMap,Sf=new WeakMap,gm=new WeakMap;function bm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ym(t){return t.__v_skip||!Object.isExtensible(t)?0:bm(Uv(t))}function Qr(t){return os(t)?t:Ja(t,!1,um,pm,Ef)}function wm(t){return Ja(t,!1,dm,vm,Af)}function Xa(t){return Ja(t,!0,cm,mm,Sf)}function Ja(t,e,n,o,i){if(!Nt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=ym(t);if(s===0)return t;const r=i.get(t);if(r)return r;const l=new Proxy(t,s===2?o:n);return i.set(t,l),l}function es(t){return os(t)?es(t.__v_raw):!!(t&&t.__v_isReactive)}function os(t){return!!(t&&t.__v_isReadonly)}function Un(t){return!!(t&&t.__v_isShallow)}function Ga(t){return t?!!t.__v_raw:!1}function yt(t){const e=t&&t.__v_raw;return e?yt(e):t}function Za(t){return!_t(t,"__v_skip")&&Object.isExtensible(t)&&rf(t,"__v_skip",!0),t}const un=t=>Nt(t)?Qr(t):t,Tr=t=>Nt(t)?Xa(t):t;function Zt(t){return t?t.__v_isRef===!0:!1}function Y(t){return xm(t,!1)}function xm(t,e){return Zt(t)?t:new Dm(t,e)}class Dm{constructor(e,n){this.dep=new qa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:yt(e),this._value=n?e:un(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,o=this.__v_isShallow||Un(e)||os(e);e=o?e:yt(e),Qo(e,n)&&(this._rawValue=e,this._value=o?e:un(e),this.dep.trigger())}}function Ue(t){return Zt(t)?t.value:t}const _m={get:(t,e,n)=>e==="__v_raw"?t:Ue(Reflect.get(t,e,n)),set:(t,e,n,o)=>{const i=t[e];return Zt(i)&&!Zt(n)?(i.value=n,!0):Reflect.set(t,e,n,o)}};function Ff(t){return es(t)?t:new Proxy(t,_m)}function Cm(t){const e=We(t)?new Array(t.length):{};for(const n in t)e[n]=Am(t,n);return e}class Em{constructor(e,n,o){this._object=e,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return om(yt(this._object),this._key)}}function Am(t,e,n){const o=t[e];return Zt(o)?o:new Em(t,e,n)}class Sm{constructor(e,n,o){this.fn=e,this.setter=n,this._value=void 0,this.dep=new qa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Bt!==this)return mf(this,!0),!0}get value(){const e=this.dep.track();return yf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Fm(t,e,n=!1){let o,i;return ut(t)?o=t:(o=t.get,i=t.set),new Sm(o,i,n)}const vr={},$r=new WeakMap;let As;function km(t,e=!1,n=As){if(n){let o=$r.get(n);o||$r.set(n,o=[]),o.push(t)}}function Mm(t,e,n=It){const{immediate:o,deep:i,once:s,scheduler:r,augmentJob:l,call:a}=n,d=E=>i?E:Un(E)||i===!1||i===0?_o(E,1):_o(E);let h,c,p,m,g=!1,D=!1;if(Zt(t)?(c=()=>t.value,g=Un(t)):es(t)?(c=()=>d(t),g=!0):We(t)?(D=!0,g=t.some(E=>es(E)||Un(E)),c=()=>t.map(E=>{if(Zt(E))return E.value;if(es(E))return d(E);if(ut(E))return a?a(E,2):E()})):ut(t)?e?c=a?()=>a(t,2):t:c=()=>{if(p){ko();try{p()}finally{Mo()}}const E=As;As=h;try{return a?a(t,3,[m]):t(m)}finally{As=E}}:c=fo,e&&i){const E=c,R=i===!0?1/0:i;c=()=>_o(E(),R)}const T=hf(),y=()=>{h.stop(),T&&T.active&&za(T.effects,h)};if(s&&e){const E=e;e=(...R)=>{E(...R),y()}}let C=D?new Array(t.length).fill(vr):vr;const M=E=>{if(!(!(h.flags&1)||!h.dirty&&!E))if(e){const R=h.run();if(i||g||(D?R.some((L,B)=>Qo(L,C[B])):Qo(R,C))){p&&p();const L=As;As=h;try{const B=[R,C===vr?void 0:D&&C[0]===vr?[]:C,m];C=R,a?a(e,3,B):e(...B)}finally{As=L}}}else h.run()};return l&&l(M),h=new pf(c),h.scheduler=r?()=>r(M,!1):M,m=E=>km(E,!1,h),p=h.onStop=()=>{const E=$r.get(h);if(E){if(a)a(E,4);else for(const R of E)R();$r.delete(h)}},e?o?M(!0):C=h.run():r?r(M.bind(null,!0),!0):h.run(),y.pause=h.pause.bind(h),y.resume=h.resume.bind(h),y.stop=y,y}function _o(t,e=1/0,n){if(e<=0||!Nt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Zt(t))_o(t.value,e,n);else if(We(t))for(let o=0;o<t.length;o++)_o(t[o],e,n);else if(Xr(t)||Qs(t))t.forEach(o=>{_o(o,e,n)});else if(of(t)){for(const o in t)_o(t[o],e,n);for(const o of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,o)&&_o(t[o],e,n)}return t}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wi(t,e,n,o){try{return o?t(...o):t()}catch(i){el(i,e,n)}}function eo(t,e,n,o){if(ut(t)){const i=Wi(t,e,n,o);return i&&tf(i)&&i.catch(s=>{el(s,e,n)}),i}if(We(t)){const i=[];for(let s=0;s<t.length;s++)i.push(eo(t[s],e,n,o));return i}}function el(t,e,n,o=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||It;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](t,a,d)===!1)return}l=l.parent}if(s){ko(),Wi(s,null,10,[t,a,d]),Mo();return}}Tm(t,n,i,o,r)}function Tm(t,e,n,o=!0,i=!1){if(i)throw t;console.error(t)}const Dn=[];let ao=-1;const ei=[];let Ho=null,Xs=0;const kf=Promise.resolve();let Lr=null;function je(t){const e=Lr||kf;return t?e.then(this?t.bind(this):t):e}function $m(t){let e=ao+1,n=Dn.length;for(;e<n;){const o=e+n>>>1,i=Dn[o],s=Ni(i);s<t||s===t&&i.flags&2?e=o+1:n=o}return e}function Qa(t){if(!(t.flags&1)){const e=Ni(t),n=Dn[Dn.length-1];!n||!(t.flags&2)&&e>=Ni(n)?Dn.push(t):Dn.splice($m(e),0,t),t.flags|=1,Mf()}}function Mf(){Lr||(Lr=kf.then($f))}function Lm(t){We(t)?ei.push(...t):Ho&&t.id===-1?Ho.splice(Xs+1,0,t):t.flags&1||(ei.push(t),t.flags|=1),Mf()}function Uc(t,e,n=ao+1){for(;n<Dn.length;n++){const o=Dn[n];if(o&&o.flags&2){if(t&&o.id!==t.uid)continue;Dn.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Tf(t){if(ei.length){const e=[...new Set(ei)].sort((n,o)=>Ni(n)-Ni(o));if(ei.length=0,Ho){Ho.push(...e);return}for(Ho=e,Xs=0;Xs<Ho.length;Xs++){const n=Ho[Xs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ho=null,Xs=0}}const Ni=t=>t.id==null?t.flags&2?-1:1/0:t.id;function $f(t){try{for(ao=0;ao<Dn.length;ao++){const e=Dn[ao];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Wi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ao<Dn.length;ao++){const e=Dn[ao];e&&(e.flags&=-2)}ao=-1,Dn.length=0,Tf(),Lr=null,(Dn.length||ei.length)&&$f()}}let pn=null,Lf=null;function Ir(t){const e=pn;return pn=t,Lf=t&&t.type.__scopeId||null,e}function Yn(t,e=pn,n){if(!e||t._n)return t;const o=(...i)=>{o._d&&td(-1);const s=Ir(e);let r;try{r=t(...i)}finally{Ir(s),o._d&&td(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function Ge(t,e){if(pn===null)return t;const n=sl(pn),o=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,r,l,a=It]=e[i];s&&(ut(s)&&(s={mounted:s,updated:s}),s.deep&&_o(r),o.push({dir:s,instance:n,value:r,oldValue:void 0,arg:l,modifiers:a}))}return t}function ws(t,e,n,o){const i=t.dirs,s=e&&e.dirs;for(let r=0;r<i.length;r++){const l=i[r];s&&(l.oldValue=s[r].value);let a=l.dir[o];a&&(ko(),eo(a,n,8,[t.el,l,t,e]),Mo())}}const If=Symbol("_vte"),Im=t=>t.__isTeleport,Si=t=>t&&(t.disabled||t.disabled===""),Hc=t=>t&&(t.defer||t.defer===""),jc=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Wc=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,fa=(t,e)=>{const n=t&&t.to;return Yt(n)?e?e(n):null:n},Of={name:"Teleport",__isTeleport:!0,process(t,e,n,o,i,s,r,l,a,d){const{mc:h,pc:c,pbc:p,o:{insert:m,querySelector:g,createText:D,createComment:T}}=d,y=Si(e.props);let{shapeFlag:C,children:M,dynamicChildren:E}=e;if(t==null){const R=e.el=D(""),L=e.anchor=D("");m(R,n,o),m(L,n,o);const B=(I,N)=>{C&16&&(i&&i.isCE&&(i.ce._teleportTarget=I),h(M,I,N,i,s,r,l,a))},x=()=>{const I=e.target=fa(e.props,g),N=Rf(I,e,D,m);I&&(r!=="svg"&&jc(I)?r="svg":r!=="mathml"&&Wc(I)&&(r="mathml"),y||(B(I,N),Dr(e,!1)))};y&&(B(n,L),Dr(e,!0)),Hc(e.props)?(e.el.__isMounted=!1,xn(()=>{x(),delete e.el.__isMounted},s)):x()}else{if(Hc(e.props)&&t.el.__isMounted===!1){xn(()=>{Of.process(t,e,n,o,i,s,r,l,a,d)},s);return}e.el=t.el,e.targetStart=t.targetStart;const R=e.anchor=t.anchor,L=e.target=t.target,B=e.targetAnchor=t.targetAnchor,x=Si(t.props),I=x?n:L,N=x?R:B;if(r==="svg"||jc(L)?r="svg":(r==="mathml"||Wc(L))&&(r="mathml"),E?(p(t.dynamicChildren,E,I,i,s,r,l),nu(t,e,!0)):a||c(t,e,I,N,i,s,r,l,!1),y)x?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):mr(e,n,R,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const z=e.target=fa(e.props,g);z&&mr(e,z,null,d,0)}else x&&mr(e,L,B,d,1);Dr(e,y)}},remove(t,e,n,{um:o,o:{remove:i}},s){const{shapeFlag:r,children:l,anchor:a,targetStart:d,targetAnchor:h,target:c,props:p}=t;if(c&&(i(d),i(h)),s&&i(a),r&16){const m=s||!Si(p);for(let g=0;g<l.length;g++){const D=l[g];o(D,e,n,m,!!D.dynamicChildren)}}},move:mr,hydrate:Om};function mr(t,e,n,{o:{insert:o},m:i},s=2){s===0&&o(t.targetAnchor,e,n);const{el:r,anchor:l,shapeFlag:a,children:d,props:h}=t,c=s===2;if(c&&o(r,e,n),(!c||Si(h))&&a&16)for(let p=0;p<d.length;p++)i(d[p],e,n,2);c&&o(l,e,n)}function Om(t,e,n,o,i,s,{o:{nextSibling:r,parentNode:l,querySelector:a,insert:d,createText:h}},c){const p=e.target=fa(e.props,a);if(p){const m=Si(e.props),g=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=c(r(t),e,l(t),n,o,i,s),e.targetStart=g,e.targetAnchor=g&&r(g);else{e.anchor=r(t);let D=g;for(;D;){if(D&&D.nodeType===8){if(D.data==="teleport start anchor")e.targetStart=D;else if(D.data==="teleport anchor"){e.targetAnchor=D,p._lpa=e.targetAnchor&&r(e.targetAnchor);break}}D=r(D)}e.targetAnchor||Rf(p,e,h,d),c(g&&r(g),e,p,n,o,i,s)}Dr(e,m)}return e.anchor&&r(e.anchor)}const Rm=Of;function Dr(t,e){const n=t.ctx;if(n&&n.ut){let o,i;for(e?(o=t.el,i=t.anchor):(o=t.targetStart,i=t.targetAnchor);o&&o!==i;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Rf(t,e,n,o){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[If]=s,t&&(o(i,t),o(s,t)),s}const Ss=Symbol("_leaveCb"),gr=Symbol("_enterCb");function Pm(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qt(()=>{t.isMounted=!0}),zf(()=>{t.isUnmounting=!0}),t}const Vn=[Function,Array],Bm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vn,onEnter:Vn,onAfterEnter:Vn,onEnterCancelled:Vn,onBeforeLeave:Vn,onLeave:Vn,onAfterLeave:Vn,onLeaveCancelled:Vn,onBeforeAppear:Vn,onAppear:Vn,onAfterAppear:Vn,onAppearCancelled:Vn};function Nm(t,e){const{leavingVNodes:n}=t;let o=n.get(e.type);return o||(o=Object.create(null),n.set(e.type,o)),o}function ha(t,e,n,o,i){const{appear:s,mode:r,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:h,onEnterCancelled:c,onBeforeLeave:p,onLeave:m,onAfterLeave:g,onLeaveCancelled:D,onBeforeAppear:T,onAppear:y,onAfterAppear:C,onAppearCancelled:M}=e,E=String(t.key),R=Nm(n,t),L=(I,N)=>{I&&eo(I,o,9,N)},B=(I,N)=>{const z=N[1];L(I,N),We(I)?I.every(F=>F.length<=1)&&z():I.length<=1&&z()},x={mode:r,persisted:l,beforeEnter(I){let N=a;if(!n.isMounted)if(s)N=T||a;else return;I[Ss]&&I[Ss](!0);const z=R[E];z&&Js(t,z)&&z.el[Ss]&&z.el[Ss](),L(N,[I])},enter(I){let N=d,z=h,F=c;if(!n.isMounted)if(s)N=y||d,z=C||h,F=M||c;else return;let te=!1;const H=I[gr]=Q=>{te||(te=!0,Q?L(F,[I]):L(z,[I]),x.delayedLeave&&x.delayedLeave(),I[gr]=void 0)};N?B(N,[I,H]):H()},leave(I,N){const z=String(t.key);if(I[gr]&&I[gr](!0),n.isUnmounting)return N();L(p,[I]);let F=!1;const te=I[Ss]=H=>{F||(F=!0,N(),H?L(D,[I]):L(g,[I]),I[Ss]=void 0,R[z]===t&&delete R[z])};R[z]=t,m?B(m,[I,te]):te()},clone(I){return ha(I,e,n,o)}};return x}function Vi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Vi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Pf(t,e=!1,n){let o=[],i=0;for(let s=0;s<t.length;s++){let r=t[s];const l=n==null?r.key:String(n)+String(r.key!=null?r.key:s);r.type===xt?(r.patchFlag&128&&i++,o=o.concat(Pf(r.children,e,l))):(e||r.type!==ho)&&o.push(l!=null?Ts(r,{key:l}):r)}if(i>1)for(let s=0;s<o.length;s++)o[s].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function At(t,e){return ut(t)?sn({name:t.name},e,{setup:t}):t}function Bf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Fi(t,e,n,o,i=!1){if(We(t)){t.forEach((g,D)=>Fi(g,e&&(We(e)?e[D]:e),n,o,i));return}if(ti(o)&&!i){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Fi(t,e,n,o.component.subTree);return}const s=o.shapeFlag&4?sl(o.component):o.el,r=i?null:s,{i:l,r:a}=t,d=e&&e.r,h=l.refs===It?l.refs={}:l.refs,c=l.setupState,p=yt(c),m=c===It?ef:g=>_t(p,g);if(d!=null&&d!==a){if(Yt(d))h[d]=null,m(d)&&(c[d]=null);else if(Zt(d)){d.value=null;const g=e;g.k&&(h[g.k]=null)}}if(ut(a))Wi(a,l,12,[r,h]);else{const g=Yt(a),D=Zt(a);if(g||D){const T=()=>{if(t.f){const y=g?m(a)?c[a]:h[a]:a.value;if(i)We(y)&&za(y,s);else if(We(y))y.includes(s)||y.push(s);else if(g)h[a]=[s],m(a)&&(c[a]=h[a]);else{const C=[s];a.value=C,t.k&&(h[t.k]=C)}}else g?(h[a]=r,m(a)&&(c[a]=r)):D&&(a.value=r,t.k&&(h[t.k]=r))};r?(T.id=-1,xn(T,n)):T()}}}Gr().requestIdleCallback;Gr().cancelIdleCallback;const ti=t=>!!t.type.__asyncLoader,Nf=t=>t.type.__isKeepAlive;function Vm(t,e){Vf(t,"a",e)}function Km(t,e){Vf(t,"da",e)}function Vf(t,e,n=_n){const o=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(tl(e,o,n),n){let i=n.parent;for(;i&&i.parent;)Nf(i.parent.vnode)&&zm(o,e,n,i),i=i.parent}}function zm(t,e,n,o){const i=tl(e,t,o,!0);an(()=>{za(o[e],i)},n)}function tl(t,e,n=_n,o=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...r)=>{ko();const l=qi(n),a=eo(e,n,t,r);return l(),Mo(),a});return o?i.unshift(s):i.push(s),s}}const To=t=>(e,n=_n)=>{(!zi||t==="sp")&&tl(t,(...o)=>e(...o),n)},Um=To("bm"),Qt=To("m"),Hm=To("bu"),Kf=To("u"),zf=To("bum"),an=To("um"),jm=To("sp"),Wm=To("rtg"),qm=To("rtc");function Ym(t,e=_n){tl("ec",t,e)}const Xm=Symbol.for("v-ndc");function En(t,e,n,o){let i;const s=n,r=We(t);if(r||Yt(t)){const l=r&&es(t);let a=!1,d=!1;l&&(a=!Un(t),d=os(t),t=Zr(t)),i=new Array(t.length);for(let h=0,c=t.length;h<c;h++)i[h]=e(a?d?Tr(un(t[h])):un(t[h]):t[h],h,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,s)}else if(Nt(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,s));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const h=l[a];i[a]=e(t[h],h,a,s)}}else i=[];return i}function Jm(t,e,n={},o,i){if(pn.ce||pn.parent&&ti(pn.parent)&&pn.parent.ce)return n.name=e,ae(),zn(xt,null,[Ee("slot",n,o)],64);let s=t[e];s&&s._c&&(s._d=!1),ae();const r=s&&Uf(s(n)),l=n.key||r&&r.key,a=zn(xt,{key:(l&&!Qn(l)?l:`_${e}`)+(!r&&o?"_fb":"")},r||[],r&&t._===1?64:-2);return s&&s._c&&(s._d=!0),a}function Uf(t){return t.some(e=>ou(e)?!(e.type===ho||e.type===xt&&!Uf(e.children)):!0)?t:null}const pa=t=>t?ah(t)?sl(t):pa(t.parent):null,ki=sn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pa(t.parent),$root:t=>pa(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>jf(t),$forceUpdate:t=>t.f||(t.f=()=>{Qa(t.update)}),$nextTick:t=>t.n||(t.n=je.bind(t.proxy)),$watch:t=>yg.bind(t)}),Wl=(t,e)=>t!==It&&!t.__isScriptSetup&&_t(t,e),Gm={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:o,data:i,props:s,accessCache:r,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const m=r[e];if(m!==void 0)switch(m){case 1:return o[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Wl(o,e))return r[e]=1,o[e];if(i!==It&&_t(i,e))return r[e]=2,i[e];if((d=t.propsOptions[0])&&_t(d,e))return r[e]=3,s[e];if(n!==It&&_t(n,e))return r[e]=4,n[e];va&&(r[e]=0)}}const h=ki[e];let c,p;if(h)return e==="$attrs"&&hn(t.attrs,"get",""),h(t);if((c=l.__cssModules)&&(c=c[e]))return c;if(n!==It&&_t(n,e))return r[e]=4,n[e];if(p=a.config.globalProperties,_t(p,e))return p[e]},set({_:t},e,n){const{data:o,setupState:i,ctx:s}=t;return Wl(i,e)?(i[e]=n,!0):o!==It&&_t(o,e)?(o[e]=n,!0):_t(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:o,appContext:i,propsOptions:s,type:r}},l){let a,d;return!!(n[l]||t!==It&&l[0]!=="$"&&_t(t,l)||Wl(e,l)||(a=s[0])&&_t(a,l)||_t(o,l)||_t(ki,l)||_t(i.config.globalProperties,l)||(d=r.__cssModules)&&d[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:_t(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qc(t){return We(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let va=!0;function Zm(t){const e=jf(t),n=t.proxy,o=t.ctx;va=!1,e.beforeCreate&&Yc(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:r,watch:l,provide:a,inject:d,created:h,beforeMount:c,mounted:p,beforeUpdate:m,updated:g,activated:D,deactivated:T,beforeDestroy:y,beforeUnmount:C,destroyed:M,unmounted:E,render:R,renderTracked:L,renderTriggered:B,errorCaptured:x,serverPrefetch:I,expose:N,inheritAttrs:z,components:F,directives:te,filters:H}=e;if(d&&Qm(d,o,null),r)for(const J in r){const G=r[J];ut(G)&&(o[J]=G.bind(n))}if(i){const J=i.call(n,n);Nt(J)&&(t.data=Qr(J))}if(va=!0,s)for(const J in s){const G=s[J],ye=ut(G)?G.bind(n,n):ut(G.get)?G.get.bind(n,n):fo,U=!ut(G)&&ut(G.set)?G.set.bind(n):fo,Fe=Oe({get:ye,set:U});Object.defineProperty(o,J,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:nt=>Fe.value=nt})}if(l)for(const J in l)Hf(l[J],o,n,J);if(a){const J=ut(a)?a.call(n):a;Reflect.ownKeys(J).forEach(G=>{ig(G,J[G])})}h&&Yc(h,t,"c");function W(J,G){We(G)?G.forEach(ye=>J(ye.bind(n))):G&&J(G.bind(n))}if(W(Um,c),W(Qt,p),W(Hm,m),W(Kf,g),W(Vm,D),W(Km,T),W(Ym,x),W(qm,L),W(Wm,B),W(zf,C),W(an,E),W(jm,I),We(N))if(N.length){const J=t.exposed||(t.exposed={});N.forEach(G=>{Object.defineProperty(J,G,{get:()=>n[G],set:ye=>n[G]=ye,enumerable:!0})})}else t.exposed||(t.exposed={});R&&t.render===fo&&(t.render=R),z!=null&&(t.inheritAttrs=z),F&&(t.components=F),te&&(t.directives=te),I&&Bf(t)}function Qm(t,e,n=fo){We(t)&&(t=ma(t));for(const o in t){const i=t[o];let s;Nt(i)?"default"in i?s=Mi(i.from||o,i.default,!0):s=Mi(i.from||o):s=Mi(i),Zt(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):e[o]=s}}function Yc(t,e,n){eo(We(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,n)}function Hf(t,e,n,o){let i=o.includes(".")?oh(n,o):()=>n[o];if(Yt(t)){const s=e[t];ut(s)&&at(i,s)}else if(ut(t))at(i,t.bind(n));else if(Nt(t))if(We(t))t.forEach(s=>Hf(s,e,n,o));else{const s=ut(t.handler)?t.handler.bind(n):e[t.handler];ut(s)&&at(i,s,t)}}function jf(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:r}}=t.appContext,l=s.get(e);let a;return l?a=l:!i.length&&!n&&!o?a=e:(a={},i.length&&i.forEach(d=>Or(a,d,r,!0)),Or(a,e,r)),Nt(e)&&s.set(e,a),a}function Or(t,e,n,o=!1){const{mixins:i,extends:s}=e;s&&Or(t,s,n,!0),i&&i.forEach(r=>Or(t,r,n,!0));for(const r in e)if(!(o&&r==="expose")){const l=eg[r]||n&&n[r];t[r]=l?l(t[r],e[r]):e[r]}return t}const eg={data:Xc,props:Jc,emits:Jc,methods:Di,computed:Di,beforeCreate:yn,created:yn,beforeMount:yn,mounted:yn,beforeUpdate:yn,updated:yn,beforeDestroy:yn,beforeUnmount:yn,destroyed:yn,unmounted:yn,activated:yn,deactivated:yn,errorCaptured:yn,serverPrefetch:yn,components:Di,directives:Di,watch:ng,provide:Xc,inject:tg};function Xc(t,e){return e?t?function(){return sn(ut(t)?t.call(this,this):t,ut(e)?e.call(this,this):e)}:e:t}function tg(t,e){return Di(ma(t),ma(e))}function ma(t){if(We(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function yn(t,e){return t?[...new Set([].concat(t,e))]:e}function Di(t,e){return t?sn(Object.create(null),t,e):e}function Jc(t,e){return t?We(t)&&We(e)?[...new Set([...t,...e])]:sn(Object.create(null),qc(t),qc(e??{})):e}function ng(t,e){if(!t)return e;if(!e)return t;const n=sn(Object.create(null),t);for(const o in e)n[o]=yn(t[o],e[o]);return n}function Wf(){return{app:null,config:{isNativeTag:ef,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let og=0;function sg(t,e){return function(o,i=null){ut(o)||(o=sn({},o)),i!=null&&!Nt(i)&&(i=null);const s=Wf(),r=new WeakSet,l=[];let a=!1;const d=s.app={_uid:og++,_component:o,_props:i,_container:null,_context:s,_instance:null,version:Ng,get config(){return s.config},set config(h){},use(h,...c){return r.has(h)||(h&&ut(h.install)?(r.add(h),h.install(d,...c)):ut(h)&&(r.add(h),h(d,...c))),d},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),d},component(h,c){return c?(s.components[h]=c,d):s.components[h]},directive(h,c){return c?(s.directives[h]=c,d):s.directives[h]},mount(h,c,p){if(!a){const m=d._ceVNode||Ee(o,i);return m.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),t(m,h,p),a=!0,d._container=h,h.__vue_app__=d,sl(m.component)}},onUnmount(h){l.push(h)},unmount(){a&&(eo(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(h,c){return s.provides[h]=c,d},runWithContext(h){const c=Ms;Ms=d;try{return h()}finally{Ms=c}}};return d}}let Ms=null;function ig(t,e){if(_n){let n=_n.provides;const o=_n.parent&&_n.parent.provides;o===n&&(n=_n.provides=Object.create(o)),n[t]=e}}function Mi(t,e,n=!1){const o=iu();if(o||Ms){let i=Ms?Ms._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&ut(e)?e.call(o&&o.proxy):e}}function rg(){return!!(iu()||Ms)}const qf={},Yf=()=>Object.create(qf),Xf=t=>Object.getPrototypeOf(t)===qf;function lg(t,e,n,o=!1){const i={},s=Yf();t.propsDefaults=Object.create(null),Jf(t,e,i,s);for(const r in t.propsOptions[0])r in i||(i[r]=void 0);n?t.props=o?i:wm(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function ag(t,e,n,o){const{props:i,attrs:s,vnode:{patchFlag:r}}=t,l=yt(i),[a]=t.propsOptions;let d=!1;if((o||r>0)&&!(r&16)){if(r&8){const h=t.vnode.dynamicProps;for(let c=0;c<h.length;c++){let p=h[c];if(nl(t.emitsOptions,p))continue;const m=e[p];if(a)if(_t(s,p))m!==s[p]&&(s[p]=m,d=!0);else{const g=ns(p);i[g]=ga(a,l,g,m,t,!1)}else m!==s[p]&&(s[p]=m,d=!0)}}}else{Jf(t,e,i,s)&&(d=!0);let h;for(const c in l)(!e||!_t(e,c)&&((h=ls(c))===c||!_t(e,h)))&&(a?n&&(n[c]!==void 0||n[h]!==void 0)&&(i[c]=ga(a,l,c,void 0,t,!0)):delete i[c]);if(s!==l)for(const c in s)(!e||!_t(e,c))&&(delete s[c],d=!0)}d&&Do(t.attrs,"set","")}function Jf(t,e,n,o){const[i,s]=t.propsOptions;let r=!1,l;if(e)for(let a in e){if(Ci(a))continue;const d=e[a];let h;i&&_t(i,h=ns(a))?!s||!s.includes(h)?n[h]=d:(l||(l={}))[h]=d:nl(t.emitsOptions,a)||(!(a in o)||d!==o[a])&&(o[a]=d,r=!0)}if(s){const a=yt(n),d=l||It;for(let h=0;h<s.length;h++){const c=s[h];n[c]=ga(i,a,c,d[c],t,!_t(d,c))}}return r}function ga(t,e,n,o,i,s){const r=t[n];if(r!=null){const l=_t(r,"default");if(l&&o===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&ut(a)){const{propsDefaults:d}=i;if(n in d)o=d[n];else{const h=qi(i);o=d[n]=a.call(null,e),h()}}else o=a;i.ce&&i.ce._setProp(n,o)}r[0]&&(s&&!l?o=!1:r[1]&&(o===""||o===ls(n))&&(o=!0))}return o}const ug=new WeakMap;function Gf(t,e,n=!1){const o=n?ug:e.propsCache,i=o.get(t);if(i)return i;const s=t.props,r={},l=[];let a=!1;if(!ut(t)){const h=c=>{a=!0;const[p,m]=Gf(c,e,!0);sn(r,p),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!a)return Nt(t)&&o.set(t,Zs),Zs;if(We(s))for(let h=0;h<s.length;h++){const c=ns(s[h]);Gc(c)&&(r[c]=It)}else if(s)for(const h in s){const c=ns(h);if(Gc(c)){const p=s[h],m=r[c]=We(p)||ut(p)?{type:p}:sn({},p),g=m.type;let D=!1,T=!0;if(We(g))for(let y=0;y<g.length;++y){const C=g[y],M=ut(C)&&C.name;if(M==="Boolean"){D=!0;break}else M==="String"&&(T=!1)}else D=ut(g)&&g.name==="Boolean";m[0]=D,m[1]=T,(D||_t(m,"default"))&&l.push(c)}}const d=[r,l];return Nt(t)&&o.set(t,d),d}function Gc(t){return t[0]!=="$"&&!Ci(t)}const eu=t=>t==="_"||t==="_ctx"||t==="$stable",tu=t=>We(t)?t.map(uo):[uo(t)],cg=(t,e,n)=>{if(e._n)return e;const o=Yn((...i)=>tu(e(...i)),n);return o._c=!1,o},Zf=(t,e,n)=>{const o=t._ctx;for(const i in t){if(eu(i))continue;const s=t[i];if(ut(s))e[i]=cg(i,s,o);else if(s!=null){const r=tu(s);e[i]=()=>r}}},Qf=(t,e)=>{const n=tu(e);t.slots.default=()=>n},eh=(t,e,n)=>{for(const o in e)(n||!eu(o))&&(t[o]=e[o])},dg=(t,e,n)=>{const o=t.slots=Yf();if(t.vnode.shapeFlag&32){const i=e._;i?(eh(o,e,n),n&&rf(o,"_",i,!0)):Zf(e,o)}else e&&Qf(t,e)},fg=(t,e,n)=>{const{vnode:o,slots:i}=t;let s=!0,r=It;if(o.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:eh(i,e,n):(s=!e.$stable,Zf(e,i)),r=e}else e&&(Qf(t,e),r={default:1});if(s)for(const l in i)!eu(l)&&r[l]==null&&delete i[l]},xn=Ag;function hg(t){return pg(t)}function pg(t,e){const n=Gr();n.__VUE__=!0;const{insert:o,remove:i,patchProp:s,createElement:r,createText:l,createComment:a,setText:d,setElementText:h,parentNode:c,nextSibling:p,setScopeId:m=fo,insertStaticContent:g}=t,D=(k,O,P,oe=null,ne=null,re=null,ue=void 0,ve=null,ce=!!O.dynamicChildren)=>{if(k===O)return;k&&!Js(k,O)&&(oe=me(k),nt(k,ne,re,!0),k=null),O.patchFlag===-2&&(ce=!1,O.dynamicChildren=null);const{type:fe,ref:Te,shapeFlag:Se}=O;switch(fe){case ol:T(k,O,P,oe);break;case ho:y(k,O,P,oe);break;case _r:k==null&&C(O,P,oe,ue);break;case xt:F(k,O,P,oe,ne,re,ue,ve,ce);break;default:Se&1?R(k,O,P,oe,ne,re,ue,ve,ce):Se&6?te(k,O,P,oe,ne,re,ue,ve,ce):(Se&64||Se&128)&&fe.process(k,O,P,oe,ne,re,ue,ve,ce,ie)}Te!=null&&ne?Fi(Te,k&&k.ref,re,O||k,!O):Te==null&&k&&k.ref!=null&&Fi(k.ref,null,re,k,!0)},T=(k,O,P,oe)=>{if(k==null)o(O.el=l(O.children),P,oe);else{const ne=O.el=k.el;O.children!==k.children&&d(ne,O.children)}},y=(k,O,P,oe)=>{k==null?o(O.el=a(O.children||""),P,oe):O.el=k.el},C=(k,O,P,oe)=>{[k.el,k.anchor]=g(k.children,O,P,oe,k.el,k.anchor)},M=({el:k,anchor:O},P,oe)=>{let ne;for(;k&&k!==O;)ne=p(k),o(k,P,oe),k=ne;o(O,P,oe)},E=({el:k,anchor:O})=>{let P;for(;k&&k!==O;)P=p(k),i(k),k=P;i(O)},R=(k,O,P,oe,ne,re,ue,ve,ce)=>{O.type==="svg"?ue="svg":O.type==="math"&&(ue="mathml"),k==null?L(O,P,oe,ne,re,ue,ve,ce):I(k,O,ne,re,ue,ve,ce)},L=(k,O,P,oe,ne,re,ue,ve)=>{let ce,fe;const{props:Te,shapeFlag:Se,transition:Pe,dirs:Ne}=k;if(ce=k.el=r(k.type,re,Te&&Te.is,Te),Se&8?h(ce,k.children):Se&16&&x(k.children,ce,null,oe,ne,ql(k,re),ue,ve),Ne&&ws(k,null,oe,"created"),B(ce,k,k.scopeId,ue,oe),Te){for(const et in Te)et!=="value"&&!Ci(et)&&s(ce,et,null,Te[et],re,oe);"value"in Te&&s(ce,"value",null,Te.value,re),(fe=Te.onVnodeBeforeMount)&&io(fe,oe,k)}Ne&&ws(k,null,oe,"beforeMount");const ot=vg(ne,Pe);ot&&Pe.beforeEnter(ce),o(ce,O,P),((fe=Te&&Te.onVnodeMounted)||ot||Ne)&&xn(()=>{fe&&io(fe,oe,k),ot&&Pe.enter(ce),Ne&&ws(k,null,oe,"mounted")},ne)},B=(k,O,P,oe,ne)=>{if(P&&m(k,P),oe)for(let re=0;re<oe.length;re++)m(k,oe[re]);if(ne){let re=ne.subTree;if(O===re||ih(re.type)&&(re.ssContent===O||re.ssFallback===O)){const ue=ne.vnode;B(k,ue,ue.scopeId,ue.slotScopeIds,ne.parent)}}},x=(k,O,P,oe,ne,re,ue,ve,ce=0)=>{for(let fe=ce;fe<k.length;fe++){const Te=k[fe]=ve?jo(k[fe]):uo(k[fe]);D(null,Te,O,P,oe,ne,re,ue,ve)}},I=(k,O,P,oe,ne,re,ue)=>{const ve=O.el=k.el;let{patchFlag:ce,dynamicChildren:fe,dirs:Te}=O;ce|=k.patchFlag&16;const Se=k.props||It,Pe=O.props||It;let Ne;if(P&&xs(P,!1),(Ne=Pe.onVnodeBeforeUpdate)&&io(Ne,P,O,k),Te&&ws(O,k,P,"beforeUpdate"),P&&xs(P,!0),(Se.innerHTML&&Pe.innerHTML==null||Se.textContent&&Pe.textContent==null)&&h(ve,""),fe?N(k.dynamicChildren,fe,ve,P,oe,ql(O,ne),re):ue||G(k,O,ve,null,P,oe,ql(O,ne),re,!1),ce>0){if(ce&16)z(ve,Se,Pe,P,ne);else if(ce&2&&Se.class!==Pe.class&&s(ve,"class",null,Pe.class,ne),ce&4&&s(ve,"style",Se.style,Pe.style,ne),ce&8){const ot=O.dynamicProps;for(let et=0;et<ot.length;et++){const Je=ot[et],Rt=Se[Je],Tt=Pe[Je];(Tt!==Rt||Je==="value")&&s(ve,Je,Rt,Tt,ne,P)}}ce&1&&k.children!==O.children&&h(ve,O.children)}else!ue&&fe==null&&z(ve,Se,Pe,P,ne);((Ne=Pe.onVnodeUpdated)||Te)&&xn(()=>{Ne&&io(Ne,P,O,k),Te&&ws(O,k,P,"updated")},oe)},N=(k,O,P,oe,ne,re,ue)=>{for(let ve=0;ve<O.length;ve++){const ce=k[ve],fe=O[ve],Te=ce.el&&(ce.type===xt||!Js(ce,fe)||ce.shapeFlag&198)?c(ce.el):P;D(ce,fe,Te,null,oe,ne,re,ue,!0)}},z=(k,O,P,oe,ne)=>{if(O!==P){if(O!==It)for(const re in O)!Ci(re)&&!(re in P)&&s(k,re,O[re],null,ne,oe);for(const re in P){if(Ci(re))continue;const ue=P[re],ve=O[re];ue!==ve&&re!=="value"&&s(k,re,ve,ue,ne,oe)}"value"in P&&s(k,"value",O.value,P.value,ne)}},F=(k,O,P,oe,ne,re,ue,ve,ce)=>{const fe=O.el=k?k.el:l(""),Te=O.anchor=k?k.anchor:l("");let{patchFlag:Se,dynamicChildren:Pe,slotScopeIds:Ne}=O;Ne&&(ve=ve?ve.concat(Ne):Ne),k==null?(o(fe,P,oe),o(Te,P,oe),x(O.children||[],P,Te,ne,re,ue,ve,ce)):Se>0&&Se&64&&Pe&&k.dynamicChildren?(N(k.dynamicChildren,Pe,P,ne,re,ue,ve),(O.key!=null||ne&&O===ne.subTree)&&nu(k,O,!0)):G(k,O,P,Te,ne,re,ue,ve,ce)},te=(k,O,P,oe,ne,re,ue,ve,ce)=>{O.slotScopeIds=ve,k==null?O.shapeFlag&512?ne.ctx.activate(O,P,oe,ue,ce):H(O,P,oe,ne,re,ue,ce):Q(k,O,ce)},H=(k,O,P,oe,ne,re,ue)=>{const ve=k.component=Lg(k,oe,ne);if(Nf(k)&&(ve.ctx.renderer=ie),Ig(ve,!1,ue),ve.asyncDep){if(ne&&ne.registerDep(ve,W,ue),!k.el){const ce=ve.subTree=Ee(ho);y(null,ce,O,P),k.placeholder=ce.el}}else W(ve,k,O,P,ne,re,ue)},Q=(k,O,P)=>{const oe=O.component=k.component;if(Cg(k,O,P))if(oe.asyncDep&&!oe.asyncResolved){J(oe,O,P);return}else oe.next=O,oe.update();else O.el=k.el,oe.vnode=O},W=(k,O,P,oe,ne,re,ue)=>{const ve=()=>{if(k.isMounted){let{next:Se,bu:Pe,u:Ne,parent:ot,vnode:et}=k;{const Xt=th(k);if(Xt){Se&&(Se.el=et.el,J(k,Se,ue)),Xt.asyncDep.then(()=>{k.isUnmounted||ve()});return}}let Je=Se,Rt;xs(k,!1),Se?(Se.el=et.el,J(k,Se,ue)):Se=et,Pe&&xr(Pe),(Rt=Se.props&&Se.props.onVnodeBeforeUpdate)&&io(Rt,ot,Se,et),xs(k,!0);const Tt=Qc(k),jt=k.subTree;k.subTree=Tt,D(jt,Tt,c(jt.el),me(jt),k,ne,re),Se.el=Tt.el,Je===null&&Eg(k,Tt.el),Ne&&xn(Ne,ne),(Rt=Se.props&&Se.props.onVnodeUpdated)&&xn(()=>io(Rt,ot,Se,et),ne)}else{let Se;const{el:Pe,props:Ne}=O,{bm:ot,m:et,parent:Je,root:Rt,type:Tt}=k,jt=ti(O);xs(k,!1),ot&&xr(ot),!jt&&(Se=Ne&&Ne.onVnodeBeforeMount)&&io(Se,Je,O),xs(k,!0);{Rt.ce&&Rt.ce._def.shadowRoot!==!1&&Rt.ce._injectChildStyle(Tt);const Xt=k.subTree=Qc(k);D(null,Xt,P,oe,k,ne,re),O.el=Xt.el}if(et&&xn(et,ne),!jt&&(Se=Ne&&Ne.onVnodeMounted)){const Xt=O;xn(()=>io(Se,Je,Xt),ne)}(O.shapeFlag&256||Je&&ti(Je.vnode)&&Je.vnode.shapeFlag&256)&&k.a&&xn(k.a,ne),k.isMounted=!0,O=P=oe=null}};k.scope.on();const ce=k.effect=new pf(ve);k.scope.off();const fe=k.update=ce.run.bind(ce),Te=k.job=ce.runIfDirty.bind(ce);Te.i=k,Te.id=k.uid,ce.scheduler=()=>Qa(Te),xs(k,!0),fe()},J=(k,O,P)=>{O.component=k;const oe=k.vnode.props;k.vnode=O,k.next=null,ag(k,O.props,oe,P),fg(k,O.children,P),ko(),Uc(k),Mo()},G=(k,O,P,oe,ne,re,ue,ve,ce=!1)=>{const fe=k&&k.children,Te=k?k.shapeFlag:0,Se=O.children,{patchFlag:Pe,shapeFlag:Ne}=O;if(Pe>0){if(Pe&128){U(fe,Se,P,oe,ne,re,ue,ve,ce);return}else if(Pe&256){ye(fe,Se,P,oe,ne,re,ue,ve,ce);return}}Ne&8?(Te&16&&Me(fe,ne,re),Se!==fe&&h(P,Se)):Te&16?Ne&16?U(fe,Se,P,oe,ne,re,ue,ve,ce):Me(fe,ne,re,!0):(Te&8&&h(P,""),Ne&16&&x(Se,P,oe,ne,re,ue,ve,ce))},ye=(k,O,P,oe,ne,re,ue,ve,ce)=>{k=k||Zs,O=O||Zs;const fe=k.length,Te=O.length,Se=Math.min(fe,Te);let Pe;for(Pe=0;Pe<Se;Pe++){const Ne=O[Pe]=ce?jo(O[Pe]):uo(O[Pe]);D(k[Pe],Ne,P,null,ne,re,ue,ve,ce)}fe>Te?Me(k,ne,re,!0,!1,Se):x(O,P,oe,ne,re,ue,ve,ce,Se)},U=(k,O,P,oe,ne,re,ue,ve,ce)=>{let fe=0;const Te=O.length;let Se=k.length-1,Pe=Te-1;for(;fe<=Se&&fe<=Pe;){const Ne=k[fe],ot=O[fe]=ce?jo(O[fe]):uo(O[fe]);if(Js(Ne,ot))D(Ne,ot,P,null,ne,re,ue,ve,ce);else break;fe++}for(;fe<=Se&&fe<=Pe;){const Ne=k[Se],ot=O[Pe]=ce?jo(O[Pe]):uo(O[Pe]);if(Js(Ne,ot))D(Ne,ot,P,null,ne,re,ue,ve,ce);else break;Se--,Pe--}if(fe>Se){if(fe<=Pe){const Ne=Pe+1,ot=Ne<Te?O[Ne].el:oe;for(;fe<=Pe;)D(null,O[fe]=ce?jo(O[fe]):uo(O[fe]),P,ot,ne,re,ue,ve,ce),fe++}}else if(fe>Pe)for(;fe<=Se;)nt(k[fe],ne,re,!0),fe++;else{const Ne=fe,ot=fe,et=new Map;for(fe=ot;fe<=Pe;fe++){const q=O[fe]=ce?jo(O[fe]):uo(O[fe]);q.key!=null&&et.set(q.key,fe)}let Je,Rt=0;const Tt=Pe-ot+1;let jt=!1,Xt=0;const Wt=new Array(Tt);for(fe=0;fe<Tt;fe++)Wt[fe]=0;for(fe=Ne;fe<=Se;fe++){const q=k[fe];if(Rt>=Tt){nt(q,ne,re,!0);continue}let _;if(q.key!=null)_=et.get(q.key);else for(Je=ot;Je<=Pe;Je++)if(Wt[Je-ot]===0&&Js(q,O[Je])){_=Je;break}_===void 0?nt(q,ne,re,!0):(Wt[_-ot]=fe+1,_>=Xt?Xt=_:jt=!0,D(q,O[_],P,null,ne,re,ue,ve,ce),Rt++)}const kn=jt?mg(Wt):Zs;for(Je=kn.length-1,fe=Tt-1;fe>=0;fe--){const q=ot+fe,_=O[q],Z=O[q+1],Sn=q+1<Te?Z.el||Z.placeholder:oe;Wt[fe]===0?D(null,_,P,Sn,ne,re,ue,ve,ce):jt&&(Je<0||fe!==kn[Je]?Fe(_,P,Sn,2):Je--)}}},Fe=(k,O,P,oe,ne=null)=>{const{el:re,type:ue,transition:ve,children:ce,shapeFlag:fe}=k;if(fe&6){Fe(k.component.subTree,O,P,oe);return}if(fe&128){k.suspense.move(O,P,oe);return}if(fe&64){ue.move(k,O,P,ie);return}if(ue===xt){o(re,O,P);for(let Se=0;Se<ce.length;Se++)Fe(ce[Se],O,P,oe);o(k.anchor,O,P);return}if(ue===_r){M(k,O,P);return}if(oe!==2&&fe&1&&ve)if(oe===0)ve.beforeEnter(re),o(re,O,P),xn(()=>ve.enter(re),ne);else{const{leave:Se,delayLeave:Pe,afterLeave:Ne}=ve,ot=()=>{k.ctx.isUnmounted?i(re):o(re,O,P)},et=()=>{re._isLeaving&&re[Ss](!0),Se(re,()=>{ot(),Ne&&Ne()})};Pe?Pe(re,ot,et):et()}else o(re,O,P)},nt=(k,O,P,oe=!1,ne=!1)=>{const{type:re,props:ue,ref:ve,children:ce,dynamicChildren:fe,shapeFlag:Te,patchFlag:Se,dirs:Pe,cacheIndex:Ne}=k;if(Se===-2&&(ne=!1),ve!=null&&(ko(),Fi(ve,null,P,k,!0),Mo()),Ne!=null&&(O.renderCache[Ne]=void 0),Te&256){O.ctx.deactivate(k);return}const ot=Te&1&&Pe,et=!ti(k);let Je;if(et&&(Je=ue&&ue.onVnodeBeforeUnmount)&&io(Je,O,k),Te&6)De(k.component,P,oe);else{if(Te&128){k.suspense.unmount(P,oe);return}ot&&ws(k,null,O,"beforeUnmount"),Te&64?k.type.remove(k,O,P,ie,oe):fe&&!fe.hasOnce&&(re!==xt||Se>0&&Se&64)?Me(fe,O,P,!1,!0):(re===xt&&Se&384||!ne&&Te&16)&&Me(ce,O,P),oe&&Ce(k)}(et&&(Je=ue&&ue.onVnodeUnmounted)||ot)&&xn(()=>{Je&&io(Je,O,k),ot&&ws(k,null,O,"unmounted")},P)},Ce=k=>{const{type:O,el:P,anchor:oe,transition:ne}=k;if(O===xt){se(P,oe);return}if(O===_r){E(k);return}const re=()=>{i(P),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(k.shapeFlag&1&&ne&&!ne.persisted){const{leave:ue,delayLeave:ve}=ne,ce=()=>ue(P,re);ve?ve(k.el,re,ce):ce()}else re()},se=(k,O)=>{let P;for(;k!==O;)P=p(k),i(k),k=P;i(O)},De=(k,O,P)=>{const{bum:oe,scope:ne,job:re,subTree:ue,um:ve,m:ce,a:fe}=k;Zc(ce),Zc(fe),oe&&xr(oe),ne.stop(),re&&(re.flags|=8,nt(ue,k,O,P)),ve&&xn(ve,O),xn(()=>{k.isUnmounted=!0},O)},Me=(k,O,P,oe=!1,ne=!1,re=0)=>{for(let ue=re;ue<k.length;ue++)nt(k[ue],O,P,oe,ne)},me=k=>{if(k.shapeFlag&6)return me(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const O=p(k.anchor||k.el),P=O&&O[If];return P?p(P):O};let j=!1;const K=(k,O,P)=>{k==null?O._vnode&&nt(O._vnode,null,null,!0):D(O._vnode||null,k,O,null,null,null,P),O._vnode=k,j||(j=!0,Uc(),Tf(),j=!1)},ie={p:D,um:nt,m:Fe,r:Ce,mt:H,mc:x,pc:G,pbc:N,n:me,o:t};return{render:K,hydrate:void 0,createApp:sg(K)}}function ql({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function xs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function vg(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function nu(t,e,n=!1){const o=t.children,i=e.children;if(We(o)&&We(i))for(let s=0;s<o.length;s++){const r=o[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=jo(i[s]),l.el=r.el),!n&&l.patchFlag!==-2&&nu(r,l)),l.type===ol&&l.patchFlag!==-1&&(l.el=r.el),l.type===ho&&!l.el&&(l.el=r.el)}}function mg(t){const e=t.slice(),n=[0];let o,i,s,r,l;const a=t.length;for(o=0;o<a;o++){const d=t[o];if(d!==0){if(i=n[n.length-1],t[i]<d){e[o]=i,n.push(o);continue}for(s=0,r=n.length-1;s<r;)l=s+r>>1,t[n[l]]<d?s=l+1:r=l;d<t[n[s]]&&(s>0&&(e[o]=n[s-1]),n[s]=o)}}for(s=n.length,r=n[s-1];s-- >0;)n[s]=r,r=e[r];return n}function th(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:th(e)}function Zc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const gg=Symbol.for("v-scx"),bg=()=>Mi(gg);function at(t,e,n){return nh(t,e,n)}function nh(t,e,n=It){const{immediate:o,deep:i,flush:s,once:r}=n,l=sn({},n),a=e&&o||!e&&s!=="post";let d;if(zi){if(s==="sync"){const m=bg();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=fo,m.resume=fo,m.pause=fo,m}}const h=_n;l.call=(m,g,D)=>eo(m,h,g,D);let c=!1;s==="post"?l.scheduler=m=>{xn(m,h&&h.suspense)}:s!=="sync"&&(c=!0,l.scheduler=(m,g)=>{g?m():Qa(m)}),l.augmentJob=m=>{e&&(m.flags|=4),c&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Mm(t,e,l);return zi&&(d?d.push(p):a&&p()),p}function yg(t,e,n){const o=this.proxy,i=Yt(t)?t.includes(".")?oh(o,t):()=>o[t]:t.bind(o,o);let s;ut(e)?s=e:(s=e.handler,n=e);const r=qi(this),l=nh(i,s.bind(o),n);return r(),l}function oh(t,e){const n=e.split(".");return()=>{let o=t;for(let i=0;i<n.length&&o;i++)o=o[n[i]];return o}}const wg=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ns(e)}Modifiers`]||t[`${ls(e)}Modifiers`];function xg(t,e,...n){if(t.isUnmounted)return;const o=t.vnode.props||It;let i=n;const s=e.startsWith("update:"),r=s&&wg(o,e.slice(7));r&&(r.trim&&(i=n.map(h=>Yt(h)?h.trim():h)),r.number&&(i=n.map(aa)));let l,a=o[l=Kl(e)]||o[l=Kl(ns(e))];!a&&s&&(a=o[l=Kl(ls(e))]),a&&eo(a,t,6,i);const d=o[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,eo(d,t,6,i)}}function sh(t,e,n=!1){const o=e.emitsCache,i=o.get(t);if(i!==void 0)return i;const s=t.emits;let r={},l=!1;if(!ut(t)){const a=d=>{const h=sh(d,e,!0);h&&(l=!0,sn(r,h))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!s&&!l?(Nt(t)&&o.set(t,null),null):(We(s)?s.forEach(a=>r[a]=null):sn(r,s),Nt(t)&&o.set(t,r),r)}function nl(t,e){return!t||!Yr(e)?!1:(e=e.slice(2).replace(/Once$/,""),_t(t,e[0].toLowerCase()+e.slice(1))||_t(t,ls(e))||_t(t,e))}function Qc(t){const{type:e,vnode:n,proxy:o,withProxy:i,propsOptions:[s],slots:r,attrs:l,emit:a,render:d,renderCache:h,props:c,data:p,setupState:m,ctx:g,inheritAttrs:D}=t,T=Ir(t);let y,C;try{if(n.shapeFlag&4){const E=i||o,R=E;y=uo(d.call(R,E,h,c,m,p,g)),C=l}else{const E=e;y=uo(E.length>1?E(c,{attrs:l,slots:r,emit:a}):E(c,null)),C=e.props?l:Dg(l)}}catch(E){Ti.length=0,el(E,t,1),y=Ee(ho)}let M=y;if(C&&D!==!1){const E=Object.keys(C),{shapeFlag:R}=M;E.length&&R&7&&(s&&E.some(Ka)&&(C=_g(C,s)),M=Ts(M,C,!1,!0))}return n.dirs&&(M=Ts(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&Vi(M,n.transition),y=M,Ir(T),y}const Dg=t=>{let e;for(const n in t)(n==="class"||n==="style"||Yr(n))&&((e||(e={}))[n]=t[n]);return e},_g=(t,e)=>{const n={};for(const o in t)(!Ka(o)||!(o.slice(9)in e))&&(n[o]=t[o]);return n};function Cg(t,e,n){const{props:o,children:i,component:s}=t,{props:r,children:l,patchFlag:a}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return o?ed(o,r,d):!!r;if(a&8){const h=e.dynamicProps;for(let c=0;c<h.length;c++){const p=h[c];if(r[p]!==o[p]&&!nl(d,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:o===r?!1:o?r?ed(o,r,d):!0:!!r;return!1}function ed(t,e,n){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let i=0;i<o.length;i++){const s=o[i];if(e[s]!==t[s]&&!nl(n,s))return!0}return!1}function Eg({vnode:t,parent:e},n){for(;e;){const o=e.subTree;if(o.suspense&&o.suspense.activeBranch===t&&(o.el=t.el),o===t)(t=e.vnode).el=n,e=e.parent;else break}}const ih=t=>t.__isSuspense;function Ag(t,e){e&&e.pendingBranch?We(t)?e.effects.push(...t):e.effects.push(t):Lm(t)}const xt=Symbol.for("v-fgt"),ol=Symbol.for("v-txt"),ho=Symbol.for("v-cmt"),_r=Symbol.for("v-stc"),Ti=[];let In=null;function ae(t=!1){Ti.push(In=t?null:[])}function Sg(){Ti.pop(),In=Ti[Ti.length-1]||null}let Ki=1;function td(t,e=!1){Ki+=t,t<0&&In&&e&&(In.hasOnce=!0)}function rh(t){return t.dynamicChildren=Ki>0?In||Zs:null,Sg(),Ki>0&&In&&In.push(t),t}function pe(t,e,n,o,i,s){return rh(f(t,e,n,o,i,s,!0))}function zn(t,e,n,o,i){return rh(Ee(t,e,n,o,i,!0))}function ou(t){return t?t.__v_isVNode===!0:!1}function Js(t,e){return t.type===e.type&&t.key===e.key}const lh=({key:t})=>t??null,Cr=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Yt(t)||Zt(t)||ut(t)?{i:pn,r:t,k:e,f:!!n}:t:null);function f(t,e=null,n=null,o=0,i=null,s=t===xt?0:1,r=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&lh(e),ref:e&&Cr(e),scopeId:Lf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:pn};return l?(su(a,n),s&128&&t.normalize(a)):n&&(a.shapeFlag|=Yt(n)?8:16),Ki>0&&!r&&In&&(a.patchFlag>0||s&6)&&a.patchFlag!==32&&In.push(a),a}const Ee=Fg;function Fg(t,e=null,n=null,o=0,i=null,s=!1){if((!t||t===Xm)&&(t=ho),ou(t)){const l=Ts(t,e,!0);return n&&su(l,n),Ki>0&&!s&&In&&(l.shapeFlag&6?In[In.indexOf(t)]=l:In.push(l)),l.patchFlag=-2,l}if(Bg(t)&&(t=t.__vccOpts),e){e=kg(e);let{class:l,style:a}=e;l&&!Yt(l)&&(e.class=vt(l)),Nt(a)&&(Ga(a)&&!We(a)&&(a=sn({},a)),e.style=en(a))}const r=Yt(t)?1:ih(t)?128:Im(t)?64:Nt(t)?4:ut(t)?2:0;return f(t,e,n,o,i,r,s,!0)}function kg(t){return t?Ga(t)||Xf(t)?sn({},t):t:null}function Ts(t,e,n=!1,o=!1){const{props:i,ref:s,patchFlag:r,children:l,transition:a}=t,d=e?Mg(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&lh(d),ref:e&&e.ref?n&&s?We(s)?s.concat(Cr(e)):[s,Cr(e)]:Cr(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xt?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ts(t.ssContent),ssFallback:t.ssFallback&&Ts(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&o&&Vi(h,a.clone(h)),h}function $e(t=" ",e=0){return Ee(ol,null,t,e)}function Fs(t,e){const n=Ee(_r,null,t);return n.staticCount=e,n}function Ke(t="",e=!1){return e?(ae(),zn(ho,null,t)):Ee(ho,null,t)}function uo(t){return t==null||typeof t=="boolean"?Ee(ho):We(t)?Ee(xt,null,t.slice()):ou(t)?jo(t):Ee(ol,null,String(t))}function jo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ts(t)}function su(t,e){let n=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(We(e))n=16;else if(typeof e=="object")if(o&65){const i=e.default;i&&(i._c&&(i._d=!1),su(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Xf(e)?e._ctx=pn:i===3&&pn&&(pn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ut(e)?(e={default:e,_ctx:pn},n=32):(e=String(e),o&64?(n=16,e=[$e(e)]):n=8);t.children=e,t.shapeFlag|=n}function Mg(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const i in o)if(i==="class")e.class!==o.class&&(e.class=vt([e.class,o.class]));else if(i==="style")e.style=en([e.style,o.style]);else if(Yr(i)){const s=e[i],r=o[i];r&&s!==r&&!(We(s)&&s.includes(r))&&(e[i]=s?[].concat(s,r):r)}else i!==""&&(e[i]=o[i])}return e}function io(t,e,n,o=null){eo(t,e,7,[n,o])}const Tg=Wf();let $g=0;function Lg(t,e,n){const o=t.type,i=(e?e.appContext:t.appContext)||Tg,s={uid:$g++,vnode:t,type:o,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new df(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gf(o,i),emitsOptions:sh(o,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:o.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=xg.bind(null,s),t.ce&&t.ce(s),s}let _n=null;const iu=()=>_n||pn;let Rr,ba;{const t=Gr(),e=(n,o)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(o),s=>{i.length>1?i.forEach(r=>r(s)):i[0](s)}};Rr=e("__VUE_INSTANCE_SETTERS__",n=>_n=n),ba=e("__VUE_SSR_SETTERS__",n=>zi=n)}const qi=t=>{const e=_n;return Rr(t),t.scope.on(),()=>{t.scope.off(),Rr(e)}},nd=()=>{_n&&_n.scope.off(),Rr(null)};function ah(t){return t.vnode.shapeFlag&4}let zi=!1;function Ig(t,e=!1,n=!1){e&&ba(e);const{props:o,children:i}=t.vnode,s=ah(t);lg(t,o,s,e),dg(t,i,n||e);const r=s?Og(t,e):void 0;return e&&ba(!1),r}function Og(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Gm);const{setup:o}=n;if(o){ko();const i=t.setupContext=o.length>1?Pg(t):null,s=qi(t),r=Wi(o,t,0,[t.props,i]),l=tf(r);if(Mo(),s(),(l||t.sp)&&!ti(t)&&Bf(t),l){if(r.then(nd,nd),e)return r.then(a=>{od(t,a)}).catch(a=>{el(a,t,0)});t.asyncDep=r}else od(t,r)}else uh(t)}function od(t,e,n){ut(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Nt(e)&&(t.setupState=Ff(e)),uh(t)}function uh(t,e,n){const o=t.type;t.render||(t.render=o.render||fo);{const i=qi(t);ko();try{Zm(t)}finally{Mo(),i()}}}const Rg={get(t,e){return hn(t,"get",""),t[e]}};function Pg(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Rg),slots:t.slots,emit:t.emit,expose:e}}function sl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ff(Za(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ki)return ki[n](t)},has(e,n){return n in e||n in ki}})):t.proxy}function Bg(t){return ut(t)&&"__vccOpts"in t}const Oe=(t,e)=>Fm(t,e,zi),Ng="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ya;const sd=typeof window<"u"&&window.trustedTypes;if(sd)try{ya=sd.createPolicy("vue",{createHTML:t=>t})}catch{}const ch=ya?t=>ya.createHTML(t):t=>t,Vg="http://www.w3.org/2000/svg",Kg="http://www.w3.org/1998/Math/MathML",xo=typeof document<"u"?document:null,id=xo&&xo.createElement("template"),zg={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,o)=>{const i=e==="svg"?xo.createElementNS(Vg,t):e==="mathml"?xo.createElementNS(Kg,t):n?xo.createElement(t,{is:n}):xo.createElement(t);return t==="select"&&o&&o.multiple!=null&&i.setAttribute("multiple",o.multiple),i},createText:t=>xo.createTextNode(t),createComment:t=>xo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,o,i,s){const r=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{id.innerHTML=ch(o==="svg"?`<svg>${t}</svg>`:o==="mathml"?`<math>${t}</math>`:t);const l=id.content;if(o==="svg"||o==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[r?r.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ko="transition",gi="animation",oi=Symbol("_vtc"),dh={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ug=sn({},Bm,dh),Ds=(t,e=[])=>{We(t)?t.forEach(n=>n(...e)):t&&t(...e)},rd=t=>t?We(t)?t.some(e=>e.length>1):t.length>1:!1;function Hg(t){const e={};for(const F in t)F in dh||(e[F]=t[F]);if(t.css===!1)return e;const{name:n="v",type:o,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=s,appearActiveClass:d=r,appearToClass:h=l,leaveFromClass:c=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,g=jg(i),D=g&&g[0],T=g&&g[1],{onBeforeEnter:y,onEnter:C,onEnterCancelled:M,onLeave:E,onLeaveCancelled:R,onBeforeAppear:L=y,onAppear:B=C,onAppearCancelled:x=M}=e,I=(F,te,H,Q)=>{F._enterCancelled=Q,zo(F,te?h:l),zo(F,te?d:r),H&&H()},N=(F,te)=>{F._isLeaving=!1,zo(F,c),zo(F,m),zo(F,p),te&&te()},z=F=>(te,H)=>{const Q=F?B:C,W=()=>I(te,F,H);Ds(Q,[te,W]),ld(()=>{zo(te,F?a:s),lo(te,F?h:l),rd(Q)||ad(te,o,D,W)})};return sn(e,{onBeforeEnter(F){Ds(y,[F]),lo(F,s),lo(F,r)},onBeforeAppear(F){Ds(L,[F]),lo(F,a),lo(F,d)},onEnter:z(!1),onAppear:z(!0),onLeave(F,te){F._isLeaving=!0;const H=()=>N(F,te);lo(F,c),F._enterCancelled?(lo(F,p),wa()):(wa(),lo(F,p)),ld(()=>{F._isLeaving&&(zo(F,c),lo(F,m),rd(E)||ad(F,o,T,H))}),Ds(E,[F,H])},onEnterCancelled(F){I(F,!1,void 0,!0),Ds(M,[F])},onAppearCancelled(F){I(F,!0,void 0,!0),Ds(x,[F])},onLeaveCancelled(F){N(F),Ds(R,[F])}})}function jg(t){if(t==null)return null;if(Nt(t))return[Yl(t.enter),Yl(t.leave)];{const e=Yl(t);return[e,e]}}function Yl(t){return Wv(t)}function lo(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[oi]||(t[oi]=new Set)).add(e)}function zo(t,e){e.split(/\s+/).forEach(o=>o&&t.classList.remove(o));const n=t[oi];n&&(n.delete(e),n.size||(t[oi]=void 0))}function ld(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Wg=0;function ad(t,e,n,o){const i=t._endId=++Wg,s=()=>{i===t._endId&&o()};if(n!=null)return setTimeout(s,n);const{type:r,timeout:l,propCount:a}=fh(t,e);if(!r)return o();const d=r+"end";let h=0;const c=()=>{t.removeEventListener(d,p),s()},p=m=>{m.target===t&&++h>=a&&c()};setTimeout(()=>{h<a&&c()},l+1),t.addEventListener(d,p)}function fh(t,e){const n=window.getComputedStyle(t),o=g=>(n[g]||"").split(", "),i=o(`${Ko}Delay`),s=o(`${Ko}Duration`),r=ud(i,s),l=o(`${gi}Delay`),a=o(`${gi}Duration`),d=ud(l,a);let h=null,c=0,p=0;e===Ko?r>0&&(h=Ko,c=r,p=s.length):e===gi?d>0&&(h=gi,c=d,p=a.length):(c=Math.max(r,d),h=c>0?r>d?Ko:gi:null,p=h?h===Ko?s.length:a.length:0);const m=h===Ko&&/\b(transform|all)(,|$)/.test(o(`${Ko}Property`).toString());return{type:h,timeout:c,propCount:p,hasTransform:m}}function ud(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,o)=>cd(n)+cd(t[o])))}function cd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function wa(){return document.body.offsetHeight}function qg(t,e,n){const o=t[oi];o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Pr=Symbol("_vod"),hh=Symbol("_vsh"),xa={beforeMount(t,{value:e},{transition:n}){t[Pr]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):bi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:o}){!e!=!n&&(o?e?(o.beforeEnter(t),bi(t,!0),o.enter(t)):o.leave(t,()=>{bi(t,!1)}):bi(t,e))},beforeUnmount(t,{value:e}){bi(t,e)}};function bi(t,e){t.style.display=e?t[Pr]:"none",t[hh]=!e}const Yg=Symbol(""),Xg=/(^|;)\s*display\s*:/;function Jg(t,e,n){const o=t.style,i=Yt(n);let s=!1;if(n&&!i){if(e)if(Yt(e))for(const r of e.split(";")){const l=r.slice(0,r.indexOf(":")).trim();n[l]==null&&Er(o,l,"")}else for(const r in e)n[r]==null&&Er(o,r,"");for(const r in n)r==="display"&&(s=!0),Er(o,r,n[r])}else if(i){if(e!==n){const r=o[Yg];r&&(n+=";"+r),o.cssText=n,s=Xg.test(n)}}else e&&t.removeAttribute("style");Pr in t&&(t[Pr]=s?o.display:"",t[hh]&&(o.display="none"))}const dd=/\s*!important$/;function Er(t,e,n){if(We(n))n.forEach(o=>Er(t,e,o));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const o=Gg(t,e);dd.test(n)?t.setProperty(ls(o),n.replace(dd,""),"important"):t[o]=n}}const fd=["Webkit","Moz","ms"],Xl={};function Gg(t,e){const n=Xl[e];if(n)return n;let o=ns(e);if(o!=="filter"&&o in t)return Xl[e]=o;o=sf(o);for(let i=0;i<fd.length;i++){const s=fd[i]+o;if(s in t)return Xl[e]=s}return e}const hd="http://www.w3.org/1999/xlink";function pd(t,e,n,o,i,s=Zv(e)){o&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hd,e.slice(6,e.length)):t.setAttributeNS(hd,e,n):n==null||s&&!lf(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Qn(n)?String(n):n)}function vd(t,e,n,o,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ch(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let r=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=lf(n):n==null&&l==="string"?(n="",r=!0):l==="number"&&(n=0,r=!0)}try{t[e]=n}catch{}r&&t.removeAttribute(i||e)}function Yo(t,e,n,o){t.addEventListener(e,n,o)}function Zg(t,e,n,o){t.removeEventListener(e,n,o)}const md=Symbol("_vei");function Qg(t,e,n,o,i=null){const s=t[md]||(t[md]={}),r=s[e];if(o&&r)r.value=o;else{const[l,a]=e0(e);if(o){const d=s[e]=o0(o,i);Yo(t,l,d,a)}else r&&(Zg(t,l,r,a),s[e]=void 0)}}const gd=/(?:Once|Passive|Capture)$/;function e0(t){let e;if(gd.test(t)){e={};let o;for(;o=t.match(gd);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ls(t.slice(2)),e]}let Jl=0;const t0=Promise.resolve(),n0=()=>Jl||(t0.then(()=>Jl=0),Jl=Date.now());function o0(t,e){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;eo(s0(o,n.value),e,5,[o])};return n.value=t,n.attached=n0(),n}function s0(t,e){if(We(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(o=>i=>!i._stopped&&o&&o(i))}else return e}const bd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,i0=(t,e,n,o,i,s)=>{const r=i==="svg";e==="class"?qg(t,o,r):e==="style"?Jg(t,n,o):Yr(e)?Ka(e)||Qg(t,e,n,o,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):r0(t,e,o,r))?(vd(t,e,o),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&pd(t,e,o,r,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Yt(o))?vd(t,ns(e),o,s,e):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),pd(t,e,o,r))};function r0(t,e,n,o){if(o)return!!(e==="innerHTML"||e==="textContent"||e in t&&bd(e)&&ut(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return bd(e)&&Yt(n)?!1:e in t}const ph=new WeakMap,vh=new WeakMap,Br=Symbol("_moveCb"),yd=Symbol("_enterCb"),l0=t=>(delete t.props.mode,t),a0=l0({name:"TransitionGroup",props:sn({},Ug,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=iu(),o=Pm();let i,s;return Kf(()=>{if(!i.length)return;const r=t.moveClass||`${t.name||"v"}-move`;if(!h0(i[0].el,n.vnode.el,r)){i=[];return}i.forEach(c0),i.forEach(d0);const l=i.filter(f0);wa(),l.forEach(a=>{const d=a.el,h=d.style;lo(d,r),h.transform=h.webkitTransform=h.transitionDuration="";const c=d[Br]=p=>{p&&p.target!==d||(!p||/transform$/.test(p.propertyName))&&(d.removeEventListener("transitionend",c),d[Br]=null,zo(d,r))};d.addEventListener("transitionend",c)}),i=[]}),()=>{const r=yt(t),l=Hg(r);let a=r.tag||xt;if(i=[],s)for(let d=0;d<s.length;d++){const h=s[d];h.el&&h.el instanceof Element&&(i.push(h),Vi(h,ha(h,l,o,n)),ph.set(h,h.el.getBoundingClientRect()))}s=e.default?Pf(e.default()):[];for(let d=0;d<s.length;d++){const h=s[d];h.key!=null&&Vi(h,ha(h,l,o,n))}return Ee(a,null,s)}}}),u0=a0;function c0(t){const e=t.el;e[Br]&&e[Br](),e[yd]&&e[yd]()}function d0(t){vh.set(t,t.el.getBoundingClientRect())}function f0(t){const e=ph.get(t),n=vh.get(t),o=e.left-n.left,i=e.top-n.top;if(o||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${o}px,${i}px)`,s.transitionDuration="0s",t}}function h0(t,e,n){const o=t.cloneNode(),i=t[oi];i&&i.forEach(l=>{l.split(/\s+/).forEach(a=>a&&o.classList.remove(a))}),n.split(/\s+/).forEach(l=>l&&o.classList.add(l)),o.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(o);const{hasTransform:r}=fh(o);return s.removeChild(o),r}const si=t=>{const e=t.props["onUpdate:modelValue"]||!1;return We(e)?n=>xr(e,n):e};function p0(t){t.target.composing=!0}function wd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ao=Symbol("_assign"),Ut={created(t,{modifiers:{lazy:e,trim:n,number:o}},i){t[Ao]=si(i);const s=o||i.props&&i.props.type==="number";Yo(t,e?"change":"input",r=>{if(r.target.composing)return;let l=t.value;n&&(l=l.trim()),s&&(l=aa(l)),t[Ao](l)}),n&&Yo(t,"change",()=>{t.value=t.value.trim()}),e||(Yo(t,"compositionstart",p0),Yo(t,"compositionend",wd),Yo(t,"change",wd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:o,trim:i,number:s}},r){if(t[Ao]=si(r),t.composing)return;const l=(s||t.type==="number")&&!/^0\d/.test(t.value)?aa(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(o&&e===n||i&&t.value.trim()===a)||(t.value=a))}},Jo={deep:!0,created(t,e,n){t[Ao]=si(n),Yo(t,"change",()=>{const o=t._modelValue,i=mh(t),s=t.checked,r=t[Ao];if(We(o)){const l=af(o,i),a=l!==-1;if(s&&!a)r(o.concat(i));else if(!s&&a){const d=[...o];d.splice(l,1),r(d)}}else if(Xr(o)){const l=new Set(o);s?l.add(i):l.delete(i),r(l)}else r(gh(t,s))})},mounted:xd,beforeUpdate(t,e,n){t[Ao]=si(n),xd(t,e,n)}};function xd(t,{value:e,oldValue:n},o){t._modelValue=e;let i;if(We(e))i=af(e,o.props.value)>-1;else if(Xr(e))i=e.has(o.props.value);else{if(e===n)return;i=ni(e,gh(t,!0))}t.checked!==i&&(t.checked=i)}const qn={created(t,{value:e},n){t.checked=ni(e,n.props.value),t[Ao]=si(n),Yo(t,"change",()=>{t[Ao](mh(t))})},beforeUpdate(t,{value:e,oldValue:n},o){t[Ao]=si(o),e!==n&&(t.checked=ni(e,o.props.value))}};function mh(t){return"_value"in t?t._value:t.value}function gh(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const v0=["ctrl","shift","alt","meta"],m0={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>v0.some(n=>t[`${n}Key`]&&!e.includes(n))},pt=(t,e)=>{const n=t._withMods||(t._withMods={}),o=e.join(".");return n[o]||(n[o]=((i,...s)=>{for(let r=0;r<e.length;r++){const l=m0[e[r]];if(l&&l(i,e))return}return t(i,...s)}))},g0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},b0=(t,e)=>{const n=t._withKeys||(t._withKeys={}),o=e.join(".");return n[o]||(n[o]=(i=>{if(!("key"in i))return;const s=ls(i.key);if(e.some(r=>r===s||g0[r]===s))return t(i)}))},y0=sn({patchProp:i0},zg);let Dd;function w0(){return Dd||(Dd=hg(y0))}const x0=((...t)=>{const e=w0().createApp(...t),{mount:n}=e;return e.mount=o=>{const i=_0(o);if(!i)return;const s=e._component;!ut(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=n(i,!1,D0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e});function D0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function _0(t){return Yt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let bh;const il=t=>bh=t,yh=Symbol();function Da(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var $i;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})($i||($i={}));function C0(){const t=ff(!0),e=t.run(()=>Y({}));let n=[],o=[];const i=Za({install(s){il(i),i._a=s,s.provide(yh,i),s.config.globalProperties.$pinia=i,o.forEach(r=>n.push(r)),o=[]},use(s){return this._a?n.push(s):o.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const wh=()=>{};function _d(t,e,n,o=wh){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),o())};return!n&&hf()&&em(i),i}function js(t,...e){t.slice().forEach(n=>{n(...e)})}const E0=t=>t(),Cd=Symbol(),Gl=Symbol();function _a(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,o)=>t.set(o,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n],i=t[n];Da(i)&&Da(o)&&t.hasOwnProperty(n)&&!Zt(o)&&!es(o)?t[n]=_a(i,o):t[n]=o}return t}const A0=Symbol();function S0(t){return!Da(t)||!Object.prototype.hasOwnProperty.call(t,A0)}const{assign:Uo}=Object;function F0(t){return!!(Zt(t)&&t.effect)}function k0(t,e,n,o){const{state:i,actions:s,getters:r}=e,l=n.state.value[t];let a;function d(){l||(n.state.value[t]=i?i():{});const h=Cm(n.state.value[t]);return Uo(h,s,Object.keys(r||{}).reduce((c,p)=>(c[p]=Za(Oe(()=>{il(n);const m=n._s.get(t);return r[p].call(m,m)})),c),{}))}return a=xh(t,d,e,n,o,!0),a}function xh(t,e,n={},o,i,s){let r;const l=Uo({actions:{}},n),a={deep:!0};let d,h,c=[],p=[],m;const g=o.state.value[t];!s&&!g&&(o.state.value[t]={}),Y({});let D;function T(x){let I;d=h=!1,typeof x=="function"?(x(o.state.value[t]),I={type:$i.patchFunction,storeId:t,events:m}):(_a(o.state.value[t],x),I={type:$i.patchObject,payload:x,storeId:t,events:m});const N=D=Symbol();je().then(()=>{D===N&&(d=!0)}),h=!0,js(c,I,o.state.value[t])}const y=s?function(){const{state:I}=n,N=I?I():{};this.$patch(z=>{Uo(z,N)})}:wh;function C(){r.stop(),c=[],p=[],o._s.delete(t)}const M=(x,I="")=>{if(Cd in x)return x[Gl]=I,x;const N=function(){il(o);const z=Array.from(arguments),F=[],te=[];function H(J){F.push(J)}function Q(J){te.push(J)}js(p,{args:z,name:N[Gl],store:R,after:H,onError:Q});let W;try{W=x.apply(this&&this.$id===t?this:R,z)}catch(J){throw js(te,J),J}return W instanceof Promise?W.then(J=>(js(F,J),J)).catch(J=>(js(te,J),Promise.reject(J))):(js(F,W),W)};return N[Cd]=!0,N[Gl]=I,N},E={_p:o,$id:t,$onAction:_d.bind(null,p),$patch:T,$reset:y,$subscribe(x,I={}){const N=_d(c,x,I.detached,()=>z()),z=r.run(()=>at(()=>o.state.value[t],F=>{(I.flush==="sync"?h:d)&&x({storeId:t,type:$i.direct,events:m},F)},Uo({},a,I)));return N},$dispose:C},R=Qr(E);o._s.set(t,R);const B=(o._a&&o._a.runWithContext||E0)(()=>o._e.run(()=>(r=ff()).run(()=>e({action:M}))));for(const x in B){const I=B[x];if(Zt(I)&&!F0(I)||es(I))s||(g&&S0(I)&&(Zt(I)?I.value=g[x]:_a(I,g[x])),o.state.value[t][x]=I);else if(typeof I=="function"){const N=M(I,x);B[x]=N,l.actions[x]=I}}return Uo(R,B),Uo(yt(R),B),Object.defineProperty(R,"$state",{get:()=>o.state.value[t],set:x=>{T(I=>{Uo(I,x)})}}),o._p.forEach(x=>{Uo(R,r.run(()=>x({store:R,app:o._a,pinia:o,options:l})))}),g&&s&&n.hydrate&&n.hydrate(R.$state,g),d=!0,h=!0,R}/*! #__NO_SIDE_EFFECTS__ */function ru(t,e,n){let o;const i=typeof e=="function";o=i?n:e;function s(r,l){const a=rg();return r=r||(a?Mi(yh,null):null),r&&il(r),r=bh,r._s.has(t)||(i?xh(t,e,o,r):k0(t,o,r)),r._s.get(t)}return s.$id=t,s}var $n={},Ed;function M0(){if(Ed)return $n;Ed=1;var t=$n&&$n.__spreadArray||function(s,r,l){if(l||arguments.length===2)for(var a=0,d=r.length,h;a<d;a++)(h||!(a in r))&&(h||(h=Array.prototype.slice.call(r,0,a)),h[a]=r[a]);return s.concat(h||Array.prototype.slice.call(r))};Object.defineProperty($n,"__esModule",{value:!0}),$n.Serial=$n.Keyboard=$n.KeyboardMetadata=$n.Key=void 0;var e=(function(){function s(){this.color="#cccccc",this.labels=[],this.textColor=[],this.textSize=[],this.default={textColor:"#000000",textSize:3},this.x=0,this.y=0,this.width=1,this.height=1,this.x2=0,this.y2=0,this.width2=1,this.height2=1,this.rotation_x=0,this.rotation_y=0,this.rotation_angle=0,this.decal=!1,this.ghost=!1,this.stepped=!1,this.nub=!1,this.profile="",this.sm="",this.sb="",this.st=""}return s})();$n.Key=e;var n=(function(){function s(){this.author="",this.backcolor="#eeeeee",this.background=null,this.name="",this.notes="",this.radii="",this.switchBrand="",this.switchMount="",this.switchType=""}return s})();$n.KeyboardMetadata=n;var o=(function(){function s(){this.meta=new n,this.keys=[]}return s})();$n.Keyboard=o;var i;return(function(s){function r(y){if(typeof y!="object")return y;if(y instanceof Array){for(var C=[],M=0;M<y.length;M++)C[M]=r(y[M]);return C}else{var E=Object.create(Object.getPrototypeOf(y));E.constructor();for(var R in y)E[R]=r(y[R]);return E}}var l=[[0,6,2,8,9,11,3,5,1,4,7,10],[1,7,-1,-1,9,11,4,-1,-1,-1,-1,10],[3,-1,5,-1,9,11,-1,-1,4,-1,-1,10],[4,-1,-1,-1,9,11,-1,-1,-1,-1,-1,10],[0,6,2,8,10,-1,3,5,1,4,7,-1],[1,7,-1,-1,10,-1,4,-1,-1,-1,-1,-1],[3,-1,5,-1,10,-1,-1,-1,4,-1,-1,-1],[4,-1,-1,-1,10,-1,-1,-1,-1,-1,-1,-1]];function a(y,C){for(var M=[],E=0;E<y.length;++E)y[E]&&(M[l[C][E]]=y[E]);return M}function d(y){for(var C=y.length-1;C>=0&&!y[C];)C--;return y.slice(0,C+1)}function h(y,C){throw"Error: "+y+(C?`:
  `+JSON.stringify(C):"")}function c(y){y instanceof Array||h("expected an array of objects");for(var C=new e,M=new o,E={x:0,y:0},R=4,L=0;L<y.length;++L)if(y[L]instanceof Array){for(var B=0;B<y[L].length;++B){var x=y[L][B];if(typeof x=="string"){var I=r(C);I.width2=I.width2===0?C.width:C.width2,I.height2=I.height2===0?C.height:C.height2,I.labels=a(x.split(`
`),R),I.textSize=a(I.textSize,R);for(var N=0;N<12;++N)I.labels[N]||(delete I.textSize[N],delete I.textColor[N]),I.textSize[N]==I.default.textSize&&delete I.textSize[N],I.textColor[N]==I.default.textColor&&delete I.textColor[N];I.textSize=d(I.textSize),I.textColor=d(I.textColor),M.keys.push(I),C.x+=C.width,C.width=C.height=1,C.x2=C.y2=C.width2=C.height2=0,C.nub=C.stepped=C.decal=!1}else{if(B!=0&&(x.r!=null||x.rx!=null||x.ry!=null)&&h("rotation can only be specified on the first key in a row",x),x.r!=null&&(C.rotation_angle=x.r),x.rx!=null&&(C.rotation_x=E.x=x.rx,C.x=E.x,C.y=E.y),x.ry!=null&&(C.rotation_y=E.y=x.ry,C.x=E.x,C.y=E.y),x.rx!=null&&(C.rotation_x=x.rx),x.ry!=null&&(C.rotation_y=x.ry),x.a!=null&&(R=x.a),x.f&&(C.default.textSize=x.f,C.textSize=[]),x.f2)for(var N=1;N<12;++N)C.textSize[N]=x.f2;if(x.fa&&(C.textSize=x.fa),x.p&&(C.profile=x.p),x.c&&(C.color=x.c),x.t){var z=x.t.split(`
`);z[0]!=""&&(C.default.textColor=z[0]),C.textColor=a(z,R)}x.x&&(C.x+=x.x),x.y&&(C.y+=x.y),x.w&&(C.width=C.width2=x.w),x.h&&(C.height=C.height2=x.h),x.x2&&(C.x2=x.x2),x.y2&&(C.y2=x.y2),x.w2&&(C.width2=x.w2),x.h2&&(C.height2=x.h2),x.n&&(C.nub=x.n),x.l&&(C.stepped=x.l),x.d&&(C.decal=x.d),x.g!=null&&(C.ghost=x.g),x.sm&&(C.sm=x.sm),x.sb&&(C.sb=x.sb),x.st&&(C.st=x.st)}}C.y++,C.x=C.rotation_x}else if(typeof y[L]=="object"){L!=0&&h("keyboard metadata must the be first element",y[L]);for(var F in y[L])y[L][F]&&(M.meta[F]=y[L][F])}else h("unexpected",y[L]);return M}s.deserialize=c;var p=[[0,8,2,6,9,7,1,10,3,4,11,5],[-1,0,-1,-1,6,-1,-1,1,-1,4,11,5],[-1,-1,-1,0,8,2,-1,-1,-1,4,11,5],[-1,-1,-1,-1,0,-1,-1,-1,-1,4,11,5],[0,8,2,6,9,7,1,10,3,-1,4,-1],[-1,0,-1,-1,6,-1,-1,1,-1,-1,4,-1],[-1,-1,-1,0,8,2,-1,-1,-1,-1,4,-1],[-1,-1,-1,-1,0,-1,-1,-1,-1,-1,4,-1]];function m(y,C){for(var M=new Array(12).fill(void 0),E=0;E<y.length;E++)if(y[E]){var R=p[C][E];if(R===-1)return[];M[R]=y[E]}for(;M.length>0&&M[M.length-1]===void 0;)M.pop();return M}function g(y){for(var C={},M=7;M>=0;M--){var E=m(y,M);E.length>0&&(C[M]=E)}if(Object.keys(C).length>0){var R=Object.entries(C).reduce(function(L,B){return L[1].length<B[1].length?L:B});return[parseInt(R[0]),R[1]]}return[0,[]]}function D(y,C){y=t([],y,!0),C=t([],C,!0);var M=function(E){var R=12-E.length;R>0&&E.push.apply(E,new Array(R).fill(void 0))};return M(y),M(C),JSON.stringify(y)!==JSON.stringify(C)}function T(y){var C=[],M=[],E=new e,R="",L=[],B=4,x=-1,I={r:0,rx:0,ry:0},N=!0;E.y-=1;for(var z=function(G){var ye={},U=function(O,P,oe){return P!==oe&&(ye[O]=P),P},Fe=g(G.labels),nt=Fe[0],Ce=Fe[1],se=G.rotation_angle!==I.r||G.rotation_x!==I.rx||G.rotation_y!==I.ry;N=G.y!==E.y,M.length>0&&(se||N)&&(C.push(M),M=[],N=!0),N&&(E.y=E.y+1,(G.rotation_y!==I.ry||G.rotation_x!==I.rx)&&(E.y=G.rotation_y),E.x=G.rotation_x,I.r=G.rotation_angle,I.rx=G.rotation_x,I.ry=G.rotation_y,N=!1),E.rotation_angle=U("r",G.rotation_angle,E.rotation_angle),E.rotation_x=U("rx",G.rotation_x,E.rotation_x),E.rotation_y=U("ry",G.rotation_y,E.rotation_y);var De=U("x",G.x-E.x,0),Me=U("y",G.y-E.y,0);E.x=E.x+G.width+De,E.y=E.y+Me,E.color=U("c",G.color,E.color);var me=m(G.textColor,nt);if(me.length>0){!me[0]&&G.default.textColor!==E.default.textColor&&(me=t([],me,!0),me[0]=G.default.textColor);var j=me.map(function(O){return O===void 0?"":O}).join(`
`).replace(/\n+$/,"");R=U("t",j,R),E.default.textColor=G.default.textColor}else G.default.textColor!==E.default.textColor&&(E.default.textColor=U("t",G.default.textColor,E.default.textColor));E.ghost=U("g",G.ghost,E.ghost),E.profile=U("p",G.profile,E.profile),E.sm=U("sm",G.sm,E.sm),E.sb=U("sb",G.sb,E.sb),E.st=U("st",G.st,E.st),B=U("a",nt,B),E.default.textSize=U("f",G.default.textSize,E.default.textSize),ye.f&&(L=[]);var K=m(G.textSize,nt);if(D(L,K))if(K.length===0)E.default.textSize=U("f",G.default.textSize,E.default.textSize),L=[];else{var ie=!K[0];if(ie){for(var _e=2;_e<K.length;_e++)if(K[_e]!==K[1]){ie=!1;break}}if(ie){var k=K[1];x=U("f2",k,x),L=t([void 0],new Array(11).fill(k),!0)}else L=U("fa",K,L)}U("w",G.width,1),U("h",G.height,1),U("w2",G.width2,G.width),U("h2",G.height2,G.height),U("x2",G.x2,0),U("y2",G.y2,0),U("l",G.stepped,!1),U("n",G.nub,!1),U("d",G.decal,!1),Object.keys(ye).length>0&&M.push(ye),E.labels=Ce,M.push(Ce.map(function(O){return O||""}).join(`
`).replace(/\n+$/,""))},F=0,te=y.keys;F<te.length;F++){var H=te[F];z(H)}M.length>0&&C.push(M);var Q=new n,W={};for(var J in y.meta)(!(J in Q)||y.meta[J]!==Q[J])&&(W[J]=y.meta[J]);return Object.keys(W).length>0&&C.unshift(W),C}s.serialize=T})(i||($n.Serial=i={})),$n}var Ht=M0();/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Gs=9e15,as=1e9,Ca="0123456789abcdef",Nr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Vr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ea={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Gs,maxE:Gs,crypto:!1},Dh,Eo,Qe=!0,rl="[DecimalError] ",ss=rl+"Invalid argument: ",_h=rl+"Precision limit exceeded",Ch=rl+"crypto unavailable",Eh="[object Decimal]",vn=Math.floor,on=Math.pow,T0=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$0=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,L0=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ah=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gn=1e7,Ye=7,I0=9007199254740991,O0=Nr.length-1,Aa=Vr.length-1,xe={toStringTag:Eh};xe.absoluteValue=xe.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),He(t)};xe.ceil=function(){return He(new this.constructor(this),this.e+1,2)};xe.clampedTo=xe.clamp=function(t,e){var n,o=this,i=o.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(ss+e);return n=o.cmp(t),n<0?t:o.cmp(e)>0?e:new i(o)};xe.comparedTo=xe.cmp=function(t){var e,n,o,i,s=this,r=s.d,l=(t=new s.constructor(t)).d,a=s.s,d=t.s;if(!r||!l)return!a||!d?NaN:a!==d?a:r===l?0:!r^a<0?1:-1;if(!r[0]||!l[0])return r[0]?a:l[0]?-d:0;if(a!==d)return a;if(s.e!==t.e)return s.e>t.e^a<0?1:-1;for(o=r.length,i=l.length,e=0,n=o<i?o:i;e<n;++e)if(r[e]!==l[e])return r[e]>l[e]^a<0?1:-1;return o===i?0:o>i^a<0?1:-1};xe.cosine=xe.cos=function(){var t,e,n=this,o=n.constructor;return n.d?n.d[0]?(t=o.precision,e=o.rounding,o.precision=t+Math.max(n.e,n.sd())+Ye,o.rounding=1,n=R0(o,Th(o,n)),o.precision=t,o.rounding=e,He(Eo==2||Eo==3?n.neg():n,t,e,!0)):new o(1):new o(NaN)};xe.cubeRoot=xe.cbrt=function(){var t,e,n,o,i,s,r,l,a,d,h=this,c=h.constructor;if(!h.isFinite()||h.isZero())return new c(h);for(Qe=!1,s=h.s*on(h.s*h,1/3),!s||Math.abs(s)==1/0?(n=cn(h.d),t=h.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=on(n,1/3),t=vn((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),o=new c(n),o.s=h.s):o=new c(s.toString()),r=(t=c.precision)+3;;)if(l=o,a=l.times(l).times(l),d=a.plus(h),o=Ot(d.plus(h).times(l),d.plus(a),r+2,1),cn(l.d).slice(0,r)===(n=cn(o.d)).slice(0,r))if(n=n.slice(r-3,r+1),n=="9999"||!i&&n=="4999"){if(!i&&(He(l,t+1,0),l.times(l).times(l).eq(h))){o=l;break}r+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(He(o,t+1,1),e=!o.times(o).times(o).eq(h));break}return Qe=!0,He(o,t,c.rounding,e)};xe.decimalPlaces=xe.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-vn(this.e/Ye))*Ye,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};xe.dividedBy=xe.div=function(t){return Ot(this,new this.constructor(t))};xe.dividedToIntegerBy=xe.divToInt=function(t){var e=this,n=e.constructor;return He(Ot(e,new n(t),0,1,1),n.precision,n.rounding)};xe.equals=xe.eq=function(t){return this.cmp(t)===0};xe.floor=function(){return He(new this.constructor(this),this.e+1,3)};xe.greaterThan=xe.gt=function(t){return this.cmp(t)>0};xe.greaterThanOrEqualTo=xe.gte=function(t){var e=this.cmp(t);return e==1||e===0};xe.hyperbolicCosine=xe.cosh=function(){var t,e,n,o,i,s=this,r=s.constructor,l=new r(1);if(!s.isFinite())return new r(s.s?1/0:NaN);if(s.isZero())return l;n=r.precision,o=r.rounding,r.precision=n+Math.max(s.e,s.sd())+4,r.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),e=(1/al(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=ii(r,1,s.times(e),new r(1),!0);for(var a,d=t,h=new r(8);d--;)a=s.times(s),s=l.minus(a.times(h.minus(a.times(h))));return He(s,r.precision=n,r.rounding=o,!0)};xe.hyperbolicSine=xe.sinh=function(){var t,e,n,o,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,o=i.d.length,o<3)i=ii(s,2,i,i,!0);else{t=1.4*Math.sqrt(o),t=t>16?16:t|0,i=i.times(1/al(5,t)),i=ii(s,2,i,i,!0);for(var r,l=new s(5),a=new s(16),d=new s(20);t--;)r=i.times(i),i=i.times(l.plus(r.times(a.times(r).plus(d))))}return s.precision=e,s.rounding=n,He(i,e,n,!0)};xe.hyperbolicTangent=xe.tanh=function(){var t,e,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(t=o.precision,e=o.rounding,o.precision=t+7,o.rounding=1,Ot(n.sinh(),n.cosh(),o.precision=t,o.rounding=e)):new o(n.s)};xe.inverseCosine=xe.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),o=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?co(e,o,i):new e(0):new e(NaN):t.isZero()?co(e,o+4,i).times(.5):(e.precision=o+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=o,e.rounding=i,t.times(2))};xe.inverseHyperbolicCosine=xe.acosh=function(){var t,e,n=this,o=n.constructor;return n.lte(1)?new o(n.eq(1)?0:NaN):n.isFinite()?(t=o.precision,e=o.rounding,o.precision=t+Math.max(Math.abs(n.e),n.sd())+4,o.rounding=1,Qe=!1,n=n.times(n).minus(1).sqrt().plus(n),Qe=!0,o.precision=t,o.rounding=e,n.ln()):new o(n)};xe.inverseHyperbolicSine=xe.asinh=function(){var t,e,n=this,o=n.constructor;return!n.isFinite()||n.isZero()?new o(n):(t=o.precision,e=o.rounding,o.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,o.rounding=1,Qe=!1,n=n.times(n).plus(1).sqrt().plus(n),Qe=!0,o.precision=t,o.rounding=e,n.ln())};xe.inverseHyperbolicTangent=xe.atanh=function(){var t,e,n,o,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,o=i.sd(),Math.max(o,t)<2*-i.e-1?He(new s(i),t,e,!0):(s.precision=n=o-i.e,i=Ot(i.plus(1),new s(1).minus(i),n+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)};xe.inverseSine=xe.asin=function(){var t,e,n,o,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),n=s.precision,o=s.rounding,e!==-1?e===0?(t=co(s,n+4,o).times(.5),t.s=i.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=o,i.times(2)))};xe.inverseTangent=xe.atan=function(){var t,e,n,o,i,s,r,l,a,d=this,h=d.constructor,c=h.precision,p=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&c+4<=Aa)return r=co(h,c+4,p).times(.25),r.s=d.s,r}else{if(!d.s)return new h(NaN);if(c+4<=Aa)return r=co(h,c+4,p).times(.5),r.s=d.s,r}for(h.precision=l=c+10,h.rounding=1,n=Math.min(28,l/Ye+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(Qe=!1,e=Math.ceil(l/Ye),o=1,a=d.times(d),r=new h(d),i=d;t!==-1;)if(i=i.times(a),s=r.minus(i.div(o+=2)),i=i.times(a),r=s.plus(i.div(o+=2)),r.d[e]!==void 0)for(t=e;r.d[t]===s.d[t]&&t--;);return n&&(r=r.times(2<<n-1)),Qe=!0,He(r,h.precision=c,h.rounding=p,!0)};xe.isFinite=function(){return!!this.d};xe.isInteger=xe.isInt=function(){return!!this.d&&vn(this.e/Ye)>this.d.length-2};xe.isNaN=function(){return!this.s};xe.isNegative=xe.isNeg=function(){return this.s<0};xe.isPositive=xe.isPos=function(){return this.s>0};xe.isZero=function(){return!!this.d&&this.d[0]===0};xe.lessThan=xe.lt=function(t){return this.cmp(t)<0};xe.lessThanOrEqualTo=xe.lte=function(t){return this.cmp(t)<1};xe.logarithm=xe.log=function(t){var e,n,o,i,s,r,l,a,d=this,h=d.constructor,c=h.precision,p=h.rounding,m=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Qe=!1,l=c+m,r=Go(d,l),o=e?Kr(h,l+10):Go(t,l),a=Ot(r,o,l,1),Ui(a.d,i=c,p))do if(l+=10,r=Go(d,l),o=e?Kr(h,l+10):Go(t,l),a=Ot(r,o,l,1),!s){+cn(a.d).slice(i+1,i+15)+1==1e14&&(a=He(a,c+1,0));break}while(Ui(a.d,i+=10,p));return Qe=!0,He(a,c,p)};xe.minus=xe.sub=function(t){var e,n,o,i,s,r,l,a,d,h,c,p,m=this,g=m.constructor;if(t=new g(t),!m.d||!t.d)return!m.s||!t.s?t=new g(NaN):m.d?t.s=-t.s:t=new g(t.d||m.s!==t.s?m:NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(d=m.d,p=t.d,l=g.precision,a=g.rounding,!d[0]||!p[0]){if(p[0])t.s=-t.s;else if(d[0])t=new g(m);else return new g(a===3?-0:0);return Qe?He(t,l,a):t}if(n=vn(t.e/Ye),h=vn(m.e/Ye),d=d.slice(),s=h-n,s){for(c=s<0,c?(e=d,s=-s,r=p.length):(e=p,n=h,r=d.length),o=Math.max(Math.ceil(l/Ye),r)+2,s>o&&(s=o,e.length=1),e.reverse(),o=s;o--;)e.push(0);e.reverse()}else{for(o=d.length,r=p.length,c=o<r,c&&(r=o),o=0;o<r;o++)if(d[o]!=p[o]){c=d[o]<p[o];break}s=0}for(c&&(e=d,d=p,p=e,t.s=-t.s),r=d.length,o=p.length-r;o>0;--o)d[r++]=0;for(o=p.length;o>s;){if(d[--o]<p[o]){for(i=o;i&&d[--i]===0;)d[i]=Gn-1;--d[i],d[o]+=Gn}d[o]-=p[o]}for(;d[--r]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=ll(d,n),Qe?He(t,l,a):t):new g(a===3?-0:0)};xe.modulo=xe.mod=function(t){var e,n=this,o=n.constructor;return t=new o(t),!n.d||!t.s||t.d&&!t.d[0]?new o(NaN):!t.d||n.d&&!n.d[0]?He(new o(n),o.precision,o.rounding):(Qe=!1,o.modulo==9?(e=Ot(n,t.abs(),0,3,1),e.s*=t.s):e=Ot(n,t,0,o.modulo,1),e=e.times(t),Qe=!0,n.minus(e))};xe.naturalExponential=xe.exp=function(){return Sa(this)};xe.naturalLogarithm=xe.ln=function(){return Go(this)};xe.negated=xe.neg=function(){var t=new this.constructor(this);return t.s=-t.s,He(t)};xe.plus=xe.add=function(t){var e,n,o,i,s,r,l,a,d,h,c=this,p=c.constructor;if(t=new p(t),!c.d||!t.d)return!c.s||!t.s?t=new p(NaN):c.d||(t=new p(t.d||c.s===t.s?c:NaN)),t;if(c.s!=t.s)return t.s=-t.s,c.minus(t);if(d=c.d,h=t.d,l=p.precision,a=p.rounding,!d[0]||!h[0])return h[0]||(t=new p(c)),Qe?He(t,l,a):t;if(s=vn(c.e/Ye),o=vn(t.e/Ye),d=d.slice(),i=s-o,i){for(i<0?(n=d,i=-i,r=h.length):(n=h,o=s,r=d.length),s=Math.ceil(l/Ye),r=s>r?s+1:r+1,i>r&&(i=r,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(r=d.length,i=h.length,r-i<0&&(i=r,n=h,h=d,d=n),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/Gn|0,d[i]%=Gn;for(e&&(d.unshift(e),++o),r=d.length;d[--r]==0;)d.pop();return t.d=d,t.e=ll(d,o),Qe?He(t,l,a):t};xe.precision=xe.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ss+t);return n.d?(e=Sh(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};xe.round=function(){var t=this,e=t.constructor;return He(new e(t),t.e+1,e.rounding)};xe.sine=xe.sin=function(){var t,e,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(t=o.precision,e=o.rounding,o.precision=t+Math.max(n.e,n.sd())+Ye,o.rounding=1,n=B0(o,Th(o,n)),o.precision=t,o.rounding=e,He(Eo>2?n.neg():n,t,e,!0)):new o(NaN)};xe.squareRoot=xe.sqrt=function(){var t,e,n,o,i,s,r=this,l=r.d,a=r.e,d=r.s,h=r.constructor;if(d!==1||!l||!l[0])return new h(!d||d<0&&(!l||l[0])?NaN:l?r:1/0);for(Qe=!1,d=Math.sqrt(+r),d==0||d==1/0?(e=cn(l),(e.length+a)%2==0&&(e+="0"),d=Math.sqrt(e),a=vn((a+1)/2)-(a<0||a%2),d==1/0?e="5e"+a:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+a),o=new h(e)):o=new h(d.toString()),n=(a=h.precision)+3;;)if(s=o,o=s.plus(Ot(r,s,n+2,1)).times(.5),cn(s.d).slice(0,n)===(e=cn(o.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(He(s,a+1,0),s.times(s).eq(r))){o=s;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(He(o,a+1,1),t=!o.times(o).eq(r));break}return Qe=!0,He(o,a,h.rounding,t)};xe.tangent=xe.tan=function(){var t,e,n=this,o=n.constructor;return n.isFinite()?n.isZero()?new o(n):(t=o.precision,e=o.rounding,o.precision=t+10,o.rounding=1,n=n.sin(),n.s=1,n=Ot(n,new o(1).minus(n.times(n)).sqrt(),t+10,0),o.precision=t,o.rounding=e,He(Eo==2||Eo==4?n.neg():n,t,e,!0)):new o(NaN)};xe.times=xe.mul=function(t){var e,n,o,i,s,r,l,a,d,h=this,c=h.constructor,p=h.d,m=(t=new c(t)).d;if(t.s*=h.s,!p||!p[0]||!m||!m[0])return new c(!t.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:!p||!m?t.s/0:t.s*0);for(n=vn(h.e/Ye)+vn(t.e/Ye),a=p.length,d=m.length,a<d&&(s=p,p=m,m=s,r=a,a=d,d=r),s=[],r=a+d,o=r;o--;)s.push(0);for(o=d;--o>=0;){for(e=0,i=a+o;i>o;)l=s[i]+m[o]*p[i-o-1]+e,s[i--]=l%Gn|0,e=l/Gn|0;s[i]=(s[i]+e)%Gn|0}for(;!s[--r];)s.pop();return e?++n:s.shift(),t.d=s,t.e=ll(s,n),Qe?He(t,c.precision,c.rounding):t};xe.toBinary=function(t,e){return lu(this,2,t,e)};xe.toDecimalPlaces=xe.toDP=function(t,e){var n=this,o=n.constructor;return n=new o(n),t===void 0?n:(Fn(t,0,as),e===void 0?e=o.rounding:Fn(e,0,8),He(n,t+n.e+1,e))};xe.toExponential=function(t,e){var n,o=this,i=o.constructor;return t===void 0?n=po(o,!0):(Fn(t,0,as),e===void 0?e=i.rounding:Fn(e,0,8),o=He(new i(o),t+1,e),n=po(o,!0,t+1)),o.isNeg()&&!o.isZero()?"-"+n:n};xe.toFixed=function(t,e){var n,o,i=this,s=i.constructor;return t===void 0?n=po(i):(Fn(t,0,as),e===void 0?e=s.rounding:Fn(e,0,8),o=He(new s(i),t+i.e+1,e),n=po(o,!1,t+o.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};xe.toFraction=function(t){var e,n,o,i,s,r,l,a,d,h,c,p,m=this,g=m.d,D=m.constructor;if(!g)return new D(m);if(d=n=new D(1),o=a=new D(0),e=new D(o),s=e.e=Sh(g)-m.e-1,r=s%Ye,e.d[0]=on(10,r<0?Ye+r:r),t==null)t=s>0?e:d;else{if(l=new D(t),!l.isInt()||l.lt(d))throw Error(ss+l);t=l.gt(e)?s>0?e:d:l}for(Qe=!1,l=new D(cn(g)),h=D.precision,D.precision=s=g.length*Ye*2;c=Ot(l,e,0,1,1),i=n.plus(c.times(o)),i.cmp(t)!=1;)n=o,o=i,i=d,d=a.plus(c.times(i)),a=i,i=e,e=l.minus(c.times(i)),l=i;return i=Ot(t.minus(n),o,0,1,1),a=a.plus(i.times(d)),n=n.plus(i.times(o)),a.s=d.s=m.s,p=Ot(d,o,s,1).minus(m).abs().cmp(Ot(a,n,s,1).minus(m).abs())<1?[d,o]:[a,n],D.precision=h,Qe=!0,p};xe.toHexadecimal=xe.toHex=function(t,e){return lu(this,16,t,e)};xe.toNearest=function(t,e){var n=this,o=n.constructor;if(n=new o(n),t==null){if(!n.d)return n;t=new o(1),e=o.rounding}else{if(t=new o(t),e===void 0?e=o.rounding:Fn(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Qe=!1,n=Ot(n,t,0,e,1).times(t),Qe=!0,He(n)):(t.s=n.s,n=t),n};xe.toNumber=function(){return+this};xe.toOctal=function(t,e){return lu(this,8,t,e)};xe.toPower=xe.pow=function(t){var e,n,o,i,s,r,l=this,a=l.constructor,d=+(t=new a(t));if(!l.d||!t.d||!l.d[0]||!t.d[0])return new a(on(+l,d));if(l=new a(l),l.eq(1))return l;if(o=a.precision,s=a.rounding,t.eq(1))return He(l,o,s);if(e=vn(t.e/Ye),e>=t.d.length-1&&(n=d<0?-d:d)<=I0)return i=Fh(a,l,n,o),t.s<0?new a(1).div(i):He(i,o,s);if(r=l.s,r<0){if(e<t.d.length-1)return new a(NaN);if((t.d[e]&1)==0&&(r=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=r,l}return n=on(+l,d),e=n==0||!isFinite(n)?vn(d*(Math.log("0."+cn(l.d))/Math.LN10+l.e+1)):new a(n+"").e,e>a.maxE+1||e<a.minE-1?new a(e>0?r/0:0):(Qe=!1,a.rounding=l.s=1,n=Math.min(12,(e+"").length),i=Sa(t.times(Go(l,o+n)),o),i.d&&(i=He(i,o+5,1),Ui(i.d,o,s)&&(e=o+10,i=He(Sa(t.times(Go(l,e+n)),e),e+5,1),+cn(i.d).slice(o+1,o+15)+1==1e14&&(i=He(i,o+1,0)))),i.s=r,Qe=!0,a.rounding=s,He(i,o,s))};xe.toPrecision=function(t,e){var n,o=this,i=o.constructor;return t===void 0?n=po(o,o.e<=i.toExpNeg||o.e>=i.toExpPos):(Fn(t,1,as),e===void 0?e=i.rounding:Fn(e,0,8),o=He(new i(o),t,e),n=po(o,t<=o.e||o.e<=i.toExpNeg,t)),o.isNeg()&&!o.isZero()?"-"+n:n};xe.toSignificantDigits=xe.toSD=function(t,e){var n=this,o=n.constructor;return t===void 0?(t=o.precision,e=o.rounding):(Fn(t,1,as),e===void 0?e=o.rounding:Fn(e,0,8)),He(new o(n),t,e)};xe.toString=function(){var t=this,e=t.constructor,n=po(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};xe.truncated=xe.trunc=function(){return He(new this.constructor(this),this.e+1,1)};xe.valueOf=xe.toJSON=function(){var t=this,e=t.constructor,n=po(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function cn(t){var e,n,o,i=t.length-1,s="",r=t[0];if(i>0){for(s+=r,e=1;e<i;e++)o=t[e]+"",n=Ye-o.length,n&&(s+=Wo(n)),s+=o;r=t[e],o=r+"",n=Ye-o.length,n&&(s+=Wo(n))}else if(r===0)return"0";for(;r%10===0;)r/=10;return s+r}function Fn(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ss+t)}function Ui(t,e,n,o){var i,s,r,l;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=Ye,i=0):(i=Math.ceil((e+1)/Ye),e%=Ye),s=on(10,Ye-e),l=t[i]%s|0,o==null?e<3?(e==0?l=l/100|0:e==1&&(l=l/10|0),r=n<4&&l==99999||n>3&&l==49999||l==5e4||l==0):r=(n<4&&l+1==s||n>3&&l+1==s/2)&&(t[i+1]/s/100|0)==on(10,e-2)-1||(l==s/2||l==0)&&(t[i+1]/s/100|0)==0:e<4?(e==0?l=l/1e3|0:e==1?l=l/100|0:e==2&&(l=l/10|0),r=(o||n<4)&&l==9999||!o&&n>3&&l==4999):r=((o||n<4)&&l+1==s||!o&&n>3&&l+1==s/2)&&(t[i+1]/s/1e3|0)==on(10,e-3)-1,r}function Ar(t,e,n){for(var o,i=[0],s,r=0,l=t.length;r<l;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=Ca.indexOf(t.charAt(r++)),o=0;o<i.length;o++)i[o]>n-1&&(i[o+1]===void 0&&(i[o+1]=0),i[o+1]+=i[o]/n|0,i[o]%=n)}return i.reverse()}function R0(t,e){var n,o,i;if(e.isZero())return e;o=e.d.length,o<32?(n=Math.ceil(o/3),i=(1/al(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=ii(t,1,e.times(i),new t(1));for(var s=n;s--;){var r=e.times(e);e=r.times(r).minus(r).times(8).plus(1)}return t.precision-=n,e}var Ot=(function(){function t(o,i,s){var r,l=0,a=o.length;for(o=o.slice();a--;)r=o[a]*i+l,o[a]=r%s|0,l=r/s|0;return l&&o.unshift(l),o}function e(o,i,s,r){var l,a;if(s!=r)a=s>r?1:-1;else for(l=a=0;l<s;l++)if(o[l]!=i[l]){a=o[l]>i[l]?1:-1;break}return a}function n(o,i,s,r){for(var l=0;s--;)o[s]-=l,l=o[s]<i[s]?1:0,o[s]=l*r+o[s]-i[s];for(;!o[0]&&o.length>1;)o.shift()}return function(o,i,s,r,l,a){var d,h,c,p,m,g,D,T,y,C,M,E,R,L,B,x,I,N,z,F,te=o.constructor,H=o.s==i.s?1:-1,Q=o.d,W=i.d;if(!Q||!Q[0]||!W||!W[0])return new te(!o.s||!i.s||(Q?W&&Q[0]==W[0]:!W)?NaN:Q&&Q[0]==0||!W?H*0:H/0);for(a?(m=1,h=o.e-i.e):(a=Gn,m=Ye,h=vn(o.e/m)-vn(i.e/m)),z=W.length,I=Q.length,y=new te(H),C=y.d=[],c=0;W[c]==(Q[c]||0);c++);if(W[c]>(Q[c]||0)&&h--,s==null?(L=s=te.precision,r=te.rounding):l?L=s+(o.e-i.e)+1:L=s,L<0)C.push(1),g=!0;else{if(L=L/m+2|0,c=0,z==1){for(p=0,W=W[0],L++;(c<I||p)&&L--;c++)B=p*a+(Q[c]||0),C[c]=B/W|0,p=B%W|0;g=p||c<I}else{for(p=a/(W[0]+1)|0,p>1&&(W=t(W,p,a),Q=t(Q,p,a),z=W.length,I=Q.length),x=z,M=Q.slice(0,z),E=M.length;E<z;)M[E++]=0;F=W.slice(),F.unshift(0),N=W[0],W[1]>=a/2&&++N;do p=0,d=e(W,M,z,E),d<0?(R=M[0],z!=E&&(R=R*a+(M[1]||0)),p=R/N|0,p>1?(p>=a&&(p=a-1),D=t(W,p,a),T=D.length,E=M.length,d=e(D,M,T,E),d==1&&(p--,n(D,z<T?F:W,T,a))):(p==0&&(d=p=1),D=W.slice()),T=D.length,T<E&&D.unshift(0),n(M,D,E,a),d==-1&&(E=M.length,d=e(W,M,z,E),d<1&&(p++,n(M,z<E?F:W,E,a))),E=M.length):d===0&&(p++,M=[0]),C[c++]=p,d&&M[0]?M[E++]=Q[x]||0:(M=[Q[x]],E=1);while((x++<I||M[0]!==void 0)&&L--);g=M[0]!==void 0}C[0]||C.shift()}if(m==1)y.e=h,Dh=g;else{for(c=1,p=C[0];p>=10;p/=10)c++;y.e=c+h*m-1,He(y,l?s+y.e+1:s,r,g)}return y}})();function He(t,e,n,o){var i,s,r,l,a,d,h,c,p,m=t.constructor;e:if(e!=null){if(c=t.d,!c)return t;for(i=1,l=c[0];l>=10;l/=10)i++;if(s=e-i,s<0)s+=Ye,r=e,h=c[p=0],a=h/on(10,i-r-1)%10|0;else if(p=Math.ceil((s+1)/Ye),l=c.length,p>=l)if(o){for(;l++<=p;)c.push(0);h=a=0,i=1,s%=Ye,r=s-Ye+1}else break e;else{for(h=l=c[p],i=1;l>=10;l/=10)i++;s%=Ye,r=s-Ye+i,a=r<0?0:h/on(10,i-r-1)%10|0}if(o=o||e<0||c[p+1]!==void 0||(r<0?h:h%on(10,i-r-1)),d=n<4?(a||o)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||o||n==6&&(s>0?r>0?h/on(10,i-r):0:c[p-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,d?(e-=t.e+1,c[0]=on(10,(Ye-e%Ye)%Ye),t.e=-e||0):c[0]=t.e=0,t;if(s==0?(c.length=p,l=1,p--):(c.length=p+1,l=on(10,Ye-s),c[p]=r>0?(h/on(10,i-r)%on(10,r)|0)*l:0),d)for(;;)if(p==0){for(s=1,r=c[0];r>=10;r/=10)s++;for(r=c[0]+=l,l=1;r>=10;r/=10)l++;s!=l&&(t.e++,c[0]==Gn&&(c[0]=1));break}else{if(c[p]+=l,c[p]!=Gn)break;c[p--]=0,l=1}for(s=c.length;c[--s]===0;)c.pop()}return Qe&&(t.e>m.maxE?(t.d=null,t.e=NaN):t.e<m.minE&&(t.e=0,t.d=[0])),t}function po(t,e,n){if(!t.isFinite())return Mh(t);var o,i=t.e,s=cn(t.d),r=s.length;return e?(n&&(o=n-r)>0?s=s.charAt(0)+"."+s.slice(1)+Wo(o):r>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+Wo(-i-1)+s,n&&(o=n-r)>0&&(s+=Wo(o))):i>=r?(s+=Wo(i+1-r),n&&(o=n-i-1)>0&&(s=s+"."+Wo(o))):((o=i+1)<r&&(s=s.slice(0,o)+"."+s.slice(o)),n&&(o=n-r)>0&&(i+1===r&&(s+="."),s+=Wo(o))),s}function ll(t,e){var n=t[0];for(e*=Ye;n>=10;n/=10)e++;return e}function Kr(t,e,n){if(e>O0)throw Qe=!0,n&&(t.precision=n),Error(_h);return He(new t(Nr),e,1,!0)}function co(t,e,n){if(e>Aa)throw Error(_h);return He(new t(Vr),e,n,!0)}function Sh(t){var e=t.length-1,n=e*Ye+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Wo(t){for(var e="";t--;)e+="0";return e}function Fh(t,e,n,o){var i,s=new t(1),r=Math.ceil(o/Ye+4);for(Qe=!1;;){if(n%2&&(s=s.times(e),Sd(s.d,r)&&(i=!0)),n=vn(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}e=e.times(e),Sd(e.d,r)}return Qe=!0,s}function Ad(t){return t.d[t.d.length-1]&1}function kh(t,e,n){for(var o,i,s=new t(e[0]),r=0;++r<e.length;){if(i=new t(e[r]),!i.s){s=i;break}o=s.cmp(i),(o===n||o===0&&s.s===n)&&(s=i)}return s}function Sa(t,e){var n,o,i,s,r,l,a,d=0,h=0,c=0,p=t.constructor,m=p.rounding,g=p.precision;if(!t.d||!t.d[0]||t.e>17)return new p(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Qe=!1,a=g):a=e,l=new p(.03125);t.e>-2;)t=t.times(l),c+=5;for(o=Math.log(on(2,c))/Math.LN10*2+5|0,a+=o,n=s=r=new p(1),p.precision=a;;){if(s=He(s.times(t),a,1),n=n.times(++h),l=r.plus(Ot(s,n,a,1)),cn(l.d).slice(0,a)===cn(r.d).slice(0,a)){for(i=c;i--;)r=He(r.times(r),a,1);if(e==null)if(d<3&&Ui(r.d,a-o,m,d))p.precision=a+=10,n=s=l=new p(1),h=0,d++;else return He(r,p.precision=g,m,Qe=!0);else return p.precision=g,r}r=l}}function Go(t,e){var n,o,i,s,r,l,a,d,h,c,p,m=1,g=10,D=t,T=D.d,y=D.constructor,C=y.rounding,M=y.precision;if(D.s<0||!T||!T[0]||!D.e&&T[0]==1&&T.length==1)return new y(T&&!T[0]?-1/0:D.s!=1?NaN:T?0:D);if(e==null?(Qe=!1,h=M):h=e,y.precision=h+=g,n=cn(T),o=n.charAt(0),Math.abs(s=D.e)<15e14){for(;o<7&&o!=1||o==1&&n.charAt(1)>3;)D=D.times(t),n=cn(D.d),o=n.charAt(0),m++;s=D.e,o>1?(D=new y("0."+n),s++):D=new y(o+"."+n.slice(1))}else return d=Kr(y,h+2,M).times(s+""),D=Go(new y(o+"."+n.slice(1)),h-g).plus(d),y.precision=M,e==null?He(D,M,C,Qe=!0):D;for(c=D,a=r=D=Ot(D.minus(1),D.plus(1),h,1),p=He(D.times(D),h,1),i=3;;){if(r=He(r.times(p),h,1),d=a.plus(Ot(r,new y(i),h,1)),cn(d.d).slice(0,h)===cn(a.d).slice(0,h))if(a=a.times(2),s!==0&&(a=a.plus(Kr(y,h+2,M).times(s+""))),a=Ot(a,new y(m),h,1),e==null)if(Ui(a.d,h-g,C,l))y.precision=h+=g,d=r=D=Ot(c.minus(1),c.plus(1),h,1),p=He(D.times(D),h,1),i=l=1;else return He(a,y.precision=M,C,Qe=!0);else return y.precision=M,a;a=d,i+=2}}function Mh(t){return String(t.s*t.s/0)}function Sr(t,e){var n,o,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(n<0&&(n=o),n+=+e.slice(o+1),e=e.substring(0,o)):n<0&&(n=e.length),o=0;e.charCodeAt(o)===48;o++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(o,i),e){if(i-=o,t.e=n=n-o-1,t.d=[],o=(n+1)%Ye,n<0&&(o+=Ye),o<i){for(o&&t.d.push(+e.slice(0,o)),i-=Ye;o<i;)t.d.push(+e.slice(o,o+=Ye));e=e.slice(o),o=Ye-e.length}else o-=i;for(;o--;)e+="0";t.d.push(+e),Qe&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function P0(t,e){var n,o,i,s,r,l,a,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Ah.test(e))return Sr(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if($0.test(e))n=16,e=e.toLowerCase();else if(T0.test(e))n=2;else if(L0.test(e))n=8;else throw Error(ss+e);for(s=e.search(/p/i),s>0?(a=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),r=s>=0,o=t.constructor,r&&(e=e.replace(".",""),l=e.length,s=l-s,i=Fh(o,new o(n),s,s*2)),d=Ar(e,n,Gn),h=d.length-1,s=h;d[s]===0;--s)d.pop();return s<0?new o(t.s*0):(t.e=ll(d,h),t.d=d,Qe=!1,r&&(t=Ot(t,i,l*4)),a&&(t=t.times(Math.abs(a)<54?on(2,a):tt.pow(2,a))),Qe=!0,t)}function B0(t,e){var n,o=e.d.length;if(o<3)return e.isZero()?e:ii(t,2,e,e);n=1.4*Math.sqrt(o),n=n>16?16:n|0,e=e.times(1/al(5,n)),e=ii(t,2,e,e);for(var i,s=new t(5),r=new t(16),l=new t(20);n--;)i=e.times(e),e=e.times(s.plus(i.times(r.times(i).minus(l))));return e}function ii(t,e,n,o,i){var s,r,l,a,d=t.precision,h=Math.ceil(d/Ye);for(Qe=!1,a=n.times(n),l=new t(o);;){if(r=Ot(l.times(a),new t(e++*e++),d,1),l=i?o.plus(r):o.minus(r),o=Ot(r.times(a),new t(e++*e++),d,1),r=l.plus(o),r.d[h]!==void 0){for(s=h;r.d[s]===l.d[s]&&s--;);if(s==-1)break}s=l,l=o,o=r,r=s}return Qe=!0,r.d.length=h+1,r}function al(t,e){for(var n=t;--e;)n*=t;return n}function Th(t,e){var n,o=e.s<0,i=co(t,t.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return Eo=o?4:1,e;if(n=e.divToInt(i),n.isZero())Eo=o?3:2;else{if(e=e.minus(n.times(i)),e.lte(s))return Eo=Ad(n)?o?2:3:o?4:1,e;Eo=Ad(n)?o?1:4:o?3:2}return e.minus(i).abs()}function lu(t,e,n,o){var i,s,r,l,a,d,h,c,p,m=t.constructor,g=n!==void 0;if(g?(Fn(n,1,as),o===void 0?o=m.rounding:Fn(o,0,8)):(n=m.precision,o=m.rounding),!t.isFinite())h=Mh(t);else{for(h=po(t),r=h.indexOf("."),g?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,r>=0&&(h=h.replace(".",""),p=new m(1),p.e=h.length-r,p.d=Ar(po(p),10,i),p.e=p.d.length),c=Ar(h,10,i),s=a=c.length;c[--a]==0;)c.pop();if(!c[0])h=g?"0p+0":"0";else{if(r<0?s--:(t=new m(t),t.d=c,t.e=s,t=Ot(t,p,n,o,0,i),c=t.d,s=t.e,d=Dh),r=c[n],l=i/2,d=d||c[n+1]!==void 0,d=o<4?(r!==void 0||d)&&(o===0||o===(t.s<0?3:2)):r>l||r===l&&(o===4||d||o===6&&c[n-1]&1||o===(t.s<0?8:7)),c.length=n,d)for(;++c[--n]>i-1;)c[n]=0,n||(++s,c.unshift(1));for(a=c.length;!c[a-1];--a);for(r=0,h="";r<a;r++)h+=Ca.charAt(c[r]);if(g){if(a>1)if(e==16||e==8){for(r=e==16?4:3,--a;a%r;a++)h+="0";for(c=Ar(h,i,e),a=c.length;!c[a-1];--a);for(r=1,h="1.";r<a;r++)h+=Ca.charAt(c[r])}else h=h.charAt(0)+"."+h.slice(1);h=h+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)h="0"+h;h="0."+h}else if(++s>a)for(s-=a;s--;)h+="0";else s<a&&(h=h.slice(0,s)+"."+h.slice(s))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function Sd(t,e){if(t.length>e)return t.length=e,!0}function N0(t){return new this(t).abs()}function V0(t){return new this(t).acos()}function K0(t){return new this(t).acosh()}function z0(t,e){return new this(t).plus(e)}function U0(t){return new this(t).asin()}function H0(t){return new this(t).asinh()}function j0(t){return new this(t).atan()}function W0(t){return new this(t).atanh()}function q0(t,e){t=new this(t),e=new this(e);var n,o=this.precision,i=this.rounding,s=o+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=co(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?co(this,o,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=co(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(Ot(t,e,s,1)),e=co(this,s,1),this.precision=o,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Ot(t,e,s,1)),n}function Y0(t){return new this(t).cbrt()}function X0(t){return He(t=new this(t),t.e+1,2)}function J0(t,e,n){return new this(t).clamp(e,n)}function G0(t){if(!t||typeof t!="object")throw Error(rl+"Object expected");var e,n,o,i=t.defaults===!0,s=["precision",1,as,"rounding",0,8,"toExpNeg",-Gs,0,"toExpPos",0,Gs,"maxE",0,Gs,"minE",-Gs,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],i&&(this[n]=Ea[n]),(o=t[n])!==void 0)if(vn(o)===o&&o>=s[e+1]&&o<=s[e+2])this[n]=o;else throw Error(ss+n+": "+o);if(n="crypto",i&&(this[n]=Ea[n]),(o=t[n])!==void 0)if(o===!0||o===!1||o===0||o===1)if(o)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Ch);else this[n]=!1;else throw Error(ss+n+": "+o);return this}function Z0(t){return new this(t).cos()}function Q0(t){return new this(t).cosh()}function $h(t){var e,n,o;function i(s){var r,l,a,d=this;if(!(d instanceof i))return new i(s);if(d.constructor=i,Fd(s)){d.s=s.s,Qe?!s.d||s.e>i.maxE?(d.e=NaN,d.d=null):s.e<i.minE?(d.e=0,d.d=[0]):(d.e=s.e,d.d=s.d.slice()):(d.e=s.e,d.d=s.d?s.d.slice():s.d);return}if(a=typeof s,a==="number"){if(s===0){d.s=1/s<0?-1:1,d.e=0,d.d=[0];return}if(s<0?(s=-s,d.s=-1):d.s=1,s===~~s&&s<1e7){for(r=0,l=s;l>=10;l/=10)r++;Qe?r>i.maxE?(d.e=NaN,d.d=null):r<i.minE?(d.e=0,d.d=[0]):(d.e=r,d.d=[s]):(d.e=r,d.d=[s]);return}if(s*0!==0){s||(d.s=NaN),d.e=NaN,d.d=null;return}return Sr(d,s.toString())}if(a==="string")return(l=s.charCodeAt(0))===45?(s=s.slice(1),d.s=-1):(l===43&&(s=s.slice(1)),d.s=1),Ah.test(s)?Sr(d,s):P0(d,s);if(a==="bigint")return s<0?(s=-s,d.s=-1):d.s=1,Sr(d,s.toString());throw Error(ss+s)}if(i.prototype=xe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=G0,i.clone=$h,i.isDecimal=Fd,i.abs=N0,i.acos=V0,i.acosh=K0,i.add=z0,i.asin=U0,i.asinh=H0,i.atan=j0,i.atanh=W0,i.atan2=q0,i.cbrt=Y0,i.ceil=X0,i.clamp=J0,i.cos=Z0,i.cosh=Q0,i.div=e1,i.exp=t1,i.floor=n1,i.hypot=o1,i.ln=s1,i.log=i1,i.log10=l1,i.log2=r1,i.max=a1,i.min=u1,i.mod=c1,i.mul=d1,i.pow=f1,i.random=h1,i.round=p1,i.sign=v1,i.sin=m1,i.sinh=g1,i.sqrt=b1,i.sub=y1,i.sum=w1,i.tan=x1,i.tanh=D1,i.trunc=_1,t===void 0&&(t={}),t&&t.defaults!==!0)for(o=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<o.length;)t.hasOwnProperty(n=o[e++])||(t[n]=this[n]);return i.config(t),i}function e1(t,e){return new this(t).div(e)}function t1(t){return new this(t).exp()}function n1(t){return He(t=new this(t),t.e+1,3)}function o1(){var t,e,n=new this(0);for(Qe=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Qe=!0,new this(1/0);n=e}return Qe=!0,n.sqrt()}function Fd(t){return t instanceof tt||t&&t.toStringTag===Eh||!1}function s1(t){return new this(t).ln()}function i1(t,e){return new this(t).log(e)}function r1(t){return new this(t).log(2)}function l1(t){return new this(t).log(10)}function a1(){return kh(this,arguments,-1)}function u1(){return kh(this,arguments,1)}function c1(t,e){return new this(t).mod(e)}function d1(t,e){return new this(t).mul(e)}function f1(t,e){return new this(t).pow(e)}function h1(t){var e,n,o,i,s=0,r=new this(1),l=[];if(t===void 0?t=this.precision:Fn(t,1,as),o=Math.ceil(t/Ye),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(o));s<o;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(o*=4);s<o;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(l.push(i%1e7),s+=4);s=o/4}else throw Error(Ch);else for(;s<o;)l[s++]=Math.random()*1e7|0;for(o=l[--s],t%=Ye,o&&t&&(i=on(10,Ye-t),l[s]=(o/i|0)*i);l[s]===0;s--)l.pop();if(s<0)n=0,l=[0];else{for(n=-1;l[0]===0;n-=Ye)l.shift();for(o=1,i=l[0];i>=10;i/=10)o++;o<Ye&&(n-=Ye-o)}return r.e=n,r.d=l,r}function p1(t){return He(t=new this(t),t.e+1,this.rounding)}function v1(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function m1(t){return new this(t).sin()}function g1(t){return new this(t).sinh()}function b1(t){return new this(t).sqrt()}function y1(t,e){return new this(t).sub(e)}function w1(){var t=0,e=arguments,n=new this(e[t]);for(Qe=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Qe=!0,He(n,this.precision,this.rounding)}function x1(t){return new this(t).tan()}function D1(t){return new this(t).tanh()}function _1(t){return He(t=new this(t),t.e+1,1)}xe[Symbol.for("nodejs.util.inspect.custom")]=xe.toString;xe[Symbol.toStringTag]="Decimal";var tt=xe.constructor=$h(Ea);Nr=new tt(Nr);Vr=new tt(Vr);tt.set({precision:15,rounding:tt.ROUND_HALF_UP,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15});class C1{static create(e){return new tt(e)}static add(e,n){return new tt(e).add(new tt(n)).toNumber()}static sub(e,n){return new tt(e).sub(new tt(n)).toNumber()}static mul(e,n){return new tt(e).mul(new tt(n)).toNumber()}static div(e,n){return new tt(e).div(new tt(n)).toNumber()}static round(e,n=0){return new tt(e).toDecimalPlaces(n).toNumber()}static roundToStep(e,n){const o=new tt(e),i=new tt(n);return o.div(i).round().mul(i).toNumber()}static min(...e){return e.reduce((n,o)=>{const i=new tt(o),s=new tt(n);return i.lt(s)?i.toNumber():s.toNumber()})}static max(...e){return e.reduce((n,o)=>{const i=new tt(o),s=new tt(n);return i.gt(s)?i.toNumber():s.toNumber()})}static abs(e){return new tt(e).abs().toNumber()}static sqrt(e){return new tt(e).sqrt().toNumber()}static pow(e,n){return new tt(e).pow(new tt(n)).toNumber()}static cos(e){return Math.cos(new tt(e).toNumber())}static sin(e){return Math.sin(new tt(e).toNumber())}static degreesToRadians(e){return new tt(e).mul(new tt(Math.PI)).div(180).toNumber()}static mod(e,n){return new tt(e).mod(new tt(n)).toNumber()}static equals(e,n,o=1e-10){return new tt(e).sub(new tt(n)).abs().lt(o)}static format(e,n=6){return new tt(e).toDecimalPlaces(n).toNumber()}static rotatePoint(e,n,o){const i=new tt(e),s=new tt(n),r=new tt(Math.cos(new tt(o).toNumber())),l=new tt(Math.sin(new tt(o).toNumber()));return{x:i.mul(r).sub(s.mul(l)).toNumber(),y:i.mul(l).add(s.mul(r)).toNumber()}}static mirrorPoint(e,n,o=0){const i=new tt(e),s=new tt(n),r=new tt(o);return new tt(2).mul(s).sub(i).sub(r).toNumber()}}const S=C1,yi=Y([]);let E1=1;function A1(){const t=l=>{const a={id:`toast-${E1++}`,type:"info",duration:4e3,showIcon:!0,showCloseButton:!0,...l};return yi.value.push(a),a.id};return{toasts:yi,showToast:t,removeToast:l=>{const a=yi.value.findIndex(d=>d.id===l);a>-1&&yi.value.splice(a,1)},clearToasts:()=>{yi.value=[]},showSuccess:(l,a,d)=>t({message:l,title:a,type:"success",...d}),showError:(l,a,d)=>t({message:l,title:a,type:"error",duration:6e3,...d}),showWarning:(l,a,d)=>t({message:l,title:a,type:"warning",duration:5e3,...d}),showInfo:(l,a,d)=>t({message:l,title:a,type:"info",...d})}}const Be=A1();typeof window<"u"&&(window.__kleToast=Be);var Zl={exports:{}},kd;function S1(){return kd||(kd=1,(function(t){var e=(function(){var n=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function r(a,d){if(!s[a]){s[a]={};for(var h=0;h<a.length;h++)s[a][a.charAt(h)]=h}return s[a][d]}var l={compressToBase64:function(a){if(a==null)return"";var d=l._compress(a,6,function(h){return o.charAt(h)});switch(d.length%4){default:case 0:return d;case 1:return d+"===";case 2:return d+"==";case 3:return d+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:l._decompress(a.length,32,function(d){return r(o,a.charAt(d))})},compressToUTF16:function(a){return a==null?"":l._compress(a,15,function(d){return n(d+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:l._decompress(a.length,16384,function(d){return a.charCodeAt(d)-32})},compressToUint8Array:function(a){for(var d=l.compress(a),h=new Uint8Array(d.length*2),c=0,p=d.length;c<p;c++){var m=d.charCodeAt(c);h[c*2]=m>>>8,h[c*2+1]=m%256}return h},decompressFromUint8Array:function(a){if(a==null)return l.decompress(a);for(var d=new Array(a.length/2),h=0,c=d.length;h<c;h++)d[h]=a[h*2]*256+a[h*2+1];var p=[];return d.forEach(function(m){p.push(n(m))}),l.decompress(p.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":l._compress(a,6,function(d){return i.charAt(d)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),l._decompress(a.length,32,function(d){return r(i,a.charAt(d))}))},compress:function(a){return l._compress(a,16,function(d){return n(d)})},_compress:function(a,d,h){if(a==null)return"";var c,p,m={},g={},D="",T="",y="",C=2,M=3,E=2,R=[],L=0,B=0,x;for(x=0;x<a.length;x+=1)if(D=a.charAt(x),Object.prototype.hasOwnProperty.call(m,D)||(m[D]=M++,g[D]=!0),T=y+D,Object.prototype.hasOwnProperty.call(m,T))y=T;else{if(Object.prototype.hasOwnProperty.call(g,y)){if(y.charCodeAt(0)<256){for(c=0;c<E;c++)L=L<<1,B==d-1?(B=0,R.push(h(L)),L=0):B++;for(p=y.charCodeAt(0),c=0;c<8;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1}else{for(p=1,c=0;c<E;c++)L=L<<1|p,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=0;for(p=y.charCodeAt(0),c=0;c<16;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1}C--,C==0&&(C=Math.pow(2,E),E++),delete g[y]}else for(p=m[y],c=0;c<E;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1;C--,C==0&&(C=Math.pow(2,E),E++),m[T]=M++,y=String(D)}if(y!==""){if(Object.prototype.hasOwnProperty.call(g,y)){if(y.charCodeAt(0)<256){for(c=0;c<E;c++)L=L<<1,B==d-1?(B=0,R.push(h(L)),L=0):B++;for(p=y.charCodeAt(0),c=0;c<8;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1}else{for(p=1,c=0;c<E;c++)L=L<<1|p,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=0;for(p=y.charCodeAt(0),c=0;c<16;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1}C--,C==0&&(C=Math.pow(2,E),E++),delete g[y]}else for(p=m[y],c=0;c<E;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1;C--,C==0&&(C=Math.pow(2,E),E++)}for(p=2,c=0;c<E;c++)L=L<<1|p&1,B==d-1?(B=0,R.push(h(L)),L=0):B++,p=p>>1;for(;;)if(L=L<<1,B==d-1){R.push(h(L));break}else B++;return R.join("")},decompress:function(a){return a==null?"":a==""?null:l._decompress(a.length,32768,function(d){return a.charCodeAt(d)})},_decompress:function(a,d,h){var c=[],p=4,m=4,g=3,D="",T=[],y,C,M,E,R,L,B,x={val:h(0),position:d,index:1};for(y=0;y<3;y+=1)c[y]=y;for(M=0,R=Math.pow(2,2),L=1;L!=R;)E=x.val&x.position,x.position>>=1,x.position==0&&(x.position=d,x.val=h(x.index++)),M|=(E>0?1:0)*L,L<<=1;switch(M){case 0:for(M=0,R=Math.pow(2,8),L=1;L!=R;)E=x.val&x.position,x.position>>=1,x.position==0&&(x.position=d,x.val=h(x.index++)),M|=(E>0?1:0)*L,L<<=1;B=n(M);break;case 1:for(M=0,R=Math.pow(2,16),L=1;L!=R;)E=x.val&x.position,x.position>>=1,x.position==0&&(x.position=d,x.val=h(x.index++)),M|=(E>0?1:0)*L,L<<=1;B=n(M);break;case 2:return""}for(c[3]=B,C=B,T.push(B);;){if(x.index>a)return"";for(M=0,R=Math.pow(2,g),L=1;L!=R;)E=x.val&x.position,x.position>>=1,x.position==0&&(x.position=d,x.val=h(x.index++)),M|=(E>0?1:0)*L,L<<=1;switch(B=M){case 0:for(M=0,R=Math.pow(2,8),L=1;L!=R;)E=x.val&x.position,x.position>>=1,x.position==0&&(x.position=d,x.val=h(x.index++)),M|=(E>0?1:0)*L,L<<=1;c[m++]=n(M),B=m-1,p--;break;case 1:for(M=0,R=Math.pow(2,16),L=1;L!=R;)E=x.val&x.position,x.position>>=1,x.position==0&&(x.position=d,x.val=h(x.index++)),M|=(E>0?1:0)*L,L<<=1;c[m++]=n(M),B=m-1,p--;break;case 2:return T.join("")}if(p==0&&(p=Math.pow(2,g),g++),c[B])D=c[B];else if(B===m)D=C+C.charAt(0);else return null;T.push(D),c[m++]=C+D.charAt(0),p--,C=D,p==0&&(p=Math.pow(2,g),g++)}}};return l})();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Zl)),Zl.exports}var Yi=S1();const ri=Nv(Yi);function F1(t){try{const e=new Ht.Keyboard;e.keys=t.keys,e.meta=t.metadata;const n=Ht.Serial.serialize(e),o=JSON.stringify(n);return Yi.compressToEncodedURIComponent(o)}catch(e){throw console.error("Error encoding layout to URL:",e),new Error("Failed to encode layout data")}}function Lh(t){try{const e=Yi.decompressFromEncodedURIComponent(t);if(!e)throw new Error("Failed to decompress data");const n=JSON.parse(e);if(!Array.isArray(n))throw new Error("Invalid KLE layout data structure");const o=Ht.Serial.deserialize(n);return{keys:o.keys,metadata:o.meta}}catch(e){throw console.error("Error decoding layout from URL:",e),new Error("Failed to decode layout data from URL")}}function k1(t,e){const n=F1(t);return`${window.location.origin+window.location.pathname}#share=${n}`}function M1(){try{const t=window.location.hash;if(!t.startsWith("#share="))return null;const e=t.substring(7);return Lh(e)}catch(t){return console.error("Error extracting layout from URL:",t),null}}function T1(){if(window.location.hash.startsWith("#share=")){const t=window.location.href.split("#")[0];window.history.replaceState({},document.title,t)}}function $1(){try{const t=window.location.hash;if(!t.startsWith("#url="))return null;const e=t.substring(5);return decodeURIComponent(e)}catch(t){return console.error("Error extracting URL from hash:",t),null}}function Ql(){try{const t=window.location.hash;if(!t.startsWith("#gist="))return null;const e=t.substring(6);if(e.startsWith("https://gist.github.com/")){const n=e.match(/https:\/\/gist\.github\.com\/[^/]+\/([a-f0-9]+)/);if(n&&n[1])return n[1];throw new Error("Invalid gist URL format")}if(/^[a-f0-9]+$/i.test(e))return e;throw new Error("Invalid gist ID format")}catch(t){return console.error("Error extracting gist from URL:",t),null}}function L1(t){const e=Object.keys(t),n=[/^layout\.json$/i,/^keyboard\.json$/i,/^kle\.json$/i,/layout/i,/keyboard/i,/\.json$/i];for(const o of n){const i=e.find(s=>o.test(s));if(i&&t[i])return t[i]}return null}async function Fr(t){try{const e=await fetch(`https://api.github.com/gists/${t}`,{headers:{Accept:"application/vnd.github+json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw e.status===404?new Error("Gist not found"):e.status===403?new Error("Rate limit exceeded or access denied"):new Error(`Failed to fetch gist: ${e.status}`);const n=await e.json(),o=L1(n.files);if(!o)throw new Error("No keyboard layout file found in gist");let i;try{i=JSON.parse(o.content)}catch{throw new Error("Invalid JSON format in layout file")}if(!Array.isArray(i))throw new Error("Invalid KLE layout data structure - expected array format");const s=Ht.Serial.deserialize(i);return{keys:s.keys,metadata:s.meta}}catch(e){throw console.error("Error fetching gist layout:",e),e instanceof Error?e:new Error("Failed to fetch gist layout")}}function I1(){if(window.location.hash.startsWith("#url=")){const t=window.location.href.split("#")[0];window.history.replaceState({},document.title,t)}}function Md(){if(window.location.hash.startsWith("#gist=")){const t=window.location.href.split("#")[0];window.history.replaceState({},document.title,t)}}const wi={fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},Li=ru("font",()=>{const t=Y({...wi}),e=Oe(()=>t.value.fontFamily),n=a=>{if(!a)return null;const d=a.match(/@import\s+url\(([^)]+)\)/);if(d){let h=d[1].trim();return h=h.replace(/^["']|["']$/g,""),h}return null},o=async(a,d=!1)=>{const h=n(a);if(!h){t.value={...wi};return}const c=h.match(/family=([^&:]+)/);if(c){const p=c[1].replace(/\+/g," ");await r(h,p)?(t.value={fontFamily:`"${p}"`,googleFontsUrl:h},d&&Be.showInfo(`Font loaded: ${h}`)):(t.value={...wi},d&&Be.showError("Failed to load font from URL. Please check the font URL and try again. Reverting to default font.","Font Loading Failed"))}else t.value={...wi},d&&Be.showError("Could not extract font name from URL. Make sure you are using a valid Google Fonts URL.","Invalid Font URL")},i=(a,d,h={})=>{const c=document.createElement("div");return c.style.fontFamily=`"${a}", sans-serif`,c.style.fontSize="16px",c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",c.style.visibility="hidden",h.fontWeight&&(c.style.fontWeight=h.fontWeight),h.fontStyle&&(c.style.fontStyle=h.fontStyle),c.textContent=d,c},s=a=>{a.forEach(d=>{d.parentNode===document.body&&document.body.removeChild(d)})},r=(a,d)=>new Promise(h=>{if(document.querySelector(`link[href="${a}"]`)){h(!0);return}const p=document.createElement("link");p.rel="stylesheet",p.href=a;const m=setTimeout(()=>{p.remove(),h(!1)},1e4);p.onload=()=>{clearTimeout(m);const g=[i(d,"Font Loader Test"),i(d,"Font Loader Bold",{fontWeight:"bold"}),i(d,"Font Loader Italic",{fontStyle:"italic"})];g.forEach(D=>{document.body.appendChild(D)}),document.fonts&&document.fonts.load?document.fonts.load(`16px "${d}"`).then(()=>{s(g),h(!0)}).catch(()=>{s(g),h(!0)}):setTimeout(()=>{if(s(g),document.fonts&&document.fonts.check)try{const D=document.fonts.check(`16px "${d}"`);h(D)}catch{h(!0)}else h(!0)},1e3)},p.onerror=()=>{clearTimeout(m),p.remove(),h(!1)},document.head.appendChild(p)});return{fontSettings:t,canvasFontFamily:e,parseCssMetadata:n,applyFromCssMetadata:o,resetToDefault:()=>{t.value={...wi}}}}),Td="kle-ng-lock-rotations",An=ru("keyboard",()=>{const t=Y([]),e=Y([]),n=Y(new Ht.KeyboardMetadata),o=Y(""),i=Y([]),s=Y(-1),r=Y([]),l=Y(!1),a=Y(0),d=Y("select"),h=Y(.25),p=Y(localStorage.getItem(Td)==="true"),m=Y("none"),g=Y(null),D=Y([]),T=Y({x:0,y:0}),y=Y({x:0,y:0}),C=Y(new Map),M=Y(new Map),E=Y({x:0,y:0}),R=Y({x:0,y:0}),L=Y([]),B=Y(null),x=Y(!1),I=Y(null),N=Y(0),z=Y(!1),F=Y(new Map),te=Oe(()=>s.value>0),H=Oe(()=>s.value<r.value.length-1),Q=Oe(()=>e.value.length>0),W=Oe(()=>i.value.length>0),J=(b=0,$=0)=>{const V=new Ht.Key;return V.x=b,V.y=$,V},G=()=>{r.value=r.value.slice(0,s.value+1),r.value.push({keys:JSON.parse(JSON.stringify(t.value)),metadata:JSON.parse(JSON.stringify(n.value))}),s.value=r.value.length-1,r.value.length>50&&(r.value.shift(),s.value--),l.value=!0},ye=b=>{const $={...J(),...b};if(t.value.length>0&&!b?.x&&!b?.y)if(e.value.length>0){const V=e.value[e.value.length-1];V.rotation_angle?($.rotation_angle=V.rotation_angle,$.rotation_x=V.rotation_x,$.rotation_y=V.rotation_y,$.x=S.add(V.x,V.width),$.y=V.y):($.x=S.add(V.x,V.width),$.y=V.y)}else{const V=t.value[t.value.length-1];$.x=S.add(V.x,V.width),$.y=V.y}t.value.push($),e.value=[$],G()},U=b=>{for(let $=0;$<b;$++)ye()},Fe=()=>{if(e.value.length===0)return;const b=e.value.map(V=>t.value.indexOf(V)).filter(V=>V>=0).sort((V,he)=>V-he);if(b.length===0)return;const $=b[0];if(e.value.forEach(V=>{const he=t.value.indexOf(V);he>=0&&t.value.splice(he,1)}),t.value.length>0){const V=Math.min($,t.value.length-1);e.value=[t.value[V]]}else e.value=[];G()},nt=(b,$=!1)=>{if($){const V=e.value.indexOf(b);V>=0?e.value.splice(V,1):e.value.push(b)}else e.value=[b]},Ce=()=>{e.value=[...t.value]},se=()=>{e.value=[]},De=async()=>{if(e.value.length!==0){i.value=JSON.parse(JSON.stringify(e.value));try{const b=new Ht.Keyboard;b.keys=e.value;const $=JSON.stringify(Ht.Serial.serialize(b));if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText($);const he=e.value.length;Be.showSuccess(`${he} ${he===1?"key":"keys"} copied to clipboard`,"Copied",{duration:2e3});return}window.dispatchEvent(new CustomEvent("system-copy",{detail:$}));const V=e.value.length;Be.showSuccess(`${V} ${V===1?"key":"keys"} copied to clipboard`,"Copied",{duration:2e3})}catch(b){console.warn("System clipboard copy failed:",b)}}},Me=async()=>{if(e.value.length===0)return;const b=e.value.length;i.value=JSON.parse(JSON.stringify(e.value));try{const $=new Ht.Keyboard;$.keys=e.value;const V=JSON.stringify(Ht.Serial.serialize($));navigator.clipboard&&window.isSecureContext?await navigator.clipboard.writeText(V):window.dispatchEvent(new CustomEvent("system-copy",{detail:V}))}catch($){console.warn("System clipboard copy failed:",$)}Fe(),Be.showSuccess(`${b} ${b===1?"key":"keys"} cut to clipboard`,"Cut",{duration:2e3})},me=async()=>{if(navigator.clipboard&&window.isSecureContext)try{const b=await navigator.clipboard.readText();b&&b.trim()&&j(b)}catch(b){console.warn("Clipboard access failed:",b)}},j=b=>{try{const $=JSON.parse(b),V=Ht.Serial.deserialize($);if(V&&V.keys&&V.keys.length>0){const he=V.keys.map(de=>({...de}));t.value.push(...he),e.value=he,G();const ge=he.length;return Be.showSuccess(`${ge} ${ge===1?"key":"keys"} pasted from clipboard`,"Pasted",{duration:2e3}),!0}}catch{return Be.showError("Clipboard data is not in a valid keyboard layout format","Paste Failed",{duration:3e3}),!1}return Be.showError("Clipboard data does not contain valid keyboard layout information","Paste Failed",{duration:3e3}),!1},K=()=>{if(!te.value)return;s.value--;const b=r.value[s.value];t.value=JSON.parse(JSON.stringify(b.keys)),n.value=JSON.parse(JSON.stringify(b.metadata)),e.value=[],l.value=!0},ie=()=>{if(!H.value)return;s.value++;const b=r.value[s.value];t.value=JSON.parse(JSON.stringify(b.keys)),n.value=JSON.parse(JSON.stringify(b.metadata)),e.value=[],l.value=!0},_e=(b,$,V)=>{b[$]=V,G()},k=(b,$)=>{e.value.forEach(V=>{_e(V,b,$)})},O=(b,$)=>{try{const V=Li();if(Array.isArray(b))if(t.value=JSON.parse(JSON.stringify(b)),$){const he=new Ht.KeyboardMetadata;n.value={...he,...JSON.parse(JSON.stringify($))},$.css?V.applyFromCssMetadata($.css):V.resetToDefault()}else n.value=new Ht.KeyboardMetadata,V.resetToDefault();else if(t.value=JSON.parse(JSON.stringify(b.keys)),b.metadata){const he=new Ht.KeyboardMetadata;n.value={...he,...JSON.parse(JSON.stringify(b.metadata))},b.metadata.css?V.applyFromCssMetadata(b.metadata.css):V.resetToDefault()}else n.value=new Ht.KeyboardMetadata,V.resetToDefault();e.value=[],r.value=[],s.value=-1,G(),l.value=!1,a.value++}catch(V){throw console.error("Error loading layout:",V),V}},P=()=>{t.value=[],e.value=[],n.value=new Ht.KeyboardMetadata,o.value="",r.value=[],s.value=-1,Li().resetToDefault(),G(),l.value=!1,a.value++},oe=(b="internal")=>{const $=new Ht.Keyboard;return $.keys=t.value,$.meta=n.value,b==="kle"?Ht.Serial.serialize(ne($)):b==="kle-internal"?re($):$},ne=b=>{const $=ge=>S.round(ge,6),V=b.keys.map(ge=>{const de={...ge};return typeof de.x=="number"&&(de.x=$(de.x)),typeof de.y=="number"&&(de.y=$(de.y)),typeof de.width=="number"&&(de.width=$(de.width)),typeof de.height=="number"&&(de.height=$(de.height)),typeof de.x2=="number"&&(de.x2=$(de.x2)),typeof de.y2=="number"&&(de.y2=$(de.y2)),typeof de.width2=="number"&&(de.width2=$(de.width2)),typeof de.height2=="number"&&(de.height2=$(de.height2)),typeof de.rotation_x=="number"&&(de.rotation_x=$(de.rotation_x)),typeof de.rotation_y=="number"&&(de.rotation_y=$(de.rotation_y)),typeof de.rotation_angle=="number"&&(de.rotation_angle=$(de.rotation_angle)),de}),he=new Ht.Keyboard;return he.keys=V,he.meta=b.meta,he},re=b=>{const $=ne(b);return{meta:$.meta,keys:$.keys}},ue=b=>{const $=Ht.Serial.deserialize(b);O($.keys,$.meta)},ve=b=>{const $=Ht.Serial.deserialize(b);try{t.value=JSON.parse(JSON.stringify($.keys));const V=new Ht.KeyboardMetadata;n.value={...V,...JSON.parse(JSON.stringify($.meta))},e.value=[];const he=Li();$.meta?.css?he.applyFromCssMetadata($.meta.css):he.resetToDefault(),G(),l.value=!0}catch(V){throw console.error("Error updating layout from JSON:",V),V}},ce=async()=>{if(typeof globalThis.describe<"u"||typeof navigator<"u"&&navigator.webdriver){G(),l.value=!1;return}if(Io()||await Oo()||await vo())return;const b=[["Num Lock","/","*","-",{x:.25,f:5,w:14,h:5,d:!0},"Getting Started with Keyboard Layout Editor NG<br><br>Start by exploring the presets and samples from the menu-bar to give you an idea of the possibilities. Once you are ready to start designing your own keyboard, just load one of the presets and start customizing it!<br><br>→ Use left-side toolbar to add and edit keys<br>→ The selected keys can be modified on the Properties tab. Use mouse left click to select one or multiple keys<br>→ Move selection with arrows or with mouse middle-click drag.<br><br>When you're ready to save your layout, simply use 'Export' from the menu-bar. Have fun!"],[{f:3},`7
Home`,`8
↑`,`9
PgUp`,{h:2},"+"],[`4
←`,"5",`6
→`],[`1
End`,`2
↓`,`3
PgDn`,{h:2},"Enter"],[{w:2},`0
Ins`,`.
Del`]];try{const $=Ht.Serial.deserialize(b);t.value=$.keys,n.value=$.meta,e.value=[],r.value=[],s.value=-1,G(),l.value=!1,a.value++}catch($){console.error("Error loading sample layout:",$),G(),l.value=!1}},fe=b=>{d.value=b,m.value="none",g.value=null,L.value=[],B.value=null,x.value=!1,I.value=null,N.value=0,z.value=!1},Te=b=>{b>=.05&&b<=5&&(h.value=b)},Se=b=>{p.value=b,localStorage.setItem(Td,String(b))},Pe=(b,$)=>{m.value="key-move",g.value=b,T.value={x:$.x,y:$.y},y.value={x:b.x,y:b.y},e.value.includes(b)&&e.value.length>1?(D.value=[...e.value],C.value.clear(),M.value.clear(),e.value.forEach(V=>{C.value.set(V,{x:V.x,y:V.y}),p.value&&M.value.set(V,{rotation_x:V.rotation_x,rotation_y:V.rotation_y})})):(D.value=[b],C.value.clear(),M.value.clear(),C.value.set(b,{x:b.x,y:b.y}),p.value&&M.value.set(b,{rotation_x:b.rotation_x,rotation_y:b.rotation_y}))},Ne=b=>{if(m.value==="key-move"&&g.value){const $=S.sub(b.x,T.value.x),V=S.sub(b.y,T.value.y),he=54,ge=S.div($,he),de=S.div(V,he);D.value.forEach(ze=>{const Le=C.value.get(ze);if(Le){let qe=ge,tn=de;if(!p.value&&ze.rotation_angle&&ze.rotation_angle!==0){const ht=S.degreesToRadians(ze.rotation_angle),$t=S.cos(ht),Vt=S.sin(ht);qe=S.add(S.mul(ge,$t),S.mul(de,Vt)),tn=S.add(S.mul(-ge,Vt),S.mul(de,$t))}const Dt=S.roundToStep(qe,h.value),Ft=S.roundToStep(tn,h.value);if(ze.x=S.add(Le.x,Dt),ze.y=S.add(Le.y,Ft),p.value){const ht=M.value.get(ze);ht&&(ht.rotation_x!==void 0&&(ze.rotation_x=S.add(ht.rotation_x,Dt)),ht.rotation_y!==void 0&&(ze.rotation_y=S.add(ht.rotation_y,Ft)))}}})}},ot=()=>{m.value==="key-move"&&(m.value="none",g.value=null,D.value=[],C.value.clear(),M.value.clear(),G())},et=b=>{m.value="rect-select",E.value={...b},R.value={...b},L.value=[]},Je=(b,$)=>{m.value==="rect-select"&&(R.value={...b},L.value=$)},Rt=()=>{m.value==="rect-select"&&(e.value=[...L.value],m.value="none",L.value=[])},Tt=(b,$)=>{const he=S.div(b.x,54),ge=S.div(b.y,54),de=S.roundToStep(he,h.value),ze=S.roundToStep(ge,h.value);B.value={x:de,y:ze,direction:$},x.value=!0},jt=()=>{if(!B.value||e.value.length===0)return;const b=e.value.map($=>{const V=JSON.parse(JSON.stringify($));if(B.value.direction==="horizontal"){const he=$.y,ge=B.value.y;V.y=S.mirrorPoint(he,ge,$.height),$.rotation_angle!==void 0&&$.rotation_angle!==0&&(V.rotation_angle=-$.rotation_angle,$.rotation_y!==void 0&&(V.rotation_y=S.mirrorPoint($.rotation_y,ge)),$.rotation_x!==void 0&&(V.rotation_x=$.rotation_x))}else{const he=$.x,ge=B.value.x,de=S.mirrorPoint(he,ge,$.width);V.x=de,$.rotation_angle!==void 0&&$.rotation_angle!==0&&(V.rotation_angle=-$.rotation_angle,$.rotation_x!==void 0&&(V.rotation_x=S.mirrorPoint($.rotation_x,ge)),$.rotation_y!==void 0&&(V.rotation_y=$.rotation_y))}return V});t.value.push(...b),e.value=b,G(),B.value=null,x.value=!1,d.value="select"},Xt=b=>{F.value.clear(),e.value.forEach($=>{F.value.set($,{rotation_angle:$.rotation_angle||0,rotation_x:$.rotation_x,rotation_y:$.rotation_y,x:$.x,y:$.y}),_($,b.x,b.y)}),I.value={x:b.x,y:b.y},N.value=0,z.value=!0},Wt=b=>{e.value.forEach($=>{const V=F.value.get($);if(V){const he=(V.rotation_angle||0)+b;$.rotation_angle=(he%360+360)%360}}),N.value=b},kn=()=>{I.value&&e.value.length>0&&G(),F.value.clear(),I.value=null,N.value=0,z.value=!1,d.value="select"},q=()=>{e.value.forEach(b=>{const $=F.value.get(b);$&&(b.rotation_angle=$.rotation_angle||0,$.rotation_x!==void 0&&(b.rotation_x=$.rotation_x),$.rotation_y!==void 0&&(b.rotation_y=$.rotation_y),$.x!==void 0&&(b.x=$.x),$.y!==void 0&&(b.y=$.y))}),F.value.clear(),I.value=null,N.value=0,z.value=!1,d.value="select"},_=(b,$,V)=>{if(!b.rotation_angle||b.rotation_angle===0||b.rotation_x===void 0||b.rotation_y===void 0){b.rotation_x=$,b.rotation_y=V;return}const he=b.rotation_x,ge=b.rotation_y,de=b.rotation_angle,ze=S.degreesToRadians(de),Le=Math.cos(ze),qe=Math.sin(ze),tn=S.sub(b.x,he),Dt=S.sub(b.y,ge),Ft=S.add(he,S.sub(S.mul(tn,Le),S.mul(Dt,qe))),ht=S.add(ge,S.add(S.mul(tn,qe),S.mul(Dt,Le))),$t=S.sub(Ft,$),Vt=S.sub(ht,V),nn=S.add($,S.add(S.mul($t,Le),S.mul(Vt,qe))),Po=S.add(V,S.sub(S.mul(Vt,Le),S.mul($t,qe)));b.x=nn,b.y=Po,b.rotation_x=$,b.rotation_y=V},Z=(b,$)=>{e.value.forEach(V=>{V.x=S.add(V.x,b),V.y=S.add(V.y,$),V.rotation_x!==void 0&&(V.rotation_x=S.add(V.rotation_x,b)),V.rotation_y!==void 0&&(V.rotation_y=S.add(V.rotation_y,$))})},Sn=(b,$)=>{const V=$||e.value;let he=0;V.forEach(ge=>{if(b===null)if(ge.rotation_angle&&ge.rotation_angle!==0){const de=ge.rotation_x,ze=ge.rotation_y,Le=ge.rotation_angle,qe=S.degreesToRadians(Le),tn=Math.cos(qe),Dt=Math.sin(qe),Ft=S.add(ge.x,S.div(ge.width||1,2)),ht=S.add(ge.y,S.div(ge.height||1,2)),$t=S.sub(Ft,de),Vt=S.sub(ht,ze),nn=S.add(de,S.sub(S.mul($t,tn),S.mul(Vt,Dt))),Po=S.add(ze,S.add(S.mul($t,Dt),S.mul(Vt,tn)));_(ge,nn,Po),he++}else{const de=S.add(ge.x,S.div(ge.width||1,2)),ze=S.add(ge.y,S.div(ge.height||1,2));ge.rotation_x=de,ge.rotation_y=ze,he++}else _(ge,b.x,b.y),he++}),he>0&&G()},$o=()=>{Sn(null,e.value)},Lo=()=>{const b={keys:t.value,metadata:n.value};return k1(b)},Io=()=>{try{const b=M1();return b?(O(b.keys,b.metadata),T1(),!0):!1}catch(b){return console.error("Error loading layout from share URL:",b),!1}},Oo=async()=>{try{let b=$1(),$=!1;if(!b){const V=Ql();V&&(b=V,$=!0)}if(b){const V=Date.now();let he=null,ge=null,de=!1;const ze=()=>{de||(he=Be.showInfo("Loading keyboard layout from URL...","Loading",{duration:0}),de=!0)};ge=window.setTimeout(ze,500);try{let Le;if(b.includes("gist.github.com")){const Dt=b.match(/gist\.github\.com\/[^/]+\/([a-f0-9]+)/);if(Dt&&Dt[1])Le=await Fr(Dt[1]);else throw new Error("Invalid GitHub Gist URL format")}else if(/^[a-f0-9]+$/i.test(b))Le=await Fr(b);else{const Dt=await fetch(b);if(!Dt.ok)throw new Error(`Failed to fetch layout: ${Dt.status} ${Dt.statusText}`);const Ft=await Dt.json();if(!Array.isArray(Ft))throw new Error("Invalid KLE layout data structure - expected array format");const ht=Ht.Serial.deserialize(Ft);Le={keys:ht.keys,metadata:ht.meta}}O(Le.keys,Le.metadata),$?Md():I1();const qe=Date.now()-V;return ge&&clearTimeout(ge),(async()=>{if(de&&he){const Ft=Math.max(0,1e3-qe);Ft>0&&await new Promise(ht=>setTimeout(ht,Ft)),Be.removeToast(he)}Be.showSuccess("Keyboard layout loaded successfully from URL!","Loaded")})().catch(console.error),!0}catch(Le){ge&&clearTimeout(ge),de&&he&&Be.removeToast(he);const qe=Le instanceof Error?Le.message:"Unknown error occurred";throw qe.includes("Gist not found")?Be.showError("The specified GitHub Gist could not be found. Please check the URL and try again.","Gist Not Found"):qe.includes("Rate limit exceeded")?Be.showError("GitHub API rate limit exceeded. Please try again later.","Rate Limit Exceeded"):qe.includes("No keyboard layout file found")?Be.showError("The gist does not contain a valid keyboard layout file. Please ensure the gist has a JSON file with KLE layout data.","Invalid Gist"):qe.includes("Invalid JSON format")?Be.showError("The layout file contains invalid JSON. Please check the file format.","Invalid JSON"):qe.includes("Invalid KLE layout data structure")?Be.showError("The file is not in the correct KLE format. Expected an array structure.","Invalid Format"):qe.includes("Failed to fetch")?Be.showError("Failed to fetch the layout from the URL. Please check the URL and try again.","Fetch Failed"):Be.showError(`Failed to load layout from URL: ${qe}`,"Load Failed"),Le}}return!1}catch(b){return console.error("Error loading layout from URL hash:",b),!1}},vo=async()=>{try{const b=Ql();if(b){const $=Date.now();let V=null,he=null,ge=!1;const de=()=>{ge||(V=Be.showInfo("Loading keyboard layout from GitHub Gist...","Loading",{duration:0}),ge=!0)};he=window.setTimeout(de,500);try{const ze=await Fr(b);O(ze.keys,ze.metadata),Md();const Le=Date.now()-$;return he&&clearTimeout(he),(async()=>{if(ge&&V){const Dt=Math.max(0,1e3-Le);Dt>0&&await new Promise(Ft=>setTimeout(Ft,Dt)),Be.removeToast(V)}Be.showSuccess("Keyboard layout loaded successfully from GitHub Gist!","Loaded")})().catch(console.error),!0}catch(ze){he&&clearTimeout(he),ge&&V&&Be.removeToast(V);const Le=ze instanceof Error?ze.message:"Unknown error occurred";throw Le.includes("Gist not found")?Be.showError("The specified GitHub Gist could not be found. Please check the gist ID and try again.","Gist Not Found"):Le.includes("Rate limit exceeded")?Be.showError("GitHub API rate limit exceeded. Please try again later.","Rate Limit Exceeded"):Le.includes("No keyboard layout file found")?Be.showError("The gist does not contain a valid keyboard layout file. Please ensure the gist has a JSON file with KLE layout data.","Invalid Gist"):Le.includes("Invalid JSON format")?Be.showError("The layout file in the gist contains invalid JSON. Please check the file format.","Invalid JSON"):Le.includes("Invalid KLE layout data structure")?Be.showError("The gist file is not in the correct KLE format. Expected an array structure.","Invalid Format"):Be.showError(`Failed to load gist layout: ${Le}`,"Load Failed"),ze}}return!1}catch(b){return console.error("Error loading layout from gist URL:",b),!1}},$s=b=>!b||typeof b!="string"?!1:/^(\d+),(\d+)$/.test(b.trim()),li=Oe(()=>{if(t.value.length===0)return!1;const b=t.value.filter($=>!$.decal&&!$.ghost);return b.length===0?!1:b.every($=>{const V=$.labels&&$.labels[0];return $s(V)})}),ai=()=>{G(),t.value.forEach(b=>{if(b.decal||b.ghost)return;let $=S.add(b.x,S.div(b.width||1,2)),V=S.add(b.y,S.div(b.height||1,2));if(b.rotation_angle&&b.rotation_angle!==0){const de=b.rotation_x||$,ze=b.rotation_y||V,Le=S.degreesToRadians(b.rotation_angle),qe=Math.cos(Le),tn=Math.sin(Le),Dt=S.sub($,de),Ft=S.sub(V,ze),ht=S.sub(S.mul(Dt,qe),S.mul(Ft,tn)),$t=S.add(S.mul(Dt,tn),S.mul(Ft,qe));$=S.add(de,ht),V=S.add(ze,$t)}const he=Math.round(Number(V)),ge=Math.round(Number($));b.labels=[`${he},${ge}`,"","","","","","","","","","",""],b.textColor&&(b.textColor=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]),b.textSize&&(b.textSize=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0])}),Ls()},ui=()=>{G()},Ls=()=>{l.value=!0},Hn=async()=>{if(Ql())try{await vo()}catch($){console.error("Error loading gist from hash change:",$)}};return ce().catch(console.error),typeof window<"u"&&typeof window.addEventListener=="function"&&window.addEventListener("hashchange",Hn),{keys:t,selectedKeys:e,metadata:n,filename:o,clipboard:i,historyIndex:s,history:r,dirty:l,resetViewTrigger:a,canvasMode:d,moveStep:h,lockRotations:p,mouseDragMode:m,draggedKey:g,draggedKeys:D,dragStartPos:T,keyOriginalPos:y,keysOriginalPositions:C,keysOriginalRotations:M,rectSelectStart:E,rectSelectEnd:R,tempSelectedKeys:L,mirrorAxis:B,showMirrorPreview:x,rotationOrigin:I,rotationPreviewAngle:N,showRotationPreview:z,canUndo:te,canRedo:H,canCopy:Q,canPaste:W,addKey:ye,addKeys:U,deleteKeys:Fe,selectKey:nt,selectAll:Ce,unselectAll:se,copy:De,cut:Me,paste:me,handleSystemClipboardData:j,undo:K,redo:ie,updateKeyProperty:_e,updateSelectedKeys:k,loadLayout:O,clearLayout:P,loadKLELayout:ue,updateLayoutFromJson:ve,getSerializedData:oe,saveState:G,setCanvasMode:fe,setMoveStep:Te,setLockRotations:Se,startKeyDrag:Pe,updateKeyDrag:Ne,endKeyDrag:ot,startRectSelect:et,updateRectSelect:Je,endRectSelect:Rt,setMirrorAxis:Tt,performMirror:jt,startRotation:Xt,updateRotationPreview:Wt,applyRotation:kn,cancelRotation:q,transformRotationOrigin:_,moveRotationsToKeyCenters:$o,moveRotationOriginsToPosition:Sn,moveSelectedKeys:Z,generateShareUrl:Lo,loadFromShareUrl:Io,loadFromGistUrl:vo,processCurrentUrl:async()=>Io()?!0:await vo(),cleanup:()=>{typeof window<"u"&&typeof window.removeEventListener=="function"&&window.removeEventListener("hashchange",Hn)},saveToHistory:ui,markDirty:Ls,addMatrixCoordinates:ai,isViaAnnotated:li}});function qo(t){if(!t.labels||t.labels.length===0||!t.labels[0])return{row:null,col:null};const e=t.labels[0].trim();if(!e.includes(","))return{row:null,col:null};const[n,o]=e.split(","),i=n.trim()!==""?parseInt(n,10):null,s=o.trim()!==""?parseInt(o,10):null;return{row:i!==null&&!isNaN(i)?i:null,col:s!==null&&!isNaN(s)?s:null}}function Ih(t){return qo(t).row!==null}function Oh(t){return qo(t).col!==null}function O1(t){const e=new Set;return t.forEach(n=>{n.ghost||n.decal||Ih(n)&&e.add(n)}),e}function R1(t){const e=new Set;return t.forEach(n=>{n.ghost||n.decal||Oh(n)&&e.add(n)}),e}const ul=ru("matrix-drawing",()=>{const t=Y(!1),e=Y(null),n=Y([]),o=Y(new Map),i=Y(new Map),s=Y(null),r=Y(null),l=Y(.3),a=Y(!1),d=Oe(()=>e.value!==null),h=Oe(()=>o.value.size>0||i.value.size>0),c=()=>{let W=0;for(;o.value.has(W);)W++;return W},p=()=>{let W=0;for(;i.value.has(W);)W++;return W},m=W=>{e.value=W,n.value=[]},g=()=>{e.value=null,n.value=[],s.value=null,r.value=null},D=W=>{n.value.push(W)},T=()=>{if(n.value.length!==0){if(e.value==="row")if(s.value!==null){const W=o.value.get(s.value);if(W){const J=n.value.filter(G=>!W.includes(G));o.value.set(s.value,[...W,...J])}s.value=null}else o.value.set(c(),[...n.value]);else if(e.value==="column")if(r.value!==null){const W=i.value.get(r.value);if(W){const J=n.value.filter(G=>!W.includes(G));i.value.set(r.value,[...W,...J])}r.value=null}else i.value.set(p(),[...n.value]);n.value=[]}},y=()=>{n.value=[],s.value=null,r.value=null},C=()=>{o.value.clear(),i.value.clear(),n.value=[],s.value=null,r.value=null},M=()=>({rows:o.value,columns:i.value}),E=W=>{l.value=Math.max(0,Math.min(1,W))},R=(W,J)=>{if(n.value.includes(W))return!0;const G=qo(W);if(e.value==="row"){if(Ih(W)){if(n.value.length===0){let ye=null;return o.value.forEach((U,Fe)=>{U.includes(W)&&(ye=Fe)}),ye!==null?(s.value=ye,!0):!1}if(s.value!==null){const ye=o.value.get(s.value);return!!(ye&&ye.includes(W))}return!1}if(G.col!==null){const ye=s.value!==null?s.value:c();for(const U of J){if(U===W||U.ghost||U.decal)continue;const Fe=qo(U);if(Fe.row===ye&&Fe.col===G.col)return!1}for(const U of n.value){if(U===W)continue;const Fe=qo(U);if(Fe.col!==null&&Fe.col===G.col)return!1}}}else if(e.value==="column"){if(Oh(W)){if(n.value.length===0){let ye=null;return i.value.forEach((U,Fe)=>{U.includes(W)&&(ye=Fe)}),ye!==null?(r.value=ye,!0):!1}if(r.value!==null){const ye=i.value.get(r.value);return!!(ye&&ye.includes(W))}return!1}if(G.row!==null){const ye=r.value!==null?r.value:p();for(const U of J){if(U===W||U.ghost||U.decal)continue;const Fe=qo(U);if(Fe.row===G.row&&Fe.col===ye)return!1}for(const U of n.value){if(U===W)continue;const Fe=qo(U);if(Fe.row!==null&&Fe.row===G.row)return!1}}}return!0},L=W=>e.value==="row"?O1(W):e.value==="column"?R1(W):new Set,B=(W,J,G=!1)=>{const ye=o.value.get(W);if(!ye)return;const U=ye.indexOf(J);U!==-1&&(ye.splice(U,1),ye.length===0&&o.value.delete(W),G&&(a.value=!0))},x=(W,J,G=!1)=>{const ye=i.value.get(W);if(!ye)return;const U=ye.indexOf(J);U!==-1&&(ye.splice(U,1),ye.length===0&&i.value.delete(W),G&&(a.value=!0))},I=(W,J=!1)=>{o.value.delete(W),J&&(a.value=!0)},N=(W,J=!1)=>{i.value.delete(W),J&&(a.value=!0)},z=(W,J)=>{o.value.clear(),i.value.clear(),W.forEach((G,ye)=>{o.value.set(ye,[...G])}),J.forEach((G,ye)=>{i.value.set(ye,[...G])})},F=W=>{t.value=W},te=(W,J)=>{if(W===J)return;const G=o.value.get(W);if(!G)return;const ye=o.value.get(J);ye?(o.value.set(W,ye),o.value.set(J,G),ye.forEach(U=>{Q(U,W,null)}),G.forEach(U=>{Q(U,J,null)})):(o.value.delete(W),o.value.set(J,G),G.forEach(U=>{Q(U,J,null)}))},H=(W,J)=>{if(W===J)return;const G=i.value.get(W);if(!G)return;const ye=i.value.get(J);ye?(i.value.set(W,ye),i.value.set(J,G),ye.forEach(U=>{Q(U,null,W)}),G.forEach(U=>{Q(U,null,J)})):(i.value.delete(W),i.value.set(J,G),G.forEach(U=>{Q(U,null,J)}))},Q=(W,J,G)=>{const ye=qo(W),U=J!==null?J:ye.row,Fe=G!==null?G:ye.col;U!==null&&Fe!==null?W.labels=[`${U},${Fe}`]:U!==null&&Fe===null?W.labels=[`${U},`]:U===null&&Fe!==null?W.labels=[`,${Fe}`]:W.labels=[]};return{isModalOpen:t,drawingType:e,currentSequence:n,completedRows:o,completedColumns:i,sensitivity:l,skipNextSync:a,isDrawing:d,hasDrawings:h,setModalOpen:F,enableDrawing:m,disableDrawing:g,addKeyToSequence:D,completeSequence:T,clearCurrentSequence:y,clearDrawings:C,getCompletedDrawings:M,setSensitivity:E,canAddKeyToSequence:R,getUnavailableKeys:L,removeKeyFromRow:B,removeKeyFromColumn:x,removeRow:I,removeColumn:N,loadExistingAssignments:z,renumberRow:te,renumberColumn:H}}),P1=[{name:"Blank Layout",file:"blank.json"},{name:"ANSI 104",file:"ansi-104.json"},{name:"ANSI 104 (big-ass enter)",file:"ansi-104-big-ass-enter.json"},{name:"ISO 105",file:"iso-105.json"},{name:"Default 60%",file:"default-60.json"},{name:"Default 60% (VIA)",file:"default-60-via.json"},{name:"ISO 60%",file:"iso-60.json"},{name:"JD40",file:"jd40.json"},{name:"ErgoDox",file:"ergodox.json"},{name:"Atreus",file:"atreus.json"},{name:"Planck",file:"planck.json"},{name:"Kinesis Advantage",file:"kinesis-advantage.json"},{name:"Keycool 84",file:"keycool-84.json"},{name:"Leopold FC660m",file:"leopold-fc660m.json"},{name:"Symbolics Space Cadet",file:"symbolics-spacecadet.json"}],B1={presets:P1};var N1=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,V1=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,K1=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,ea={Space_Separator:N1,ID_Start:V1,ID_Continue:K1},Gt={isSpaceSeparator(t){return typeof t=="string"&&ea.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||ea.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="‌"||t==="‍"||ea.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let Fa,Cn,Co,zr,is,Zn,ln,au,Ii;var z1=function(e,n){Fa=String(e),Cn="start",Co=[],zr=0,is=1,Zn=0,ln=void 0,au=void 0,Ii=void 0;do ln=U1(),W1[Cn]();while(ln.type!=="eof");return typeof n=="function"?ka({"":Ii},"",n):Ii};function ka(t,e,n){const o=t[e];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let i=0;i<o.length;i++){const s=String(i),r=ka(o,s,n);r===void 0?delete o[s]:Object.defineProperty(o,s,{value:r,writable:!0,enumerable:!0,configurable:!0})}else for(const i in o){const s=ka(o,i,n);s===void 0?delete o[i]:Object.defineProperty(o,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return n.call(t,e,o)}let ft,rt,_i,wo,gt;function U1(){for(ft="default",rt="",_i=!1,wo=1;;){gt=So();const t=Rh[ft]();if(t)return t}}function So(){if(Fa[zr])return String.fromCodePoint(Fa.codePointAt(zr))}function be(){const t=So();return t===`
`?(is++,Zn=0):t?Zn+=t.length:Zn++,t&&(zr+=t.length),t}const Rh={default(){switch(gt){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":be();return;case"/":be(),ft="comment";return;case void 0:return be(),Kt("eof")}if(Gt.isSpaceSeparator(gt)){be();return}return Rh[Cn]()},comment(){switch(gt){case"*":be(),ft="multiLineComment";return;case"/":be(),ft="singleLineComment";return}throw zt(be())},multiLineComment(){switch(gt){case"*":be(),ft="multiLineCommentAsterisk";return;case void 0:throw zt(be())}be()},multiLineCommentAsterisk(){switch(gt){case"*":be();return;case"/":be(),ft="default";return;case void 0:throw zt(be())}be(),ft="multiLineComment"},singleLineComment(){switch(gt){case`
`:case"\r":case"\u2028":case"\u2029":be(),ft="default";return;case void 0:return be(),Kt("eof")}be()},value(){switch(gt){case"{":case"[":return Kt("punctuator",be());case"n":return be(),_s("ull"),Kt("null",null);case"t":return be(),_s("rue"),Kt("boolean",!0);case"f":return be(),_s("alse"),Kt("boolean",!1);case"-":case"+":be()==="-"&&(wo=-1),ft="sign";return;case".":rt=be(),ft="decimalPointLeading";return;case"0":rt=be(),ft="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":rt=be(),ft="decimalInteger";return;case"I":return be(),_s("nfinity"),Kt("numeric",1/0);case"N":return be(),_s("aN"),Kt("numeric",NaN);case'"':case"'":_i=be()==='"',rt="",ft="string";return}throw zt(be())},identifierNameStartEscape(){if(gt!=="u")throw zt(be());be();const t=Ma();switch(t){case"$":case"_":break;default:if(!Gt.isIdStartChar(t))throw $d();break}rt+=t,ft="identifierName"},identifierName(){switch(gt){case"$":case"_":case"‌":case"‍":rt+=be();return;case"\\":be(),ft="identifierNameEscape";return}if(Gt.isIdContinueChar(gt)){rt+=be();return}return Kt("identifier",rt)},identifierNameEscape(){if(gt!=="u")throw zt(be());be();const t=Ma();switch(t){case"$":case"_":case"‌":case"‍":break;default:if(!Gt.isIdContinueChar(t))throw $d();break}rt+=t,ft="identifierName"},sign(){switch(gt){case".":rt=be(),ft="decimalPointLeading";return;case"0":rt=be(),ft="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":rt=be(),ft="decimalInteger";return;case"I":return be(),_s("nfinity"),Kt("numeric",wo*(1/0));case"N":return be(),_s("aN"),Kt("numeric",NaN)}throw zt(be())},zero(){switch(gt){case".":rt+=be(),ft="decimalPoint";return;case"e":case"E":rt+=be(),ft="decimalExponent";return;case"x":case"X":rt+=be(),ft="hexadecimal";return}return Kt("numeric",wo*0)},decimalInteger(){switch(gt){case".":rt+=be(),ft="decimalPoint";return;case"e":case"E":rt+=be(),ft="decimalExponent";return}if(Gt.isDigit(gt)){rt+=be();return}return Kt("numeric",wo*Number(rt))},decimalPointLeading(){if(Gt.isDigit(gt)){rt+=be(),ft="decimalFraction";return}throw zt(be())},decimalPoint(){switch(gt){case"e":case"E":rt+=be(),ft="decimalExponent";return}if(Gt.isDigit(gt)){rt+=be(),ft="decimalFraction";return}return Kt("numeric",wo*Number(rt))},decimalFraction(){switch(gt){case"e":case"E":rt+=be(),ft="decimalExponent";return}if(Gt.isDigit(gt)){rt+=be();return}return Kt("numeric",wo*Number(rt))},decimalExponent(){switch(gt){case"+":case"-":rt+=be(),ft="decimalExponentSign";return}if(Gt.isDigit(gt)){rt+=be(),ft="decimalExponentInteger";return}throw zt(be())},decimalExponentSign(){if(Gt.isDigit(gt)){rt+=be(),ft="decimalExponentInteger";return}throw zt(be())},decimalExponentInteger(){if(Gt.isDigit(gt)){rt+=be();return}return Kt("numeric",wo*Number(rt))},hexadecimal(){if(Gt.isHexDigit(gt)){rt+=be(),ft="hexadecimalInteger";return}throw zt(be())},hexadecimalInteger(){if(Gt.isHexDigit(gt)){rt+=be();return}return Kt("numeric",wo*Number(rt))},string(){switch(gt){case"\\":be(),rt+=H1();return;case'"':if(_i)return be(),Kt("string",rt);rt+=be();return;case"'":if(!_i)return be(),Kt("string",rt);rt+=be();return;case`
`:case"\r":throw zt(be());case"\u2028":case"\u2029":q1(gt);break;case void 0:throw zt(be())}rt+=be()},start(){switch(gt){case"{":case"[":return Kt("punctuator",be())}ft="value"},beforePropertyName(){switch(gt){case"$":case"_":rt=be(),ft="identifierName";return;case"\\":be(),ft="identifierNameStartEscape";return;case"}":return Kt("punctuator",be());case'"':case"'":_i=be()==='"',ft="string";return}if(Gt.isIdStartChar(gt)){rt+=be(),ft="identifierName";return}throw zt(be())},afterPropertyName(){if(gt===":")return Kt("punctuator",be());throw zt(be())},beforePropertyValue(){ft="value"},afterPropertyValue(){switch(gt){case",":case"}":return Kt("punctuator",be())}throw zt(be())},beforeArrayValue(){if(gt==="]")return Kt("punctuator",be());ft="value"},afterArrayValue(){switch(gt){case",":case"]":return Kt("punctuator",be())}throw zt(be())},end(){throw zt(be())}};function Kt(t,e){return{type:t,value:e,line:is,column:Zn}}function _s(t){for(const e of t){if(So()!==e)throw zt(be());be()}}function H1(){switch(So()){case"b":return be(),"\b";case"f":return be(),"\f";case"n":return be(),`
`;case"r":return be(),"\r";case"t":return be(),"	";case"v":return be(),"\v";case"0":if(be(),Gt.isDigit(So()))throw zt(be());return"\0";case"x":return be(),j1();case"u":return be(),Ma();case`
`:case"\u2028":case"\u2029":return be(),"";case"\r":return be(),So()===`
`&&be(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw zt(be());case void 0:throw zt(be())}return be()}function j1(){let t="",e=So();if(!Gt.isHexDigit(e)||(t+=be(),e=So(),!Gt.isHexDigit(e)))throw zt(be());return t+=be(),String.fromCodePoint(parseInt(t,16))}function Ma(){let t="",e=4;for(;e-- >0;){const n=So();if(!Gt.isHexDigit(n))throw zt(be());t+=be()}return String.fromCodePoint(parseInt(t,16))}const W1={start(){if(ln.type==="eof")throw Cs();ta()},beforePropertyName(){switch(ln.type){case"identifier":case"string":au=ln.value,Cn="afterPropertyName";return;case"punctuator":br();return;case"eof":throw Cs()}},afterPropertyName(){if(ln.type==="eof")throw Cs();Cn="beforePropertyValue"},beforePropertyValue(){if(ln.type==="eof")throw Cs();ta()},beforeArrayValue(){if(ln.type==="eof")throw Cs();if(ln.type==="punctuator"&&ln.value==="]"){br();return}ta()},afterPropertyValue(){if(ln.type==="eof")throw Cs();switch(ln.value){case",":Cn="beforePropertyName";return;case"}":br()}},afterArrayValue(){if(ln.type==="eof")throw Cs();switch(ln.value){case",":Cn="beforeArrayValue";return;case"]":br()}},end(){}};function ta(){let t;switch(ln.type){case"punctuator":switch(ln.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=ln.value;break}if(Ii===void 0)Ii=t;else{const e=Co[Co.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,au,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(t!==null&&typeof t=="object")Co.push(t),Array.isArray(t)?Cn="beforeArrayValue":Cn="beforePropertyName";else{const e=Co[Co.length-1];e==null?Cn="end":Array.isArray(e)?Cn="afterArrayValue":Cn="afterPropertyValue"}}function br(){Co.pop();const t=Co[Co.length-1];t==null?Cn="end":Array.isArray(t)?Cn="afterArrayValue":Cn="afterPropertyValue"}function zt(t){return Ur(t===void 0?`JSON5: invalid end of input at ${is}:${Zn}`:`JSON5: invalid character '${Ph(t)}' at ${is}:${Zn}`)}function Cs(){return Ur(`JSON5: invalid end of input at ${is}:${Zn}`)}function $d(){return Zn-=5,Ur(`JSON5: invalid identifier character at ${is}:${Zn}`)}function q1(t){console.warn(`JSON5: '${Ph(t)}' in strings is not valid ECMAScript; consider escaping`)}function Ph(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function Ur(t){const e=new SyntaxError(t);return e.lineNumber=is,e.columnNumber=Zn,e}var Y1=function(e,n,o){const i=[];let s="",r,l,a="",d;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(o=n.space,d=n.quote,n=n.replacer),typeof n=="function")l=n;else if(Array.isArray(n)){r=[];for(const D of n){let T;typeof D=="string"?T=D:(typeof D=="number"||D instanceof String||D instanceof Number)&&(T=String(D)),T!==void 0&&r.indexOf(T)<0&&r.push(T)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),a="          ".substr(0,o)):typeof o=="string"&&(a=o.substr(0,10)),h("",{"":e});function h(D,T){let y=T[D];switch(y!=null&&(typeof y.toJSON5=="function"?y=y.toJSON5(D):typeof y.toJSON=="function"&&(y=y.toJSON(D))),l&&(y=l.call(T,D,y)),y instanceof Number?y=Number(y):y instanceof String?y=String(y):y instanceof Boolean&&(y=y.valueOf()),y){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof y=="string")return c(y);if(typeof y=="number")return String(y);if(typeof y=="object")return Array.isArray(y)?g(y):p(y)}function c(D){const T={"'":.1,'"':.2},y={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let C="";for(let E=0;E<D.length;E++){const R=D[E];switch(R){case"'":case'"':T[R]++,C+=R;continue;case"\0":if(Gt.isDigit(D[E+1])){C+="\\x00";continue}}if(y[R]){C+=y[R];continue}if(R<" "){let L=R.charCodeAt(0).toString(16);C+="\\x"+("00"+L).substring(L.length);continue}C+=R}const M=d||Object.keys(T).reduce((E,R)=>T[E]<T[R]?E:R);return C=C.replace(new RegExp(M,"g"),y[M]),M+C+M}function p(D){if(i.indexOf(D)>=0)throw TypeError("Converting circular structure to JSON5");i.push(D);let T=s;s=s+a;let y=r||Object.keys(D),C=[];for(const E of y){const R=h(E,D);if(R!==void 0){let L=m(E)+":";a!==""&&(L+=" "),L+=R,C.push(L)}}let M;if(C.length===0)M="{}";else{let E;if(a==="")E=C.join(","),M="{"+E+"}";else{let R=`,
`+s;E=C.join(R),M=`{
`+s+E+`,
`+T+"}"}}return i.pop(),s=T,M}function m(D){if(D.length===0)return c(D);const T=String.fromCodePoint(D.codePointAt(0));if(!Gt.isIdStartChar(T))return c(D);for(let y=T.length;y<D.length;y++)if(!Gt.isIdContinueChar(String.fromCodePoint(D.codePointAt(y))))return c(D);return D}function g(D){if(i.indexOf(D)>=0)throw TypeError("Converting circular structure to JSON5");i.push(D);let T=s;s=s+a;let y=[];for(let M=0;M<D.length;M++){const E=h(String(M),D);y.push(E!==void 0?E:"null")}let C;if(y.length===0)C="[]";else if(a==="")C="["+y.join(",")+"]";else{let M=`,
`+s,E=y.join(M);C=`[
`+s+E+`,
`+T+"]"}return i.pop(),s=T,C}};const X1={parse:z1,stringify:Y1};var Ta=X1;function Oi(t){const e=t.trim();try{return JSON.parse(e)}catch{try{return Ta.parse(e)}catch{if(J1(e))try{const n=`[${e}]`;return JSON.parse(n)}catch{try{const n=`[${e}]`;return Ta.parse(n)}catch(n){throw new Error(`Invalid JSON format: ${n}`)}}else throw new Error("Invalid JSON format: Unable to parse input")}}}function J1(t){const e=t.trim();try{return JSON.parse(e),!1}catch{}try{return Ta.parse(e),!1}catch{}return[/^\s*\[.*\]\s*,\s*\[/,/^\s*\{.*\}\s*,/,/^\s*["'][^"']*["']\s*,/,/\]\s*,\s*\[/,/\{\s*["']?[whxyab]\d?["']?\s*:/].some(o=>o.test(e))}function uu(t,e,n){const i=t.trim().replace(/\s+/g," ").split("/"),s=i[0].trim().split(" "),r=i[1]?i[1].trim().split(" "):s,l=(c,p)=>c.endsWith("px")?parseFloat(c):c.endsWith("%")?parseFloat(c)/100*p:parseFloat(c)||0,a=c=>{switch(c.length){case 1:return[c[0],c[0],c[0],c[0]];case 2:return[c[0],c[1],c[0],c[1]];case 3:return[c[0],c[1],c[2],c[1]];case 4:return c;default:return[c[0],c[1],c[2],c[3]]}},d=a(s),h=a(r);return{topLeft:{x:l(d[0],e),y:l(h[0],n)},topRight:{x:l(d[1],e),y:l(h[1],n)},bottomRight:{x:l(d[2],e),y:l(h[2],n)},bottomLeft:{x:l(d[3],e),y:l(h[3],n)}}}function cu(t,e,n,o,i,s){t.beginPath(),t.moveTo(e+s.topLeft.x,n),t.lineTo(e+o-s.topRight.x,n),(s.topRight.x>0||s.topRight.y>0)&&(typeof t.ellipse=="function"?t.ellipse(e+o-s.topRight.x,n+s.topRight.y,s.topRight.x,s.topRight.y,0,-Math.PI/2,0):typeof t.arc=="function"&&t.arc(e+o-s.topRight.x,n+s.topRight.y,Math.min(s.topRight.x,s.topRight.y),-Math.PI/2,0)),t.lineTo(e+o,n+i-s.bottomRight.y),(s.bottomRight.x>0||s.bottomRight.y>0)&&(typeof t.ellipse=="function"?t.ellipse(e+o-s.bottomRight.x,n+i-s.bottomRight.y,s.bottomRight.x,s.bottomRight.y,0,0,Math.PI/2):typeof t.arc=="function"&&t.arc(e+o-s.bottomRight.x,n+i-s.bottomRight.y,Math.min(s.bottomRight.x,s.bottomRight.y),0,Math.PI/2)),t.lineTo(e+s.bottomLeft.x,n+i),(s.bottomLeft.x>0||s.bottomLeft.y>0)&&(typeof t.ellipse=="function"?t.ellipse(e+s.bottomLeft.x,n+i-s.bottomLeft.y,s.bottomLeft.x,s.bottomLeft.y,0,Math.PI/2,Math.PI):typeof t.arc=="function"&&t.arc(e+s.bottomLeft.x,n+i-s.bottomLeft.y,Math.min(s.bottomLeft.x,s.bottomLeft.y),Math.PI/2,Math.PI)),t.lineTo(e,n+s.topLeft.y),(s.topLeft.x>0||s.topLeft.y>0)&&(typeof t.ellipse=="function"?t.ellipse(e+s.topLeft.x,n+s.topLeft.y,s.topLeft.x,s.topLeft.y,0,Math.PI,-Math.PI/2):typeof t.arc=="function"&&t.arc(e+s.topLeft.x,n+s.topLeft.y,Math.min(s.topLeft.x,s.topLeft.y),Math.PI,-Math.PI/2)),t.closePath()}function Bh(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=()=>e(o.result),o.onerror=n,o.readAsArrayBuffer(t)})}function G1(t,e="image/png"){return new Blob([t],{type:e})}function Z1(t){const e=new Array(256);for(let o=0;o<256;o++){let i=o;for(let s=0;s<8;s++)i=i&1?3988292384^i>>>1:i>>>1;e[o]=i}let n=4294967295;for(let o=0;o<t.length;o++)n=e[(n^t[o])&255]^n>>>8;return(n^4294967295)>>>0}function Q1(t,e){const n=new TextEncoder().encode(t),o=new TextEncoder().encode(e),i=n.length+1+o.length,s=new Uint8Array(i);s.set(n,0),s[n.length]=0,s.set(o,n.length+1);const r=new Uint8Array(8+i+4),l=new DataView(r.buffer);l.setUint32(0,i,!1),r.set([116,69,88,116],4),r.set(s,8);const a=new Uint8Array(4+i);a.set(r.slice(4,8+i));const d=Z1(a);return l.setUint32(8+i,d,!1),r}function eb(t){const e=new Uint8Array(t),n=new DataView(t),o={},i=[137,80,78,71,13,10,26,10];for(let r=0;r<8;r++)if(e[r]!==i[r])throw new Error("Invalid PNG file format");let s=8;for(;s<e.length&&!(s+8>e.length);){const r=n.getUint32(s,!1);s+=4;const l=String.fromCharCode(e[s],e[s+1],e[s+2],e[s+3]);if(s+=4,l==="tEXt"&&s+r<=e.length){const a=e.slice(s,s+r);let d=-1;for(let h=0;h<a.length;h++)if(a[h]===0){d=h;break}if(d>0){const h=new TextDecoder().decode(a.slice(0,d)),c=new TextDecoder().decode(a.slice(d+1));o[h]=c}}if(s+=r+4,l==="IEND")break}return o}async function tb(t,e){const n=await Bh(t),o=new Uint8Array(n),i=new DataView(n);let s=-1,r=8;for(;r<o.length&&!(r+8>o.length);){const p=i.getUint32(r,!1);if(String.fromCharCode(o[r+4],o[r+5],o[r+6],o[r+7])==="IEND"){s=r;break}r+=8+p+4}if(s===-1)throw new Error("Invalid PNG: IEND chunk not found");const l=[];for(const[p,m]of Object.entries(e))l.push(Q1(p,m));const a=l.reduce((p,m)=>p+m.length,0),d=o.length+a,h=new Uint8Array(d);h.set(o.slice(0,s));let c=s;for(const p of l)h.set(p,c),c+=p.length;return h.set(o.slice(s),c),G1(h.buffer)}async function Nh(t){const e=await Bh(t);return eb(e)}async function Vh(t){try{const e=await Nh(t);return"KLE-Layout"in e||"kle-layout"in e}catch{return!1}}async function Kh(t){try{const e=await Nh(t),n=e["KLE-Layout"]||e["kle-layout"];if(!n)return null;const o=Yi.decompressFromBase64(n);let i;return o?i=JSON.parse(o):i=JSON.parse(n),Hr(i)}catch(e){return console.error("Error extracting KLE layout from PNG:",e),null}}function Hr(t){if(t!=null){if(Array.isArray(t))return t.map(e=>Hr(e)).filter(e=>e!=null);if(typeof t=="object"){const e={};for(const[n,o]of Object.entries(t)){const i=Hr(o);i!=null&&(e[n]=i)}return e}return t}}async function nb(t,e,n={}){const o=Hr(e),i=Yi.compressToBase64(JSON.stringify(o)),s={...n,"KLE-Layout":i,Software:"Keyboard Layout Editor NG","Creation-Time":new Date().toISOString()};return tb(t,s)}function zh(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!e.layouts||typeof e.layouts!="object")return!1;const n=e.layouts;return!!Array.isArray(n.keymap)}function ob(t){if(!zh(t))throw new Error("Invalid VIA format: missing layouts.keymap");const e=JSON.parse(JSON.stringify(t)),n=e.layouts,o=n.keymap;delete n.keymap;const s=JSON.stringify(e),r=ri.compressToBase64(s);if(!Array.isArray(o)||o.length===0)throw new Error("Invalid VIA format: keymap is empty");const l={_kleng_via_data:r},a=JSON.parse(JSON.stringify(o));return Array.isArray(a[0])?a[0].unshift(l):a.unshift(l),a}function sb(t){if(!Array.isArray(t))return null;for(const e of t.slice(0,3))if(Array.isArray(e)){for(const n of e.slice(0,3))if(typeof n=="object"&&n!==null&&"_kleng_via_data"in n){const o=n._kleng_via_data;try{const i=ri.decompressFromBase64(o);if(i)return JSON.parse(i)}catch(i){return console.warn("Failed to decompress VIA metadata:",i),null}}}else if(typeof e=="object"&&e!==null&&"_kleng_via_data"in e){const n=e._kleng_via_data;try{const o=ri.decompressFromBase64(n);if(o)return JSON.parse(o)}catch(o){return console.warn("Failed to decompress VIA metadata:",o),null}}return null}function ib(t){const e=sb(t);if(!e)return null;const n=JSON.parse(JSON.stringify(t));if(Array.isArray(n)){for(let i=0;i<Math.min(3,n.length);i++){const s=n[i];if(Array.isArray(s))n[i]=s.map(r=>{if(typeof r=="object"&&r!==null&&"_kleng_via_data"in r){const l={...r};return delete l._kleng_via_data,Object.keys(l).length===0?null:l}return r}).filter(r=>r!==null);else if(typeof s=="object"&&s!==null&&"_kleng_via_data"in s){const r={...s};delete r._kleng_via_data,Object.keys(r).length>0?n[i]=r:n[i]=null}}const o=n.filter(i=>i!==null);return{...e,layouts:{...e.layouts||{},keymap:o}}}return{...e,layouts:{...e.layouts||{},keymap:n}}}const rb={class:"toolbar-container keyboard-toolbar"},lb={class:"d-flex flex-column flex-sm-row align-items-stretch align-items-sm-center gap-2 gap-sm-3 justify-content-sm-end"},ab={class:"dropdown preset-dropdown"},ub={class:"btn btn-outline-primary dropdown-toggle preset-select",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},cb={class:"dropdown-menu"},db=["onClick"],fb={class:"btn-group",role:"group"},hb={class:"dropdown"},pb={class:"dropdown-menu"},vb={class:"dropdown"},mb={class:"dropdown-menu"},gb={class:"modal-dialog modal-dialog-centered"},bb={class:"modal-content"},yb={class:"modal-body"},wb={class:"mb-3"},xb={class:"modal-footer"},Db=["disabled"],_b=At({__name:"KeyboardToolbar",setup(t){const e=An(),n=ul(),o=Y(""),i=Y(""),s=Y([]),r=Y(),l=Y(!1),a=Y("");Qt(()=>{s.value=B1.presets||[]});const d=async H=>{o.value=H.toString();const Q=s.value[H];i.value=Q?.name||"",await h()},h=async()=>{if(o.value==="")return;const H=parseInt(o.value),Q=s.value[H];if(console.log("Loading preset:",Q?.name),Q)try{const W=await fetch(`/data/presets/${Q.file}`);if(!W.ok)throw new Error(`HTTP ${W.status}: ${W.statusText}`);const J=await W.json();e.loadKLELayout(J),console.log("Preset loaded successfully:",Q.name,"Keys:",e.keys.length)}catch(W){console.error("Error loading preset:",W),Be.showError(`Failed to load ${Q.name}`,"Error loading preset")}},c=()=>{r.value?.click()},p=H=>typeof H=="object"&&H!==null&&"meta"in H&&"keys"in H&&Array.isArray(H.keys),m=async H=>{const Q=H.target,W=Q.files?.[0];if(W)try{const J=W.name.replace(/\.[^/.]+$/,"");if(W.type==="image/png"||W.name.toLowerCase().endsWith(".png")){if(console.log(`Checking PNG file for embedded layout: ${W.name}`),await Vh(W)){const ye=await Kh(W);ye?(console.log(`Loading layout from PNG metadata: ${W.name}`),e.loadKLELayout(ye),e.filename=J,Be.showSuccess(`Layout imported from PNG metadata: ${W.name}`,"Import Successful")):Be.showError("Failed to extract layout data from PNG metadata","Import Failed")}else Be.showError("This PNG file does not contain layout data. Only PNG files exported from this tool contain the necessary metadata to import layouts.","No Layout Data");return}const G=await W.text();await z(G,W.name,J)}catch(J){console.error("Error loading file:",J);const G=J instanceof Error?J.message:"Invalid file format";Be.showError(G,"Error loading file")}finally{Q.value=""}},g=()=>{const H=e.getSerializedData("kle"),Q=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),W=URL.createObjectURL(Q),J=document.createElement("a");J.href=W,J.download=`${e.filename||e.metadata.name||"keyboard-layout"}.json`,J.click(),URL.revokeObjectURL(W)},D=()=>{const H=e.getSerializedData("kle-internal"),Q=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),W=URL.createObjectURL(Q),J=document.createElement("a");J.href=W,J.download=`${e.filename||e.metadata.name||"keyboard-layout"}-internal.json`,J.click(),URL.revokeObjectURL(W)},T=()=>{const H=e.getSerializedData("kle"),Q=ib(H);if(!Q){Be.showError("VIA metadata not found. Import a VIA layout or add VIA metadata in the Keyboard Metadata tab.","Cannot export VIA JSON");return}const W=new Blob([JSON.stringify(Q,null,2)],{type:"application/json"}),J=URL.createObjectURL(W),G=document.createElement("a");G.href=J,G.download=`${e.filename||e.metadata.name||"keyboard-layout"}-via.json`,G.click(),URL.revokeObjectURL(J)},y=async()=>{const H=document.querySelector(".keyboard-canvas");if(!H){Be.showError("Please make sure the keyboard is visible.","Canvas not found");return}const Q=e.metadata.radii?.trim()||"6px",W=C(H,Q);if(n.isModalOpen){const J=document.querySelector(".matrix-annotation-overlay");if(J){const G=W.getContext("2d");G&&G.drawImage(J,0,0)}}try{const J=await new Promise(U=>W.toBlob(Fe=>U(Fe),"image/png")),G=e.getSerializedData("kle"),ye=await nb(J,G,{Title:e.metadata.name||"Keyboard Layout",Author:e.metadata.author||"",Description:"Keyboard layout created with Keyboard Layout Editor NG"});if(typeof window.showSaveFilePicker=="function"){const Fe=await(await window.showSaveFilePicker({suggestedName:`${e.filename||e.metadata.name||"keyboard-layout"}.png`,types:[{description:"PNG image with embedded layout",accept:{"image/png":[".png"]}}]})).createWritable();await Fe.write(ye),await Fe.close(),Be.showSuccess("PNG image with embedded layout saved successfully","Export Successful")}else{const U=URL.createObjectURL(ye),Fe=document.createElement("a");Fe.href=U,Fe.download=`${e.filename||e.metadata.name||"keyboard-layout"}.png`,Fe.click(),URL.revokeObjectURL(U)}}catch(J){if(J instanceof Error){if(J.name==="AbortError"||J.message.includes("aborted")||J.message.includes("cancelled"))return;console.error("Error downloading PNG:",J),Be.showError(`Failed to save PNG: ${J.message}`,"Save Failed")}else console.error("Unknown error downloading PNG:",J),Be.showError("Failed to save PNG image","Save Failed")}},C=(H,Q)=>{const W=document.createElement("canvas");W.width=H.width,W.height=H.height;const J=W.getContext("2d"),G=uu(Q,W.width,W.height);return cu(J,0,0,W.width,W.height,G),J.clip(),J.drawImage(H,0,0),W},M=()=>{l.value=!0,a.value="",document.body.classList.add("modal-open"),je(()=>{const H=document.getElementById("urlInput");H&&H.focus()})},E=()=>{l.value=!1,a.value="",document.body.classList.remove("modal-open")},R=H=>{H.key==="Escape"&&l.value&&E()};at(()=>l.value,H=>{H?document.addEventListener("keydown",R):document.removeEventListener("keydown",R)});const L=H=>{const Q=H.match(/^https?:\/\/github\.com\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);if(Q){const[,W,J,G,ye]=Q,U=`https://raw.githubusercontent.com/${W}/${J}/${G}/${ye}`;return console.log(`Converted GitHub blob URL to raw URL: ${U}`),Be.showInfo("Detected GitHub blob URL - automatically converting to raw URL for import","URL Converted",{duration:3e3}),U}return H},B=async()=>{if(a.value)try{let H=a.value.trim();H=L(H),H.includes("#share=")?await x(H):H.includes("#url=")||H.includes("#gist=")?await I(H):H.includes("gist.github.com")?await N(H):await F(H)}catch(H){console.error("Error importing from URL:",H);const Q=H instanceof Error?H.message:"Failed to import from URL";Be.showError(Q,"Import Failed")}finally{E()}},x=async H=>{try{if(H.includes(window.location.hash)&&window.location.hash.startsWith("#share=")){Be.showInfo("This layout is already loaded in the current page","Already Loaded");return}const Q=H.indexOf("#share=");if(Q===-1)throw new Error("Invalid share link format");const W=H.substring(Q+7),J=Lh(W);e.loadLayout(J.keys,J.metadata),e.filename="shared-layout",Be.showSuccess("Layout imported from share link","Import Successful")}catch(Q){throw console.error("Error importing from share link:",Q),Q}},I=async H=>{try{const Q=window.location.hash;if(H.includes(Q)&&(Q.startsWith("#url=")||Q.startsWith("#gist="))){Be.showInfo("This layout is already loaded in the current page","Already Loaded");return}let W=H.indexOf("#url="),J="#url=";if(W===-1&&(W=H.indexOf("#gist="),J="#gist="),W===-1)throw new Error("Invalid URL hash format");const G=H.substring(W+J.length),ye=decodeURIComponent(G);if(ye.includes("gist.github.com"))await N(ye);else if(/^[a-f0-9]+$/i.test(ye)){const U=await Fr(ye);e.loadLayout(U.keys,U.metadata),e.filename=`gist-${ye}`,Be.showSuccess(`Layout imported from gist: ${ye}`,"Import Successful")}else await F(ye)}catch(Q){throw console.error("Error importing from URL hash:",Q),Q}},N=async H=>{try{const Q=H.match(/gist\.github\.com\/(?:[^\/]+\/)?([a-f0-9]+)/i);if(!Q)throw new Error("Invalid GitHub Gist URL");const W=Q[1],J=`https://api.github.com/gists/${W}`,G=await fetch(J);if(!G.ok)throw new Error(`Failed to fetch Gist: ${G.status} ${G.statusText}`);const ye=await G.json(),U=Object.values(ye.files).find(Fe=>Fe.filename.toLowerCase().endsWith(".json"));if(!U)throw new Error("No JSON file found in Gist");await z(U.content,`gist-${W}`,`gist-${W}`)}catch(Q){throw console.error("Error importing from Gist:",Q),Q}},z=async(H,Q,W)=>{const J=Oi(H);if(zh(J)){console.log(`Loading VIA format from: ${Q}`);try{const G=ob(J);e.loadKLELayout(G);const U=JSON.parse(JSON.stringify(J)),Fe=U.layouts;delete Fe.keymap;const nt=JSON.stringify(U),Ce=ri.compressToBase64(nt);e.metadata._kleng_via_data=Ce,Be.showSuccess(`VIA layout loaded from ${Q}`,"Import successful")}catch(G){console.error("Error converting VIA format:",G);const ye=G instanceof Error?G.message:"Failed to convert VIA format";throw Be.showError(ye,"VIA Import Failed"),G}}else p(J)?(console.log(`Loading internal KLE format from: ${Q}`),e.loadLayout(J.keys,J.meta),Be.showSuccess(`Internal KLE layout loaded from ${Q}`,"Import successful")):(console.log(`Loading raw KLE format from: ${Q}`),e.loadKLELayout(J),Be.showSuccess(`KLE layout loaded from ${Q}`,"Import successful"));e.filename=W},F=async H=>{try{const Q=await fetch(H);if(!Q.ok)throw new Error(`Failed to fetch file: ${Q.status} ${Q.statusText}`);const W=await Q.text(),J=H.split("/"),G=J[J.length-1],ye=G.replace(/\.json$/,"");await z(W,G,ye)}catch(Q){throw console.error("Error importing from direct URL:",Q),Q}},te=async()=>{try{const H=e.generateShareUrl();navigator.clipboard&&navigator.clipboard.writeText?(await navigator.clipboard.writeText(H),Be.showSuccess("The shareable link has been copied to your clipboard. Share it with others to let them view your layout!","Link copied successfully!")):Be.showInfo("Copy this link to share your layout: "+H,"Shareable Link Generated",{duration:1e4,showCloseButton:!0}),console.log("Share URL generated:",H)}catch(H){console.error("Error generating share link:",H),Be.showError("Please try again.","Error generating share link")}};return(H,Q)=>(ae(),pe("div",rb,[f("div",lb,[f("div",ab,[f("button",ub,Ve(i.value||"Choose Preset..."),1),f("ul",cb,[(ae(!0),pe(xt,null,En(s.value,(W,J)=>(ae(),pe("li",{key:J},[f("a",{class:"dropdown-item",href:"#",onClick:pt(G=>d(J),["prevent"])},Ve(W.name),9,db)]))),128))])]),f("div",fb,[f("div",hb,[Q[1]||(Q[1]=f("button",{class:"btn btn-outline-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",style:{"border-right-width":"0px"},type:"button"}," Import ",-1)),f("ul",pb,[f("li",null,[f("a",{class:"dropdown-item",href:"#",onClick:pt(c,["prevent"])}," From File ")]),f("li",null,[f("a",{class:"dropdown-item",href:"#",onClick:pt(M,["prevent"])}," From URL ")])])]),f("div",vb,[Q[2]||(Q[2]=f("button",{class:"btn btn-outline-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",type:"button"}," Export ",-1)),f("ul",mb,[f("li",null,[f("a",{class:"dropdown-item",href:"#",onClick:pt(g,["prevent"])}," Download JSON ")]),f("li",null,[f("a",{class:"dropdown-item",href:"#",onClick:pt(D,["prevent"])}," Download KLE Internal JSON ")]),f("li",null,[f("a",{class:"dropdown-item",href:"#",onClick:pt(T,["prevent"])}," Download VIA JSON ")]),f("li",null,[f("a",{class:"dropdown-item",href:"#",onClick:pt(y,["prevent"])}," Download PNG ")])])]),f("button",{class:"btn btn-primary",onClick:te,type:"button"},[...Q[3]||(Q[3]=[f("span",{class:"d-none d-sm-inline",style:{"white-space":"nowrap"}},"Share Link",-1),f("span",{class:"d-inline d-sm-none"},"Share",-1)])])])]),f("input",{ref_key:"fileInput",ref:r,type:"file",accept:".json,.png",onChange:m,style:{display:"none"}},null,544),l.value?(ae(),pe("div",{key:0,class:"modal fade show d-block",tabindex:"-1",onClick:pt(E,["self"])},[f("div",gb,[f("div",bb,[f("div",{class:"modal-header"},[Q[4]||(Q[4]=f("h5",{class:"modal-title"},"Import from URL",-1)),f("button",{type:"button",class:"btn-close",onClick:E,"aria-label":"Close"})]),f("div",yb,[f("div",wb,[Q[5]||(Q[5]=f("label",{for:"urlInput",class:"form-label"},"Enter URL",-1)),Ge(f("input",{id:"urlInput","onUpdate:modelValue":Q[0]||(Q[0]=W=>a.value=W),type:"url",class:"form-control",placeholder:"https://...",onKeyup:b0(B,["enter"])},null,544),[[Ut,a.value]]),Q[6]||(Q[6]=f("div",{class:"form-text"}," Paste a link to a JSON file, GitHub Gist, or a share link. All formats are automatically detected. ",-1))])]),f("div",xb,[f("button",{type:"button",class:"btn btn-secondary",onClick:E}," Cancel "),f("button",{type:"button",class:"btn btn-primary",onClick:B,disabled:!a.value}," Import ",8,Db)])])])])):Ke("",!0)]))}}),St=(t,e)=>{const n=t.__vccOpts||t;for(const[o,i]of e)n[o]=i;return n},Cb=St(_b,[["__scopeId","data-v-aa6b5fcc"]]);/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Eb(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,i,s,r;return r={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(d){return function(h){return a([d,h])}}function a(d){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],i=0}finally{o=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var rs=(function(){function t(e,n){this.next=null,this.key=e,this.data=n,this.left=null,this.right=null}return t})();function Ab(t,e){return t>e?1:t<e?-1:0}function Xo(t,e,n){for(var o=new rs(null,null),i=o,s=o;;){var r=n(t,e.key);if(r<0){if(e.left===null)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,e=l,e.left===null)break}s.left=e,s=e,e=e.left}else if(r>0){if(e.right===null)break;if(n(t,e.right.key)>0){var l=e.right;if(e.right=l.left,l.left=e,e=l,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,s.left=e.right,e.left=o.right,e.right=o.left,e}function na(t,e,n,o){var i=new rs(t,e);if(n===null)return i.left=i.right=null,i;n=Xo(t,n,o);var s=o(t,n.key);return s<0?(i.left=n.left,i.right=n,n.left=null):s>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Ld(t,e,n){var o=null,i=null;if(e){e=Xo(t,e,n);var s=n(e.key,t);s===0?(o=e.left,i=e.right):s<0?(i=e.right,e.right=null,o=e):(o=e.left,e.left=null,i=e)}return{left:o,right:i}}function Sb(t,e,n){return e===null?t:(t===null||(e=Xo(t.key,e,n),e.left=t),e)}function $a(t,e,n,o,i){if(t){o(""+e+(n?"└── ":"├── ")+i(t)+`
`);var s=e+(n?"    ":"│   ");t.left&&$a(t.left,s,!1,o,i),t.right&&$a(t.right,s,!0,o,i)}}var du=(function(){function t(e){e===void 0&&(e=Ab),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=na(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var o=new rs(e,n);this._root===null&&(o.left=o.right=null,this._size++,this._root=o);var i=this._comparator,s=Xo(e,this._root,i),r=i(e,s.key);return r===0?this._root=s:(r<0?(o.left=s.left,o.right=s,s.left=null):r>0&&(o.right=s.right,o.left=s,s.right=null),this._size++,this._root=o),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,o){var i;if(n===null)return null;n=Xo(e,n,o);var s=o(e,n.key);return s===0?(n.left===null?i=n.right:(i=Xo(e,n.left,o),i.right=n.right),this._size--,i):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Xo(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,o=this._comparator;n;){var i=o(e,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=Xo(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var n=this._root,o=this._comparator;n;){var i=o(e,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},t.prototype.forEach=function(e,n){for(var o=this._root,i=[],s=!1;!s;)o!==null?(i.push(o),o=o.left):i.length!==0?(o=i.pop(),e.call(n,o),o=o.right):s=!0;return this},t.prototype.range=function(e,n,o,i){for(var s=[],r=this._comparator,l=this._root,a;s.length!==0||l;)if(l)s.push(l),l=l.left;else{if(l=s.pop(),a=r(l.key,n),a>0)break;if(r(l.key,e)>=0&&o.call(i,l))return this;l=l.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){var o=n.key;return e.push(o)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){var o=n.data;return e.push(o)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,o=!1,i=0,s=[];!o;)if(n)s.push(n),n=n.left;else if(s.length>0){if(n=s.pop(),i===e)return n;i++,n=n.right}else o=!0;return null},t.prototype.next=function(e){var n=this._root,o=null;if(e.right){for(o=e.right;o.left;)o=o.left;return o}for(var i=this._comparator;n;){var s=i(e.key,n.key);if(s===0)break;s<0?(o=n,n=n.left):n=n.right}return o},t.prototype.prev=function(e){var n=this._root,o=null;if(e.left!==null){for(o=e.left;o.right;)o=o.right;return o}for(var i=this._comparator;n;){var s=i(e.key,n.key);if(s===0)break;s<0?n=n.left:(o=n,n=n.right)}return o},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return kb(this._root)},t.prototype.load=function(e,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1);var i=e.length,s=this._comparator;if(o&&Oa(e,n,0,i-1,s),this._root===null)this._root=La(e,n,0,i),this._size=i;else{var r=Mb(this.toList(),Fb(e,n),s);i=this._size+i,this._root=Ia({head:r},0,i)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(o){return String(o.key)});var n=[];return $a(this._root,"",!0,function(o){return n.push(o)},e),n.join("")},t.prototype.update=function(e,n,o){var i=this._comparator,s=Ld(e,this._root,i),r=s.left,l=s.right;i(e,n)<0?l=na(n,o,l,i):r=na(n,o,r,i),this._root=Sb(r,l,i)},t.prototype.split=function(e){return Ld(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e,n,o;return Eb(this,function(i){switch(i.label){case 0:e=this._root,n=[],o=!1,i.label=1;case 1:return o?[3,6]:e===null?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return n.length===0?[3,4]:(e=n.pop(),[4,e]);case 3:return i.sent(),e=e.right,[3,5];case 4:o=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},t})();function La(t,e,n,o){var i=o-n;if(i>0){var s=n+Math.floor(i/2),r=t[s],l=e[s],a=new rs(r,l);return a.left=La(t,e,n,s),a.right=La(t,e,s+1,o),a}return null}function Fb(t,e){for(var n=new rs(null,null),o=n,i=0;i<t.length;i++)o=o.next=new rs(t[i],e[i]);return o.next=null,n.next}function kb(t){for(var e=t,n=[],o=!1,i=new rs(null,null),s=i;!o;)e?(n.push(e),e=e.left):n.length>0?(e=s=s.next=n.pop(),e=e.right):o=!0;return s.next=null,i.next}function Ia(t,e,n){var o=n-e;if(o>0){var i=e+Math.floor(o/2),s=Ia(t,e,i),r=t.head;return r.left=s,t.head=t.head.next,r.right=Ia(t,i+1,n),r}return null}function Mb(t,e,n){for(var o=new rs(null,null),i=o,s=t,r=e;s!==null&&r!==null;)n(s.key,r.key)<0?(i.next=s,s=s.next):(i.next=r,r=r.next),i=i.next;return s!==null?i.next=s:r!==null&&(i.next=r),o.next}function Oa(t,e,n,o,i){if(!(n>=o)){for(var s=t[n+o>>1],r=n-1,l=o+1;;){do r++;while(i(t[r],s)<0);do l--;while(i(t[l],s)>0);if(r>=l)break;var a=t[r];t[r]=t[l],t[l]=a,a=e[r],e[r]=e[l],e[l]=a}Oa(t,e,n,l,i),Oa(t,e,l+1,o,i)}}const Fo=11102230246251565e-32,dn=134217729,Tb=(3+8*Fo)*Fo;function oa(t,e,n,o,i){let s,r,l,a,d=e[0],h=o[0],c=0,p=0;h>d==h>-d?(s=d,d=e[++c]):(s=h,h=o[++p]);let m=0;if(c<t&&p<n)for(h>d==h>-d?(r=d+s,l=s-(r-d),d=e[++c]):(r=h+s,l=s-(r-h),h=o[++p]),s=r,l!==0&&(i[m++]=l);c<t&&p<n;)h>d==h>-d?(r=s+d,a=r-s,l=s-(r-a)+(d-a),d=e[++c]):(r=s+h,a=r-s,l=s-(r-a)+(h-a),h=o[++p]),s=r,l!==0&&(i[m++]=l);for(;c<t;)r=s+d,a=r-s,l=s-(r-a)+(d-a),d=e[++c],s=r,l!==0&&(i[m++]=l);for(;p<n;)r=s+h,a=r-s,l=s-(r-a)+(h-a),h=o[++p],s=r,l!==0&&(i[m++]=l);return(s!==0||m===0)&&(i[m++]=s),m}function $b(t,e){let n=e[0];for(let o=1;o<t;o++)n+=e[o];return n}function Xi(t){return new Float64Array(t)}const Lb=(3+16*Fo)*Fo,Ib=(2+12*Fo)*Fo,Ob=(9+64*Fo)*Fo*Fo,Ws=Xi(4),Id=Xi(8),Od=Xi(12),Rd=Xi(16),bn=Xi(4);function Rb(t,e,n,o,i,s,r){let l,a,d,h,c,p,m,g,D,T,y,C,M,E,R,L,B,x;const I=t-i,N=n-i,z=e-s,F=o-s;E=I*F,p=dn*I,m=p-(p-I),g=I-m,p=dn*F,D=p-(p-F),T=F-D,R=g*T-(E-m*D-g*D-m*T),L=z*N,p=dn*z,m=p-(p-z),g=z-m,p=dn*N,D=p-(p-N),T=N-D,B=g*T-(L-m*D-g*D-m*T),y=R-B,c=R-y,Ws[0]=R-(y+c)+(c-B),C=E+y,c=C-E,M=E-(C-c)+(y-c),y=M-L,c=M-y,Ws[1]=M-(y+c)+(c-L),x=C+y,c=x-C,Ws[2]=C-(x-c)+(y-c),Ws[3]=x;let te=$b(4,Ws),H=Ib*r;if(te>=H||-te>=H||(c=t-I,l=t-(I+c)+(c-i),c=n-N,d=n-(N+c)+(c-i),c=e-z,a=e-(z+c)+(c-s),c=o-F,h=o-(F+c)+(c-s),l===0&&a===0&&d===0&&h===0)||(H=Ob*r+Tb*Math.abs(te),te+=I*h+F*l-(z*d+N*a),te>=H||-te>=H))return te;E=l*F,p=dn*l,m=p-(p-l),g=l-m,p=dn*F,D=p-(p-F),T=F-D,R=g*T-(E-m*D-g*D-m*T),L=a*N,p=dn*a,m=p-(p-a),g=a-m,p=dn*N,D=p-(p-N),T=N-D,B=g*T-(L-m*D-g*D-m*T),y=R-B,c=R-y,bn[0]=R-(y+c)+(c-B),C=E+y,c=C-E,M=E-(C-c)+(y-c),y=M-L,c=M-y,bn[1]=M-(y+c)+(c-L),x=C+y,c=x-C,bn[2]=C-(x-c)+(y-c),bn[3]=x;const Q=oa(4,Ws,4,bn,Id);E=I*h,p=dn*I,m=p-(p-I),g=I-m,p=dn*h,D=p-(p-h),T=h-D,R=g*T-(E-m*D-g*D-m*T),L=z*d,p=dn*z,m=p-(p-z),g=z-m,p=dn*d,D=p-(p-d),T=d-D,B=g*T-(L-m*D-g*D-m*T),y=R-B,c=R-y,bn[0]=R-(y+c)+(c-B),C=E+y,c=C-E,M=E-(C-c)+(y-c),y=M-L,c=M-y,bn[1]=M-(y+c)+(c-L),x=C+y,c=x-C,bn[2]=C-(x-c)+(y-c),bn[3]=x;const W=oa(Q,Id,4,bn,Od);E=l*h,p=dn*l,m=p-(p-l),g=l-m,p=dn*h,D=p-(p-h),T=h-D,R=g*T-(E-m*D-g*D-m*T),L=a*d,p=dn*a,m=p-(p-a),g=a-m,p=dn*d,D=p-(p-d),T=d-D,B=g*T-(L-m*D-g*D-m*T),y=R-B,c=R-y,bn[0]=R-(y+c)+(c-B),C=E+y,c=C-E,M=E-(C-c)+(y-c),y=M-L,c=M-y,bn[1]=M-(y+c)+(c-L),x=C+y,c=x-C,bn[2]=C-(x-c)+(y-c),bn[3]=x;const J=oa(W,Od,4,bn,Rd);return Rd[J-1]}function Pb(t,e,n,o,i,s){const r=(e-s)*(n-i),l=(t-i)*(o-s),a=r-l,d=Math.abs(r+l);return Math.abs(a)>=Lb*d?a:-Rb(t,e,n,o,i,s,d)}var Uh={};const xi=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,Ra=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,o=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,s=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:o,y:s}}};let Zo=Number.EPSILON;Zo===void 0&&(Zo=Math.pow(2,-52));const Bb=Zo*Zo,Pd=(t,e)=>{if(-Zo<t&&t<Zo&&-Zo<e&&e<Zo)return 0;const n=t-e;return n*n<Bb*t*e?0:t<e?-1:1};class Nb{constructor(){this.reset()}reset(){this.xRounder=new Bd,this.yRounder=new Bd}round(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}class Bd{constructor(){this.tree=new du,this.round(0)}round(e){const n=this.tree.add(e),o=this.tree.prev(n);if(o!==null&&Pd(n.key,o.key)===0)return this.tree.remove(e),o.key;const i=this.tree.next(n);return i!==null&&Pd(n.key,i.key)===0?(this.tree.remove(e),i.key):e}}const Hi=new Nb,kr=(t,e)=>t.x*e.y-t.y*e.x,Hh=(t,e)=>t.x*e.x+t.y*e.y,Nd=(t,e,n)=>{const o=Pb(t.x,t.y,e.x,e.y,n.x,n.y);return o>0?-1:o<0?1:0},jr=t=>Math.sqrt(Hh(t,t)),Vb=(t,e,n)=>{const o={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return kr(i,o)/jr(i)/jr(o)},Kb=(t,e,n)=>{const o={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Hh(i,o)/jr(i)/jr(o)},Vd=(t,e,n)=>e.y===0?null:{x:t.x+e.x/e.y*(n-t.y),y:n},Kd=(t,e,n)=>e.x===0?null:{x:n,y:t.y+e.y/e.x*(n-t.x)},zb=(t,e,n,o)=>{if(e.x===0)return Kd(n,o,t.x);if(o.x===0)return Kd(t,e,n.x);if(e.y===0)return Vd(n,o,t.y);if(o.y===0)return Vd(t,e,n.y);const i=kr(e,o);if(i==0)return null;const s={x:n.x-t.x,y:n.y-t.y},r=kr(s,e)/i,l=kr(s,o)/i,a=t.x+l*e.x,d=n.x+r*o.x,h=t.y+l*e.y,c=n.y+r*o.y,p=(a+d)/2,m=(h+c)/2;return{x:p,y:m}};class Kn{static compare(e,n){const o=Kn.comparePoints(e.point,n.point);return o!==0?o:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:ts.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}constructor(e,n){e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let o=0,i=n.length;o<i;o++){const s=n[o];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const o=this.point.events[n];if(o.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&o.otherSE.point.events===s.otherSE.point.events&&o.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,o=this.point.events.length;n<o;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,o=i=>{const s=i.otherSE;n.set(i,{sine:Vb(this.point,e.point,s.point),cosine:Kb(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||o(i),n.has(s)||o(s);const{sine:r,cosine:l}=n.get(i),{sine:a,cosine:d}=n.get(s);return r>=0&&a>=0?l<d?1:l>d?-1:0:r<0&&a<0?l<d?-1:l>d?1:0:a<r?-1:a>r?1:0}}}let Ub=0;class ts{static compare(e,n){const o=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,r=n.rightSE.point.x;if(r<o)return 1;if(s<i)return-1;const l=e.leftSE.point.y,a=n.leftSE.point.y,d=e.rightSE.point.y,h=n.rightSE.point.y;if(o<i){if(a<l&&a<d)return 1;if(a>l&&a>d)return-1;const c=e.comparePoint(n.leftSE.point);if(c<0)return 1;if(c>0)return-1;const p=n.comparePoint(e.rightSE.point);return p!==0?p:-1}if(o>i){if(l<a&&l<h)return-1;if(l>a&&l>h)return 1;const c=n.comparePoint(e.leftSE.point);if(c!==0)return c;const p=e.comparePoint(n.rightSE.point);return p<0?1:p>0?-1:1}if(l<a)return-1;if(l>a)return 1;if(s<r){const c=n.comparePoint(e.rightSE.point);if(c!==0)return c}if(s>r){const c=e.comparePoint(n.rightSE.point);if(c<0)return 1;if(c>0)return-1}if(s!==r){const c=d-l,p=s-o,m=h-a,g=r-i;if(c>p&&m<g)return 1;if(c<p&&m>g)return-1}return s>r?1:s<r||d<h?-1:d>h?1:e.id<n.id?-1:e.id>n.id?1:0}constructor(e,n,o,i){this.id=++Ub,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=o,this.windings=i}static fromRing(e,n,o){let i,s,r;const l=Kn.comparePoints(e,n);if(l<0)i=e,s=n,r=1;else if(l>0)i=n,s=e,r=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const a=new Kn(i,!0),d=new Kn(s,!1);return new ts(a,d,[o],[r])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}comparePoint(e){if(this.isAnEndpoint(e))return 0;const n=this.leftSE.point,o=this.rightSE.point,i=this.vector();if(n.x===o.x)return e.x===n.x?0:e.x<n.x?1:-1;const s=(e.y-n.y)/i.y,r=n.x+s*i.x;if(e.x===r)return 0;const l=(e.x-n.x)/i.x,a=n.y+l*i.y;return e.y===a?0:e.y<a?-1:1}getIntersection(e){const n=this.bbox(),o=e.bbox(),i=Ra(n,o);if(i===null)return null;const s=this.leftSE.point,r=this.rightSE.point,l=e.leftSE.point,a=e.rightSE.point,d=xi(n,l)&&this.comparePoint(l)===0,h=xi(o,s)&&e.comparePoint(s)===0,c=xi(n,a)&&this.comparePoint(a)===0,p=xi(o,r)&&e.comparePoint(r)===0;if(h&&d)return p&&!c?r:!p&&c?a:null;if(h)return c&&s.x===a.x&&s.y===a.y?null:s;if(d)return p&&r.x===l.x&&r.y===l.y?null:l;if(p&&c)return null;if(p)return r;if(c)return a;const m=zb(s,this.vector(),l,e.vector());return m===null||!xi(i,m)?null:Hi.round(m.x,m.y)}split(e){const n=[],o=e.events!==void 0,i=new Kn(e,!0),s=new Kn(e,!1),r=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const l=new ts(i,r,this.rings.slice(),this.windings.slice());return Kn.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),Kn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,o=this.windings.length;n<o;n++)this.windings[n]*=-1}consume(e){let n=this,o=e;for(;n.consumedBy;)n=n.consumedBy;for(;o.consumedBy;)o=o.consumedBy;const i=ts.compare(n,o);if(i!==0){if(i>0){const s=n;n=o,o=s}if(n.prev===o){const s=n;n=o,o=s}for(let s=0,r=o.rings.length;s<r;s++){const l=o.rings[s],a=o.windings[s],d=n.rings.indexOf(l);d===-1?(n.rings.push(l),n.windings.push(a)):n.windings[d]+=a}o.rings=null,o.windings=null,o.consumedBy=n,o.leftSE.consumedBy=n.leftSE,o.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,o=this._afterState.windings,i=this._afterState.multiPolys;for(let l=0,a=this.rings.length;l<a;l++){const d=this.rings[l],h=this.windings[l],c=n.indexOf(d);c===-1?(n.push(d),o.push(h)):o[c]+=h}const s=[],r=[];for(let l=0,a=n.length;l<a;l++){if(o[l]===0)continue;const d=n[l],h=d.poly;if(r.indexOf(h)===-1)if(d.isExterior)s.push(h);else{r.indexOf(h)===-1&&r.push(h);const c=s.indexOf(d.poly);c!==-1&&s.splice(c,1)}}for(let l=0,a=s.length;l<a;l++){const d=s[l].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Xn.type){case"union":{const o=e.length===0,i=n.length===0;this._isInResult=o!==i;break}case"intersection":{let o,i;e.length<n.length?(o=e.length,i=n.length):(o=n.length,i=e.length),this._isInResult=i===Xn.numMultiPolys&&o<i;break}case"xor":{const o=Math.abs(e.length-n.length);this._isInResult=o%2===1;break}case"difference":{const o=i=>i.length===1&&i[0].isSubject;this._isInResult=o(e)!==o(n);break}default:throw new Error(`Unrecognized operation type found ${Xn.type}`)}return this._isInResult}}class zd{constructor(e,n,o){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=Hi.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let s=i;for(let r=1,l=e.length;r<l;r++){if(typeof e[r][0]!="number"||typeof e[r][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let a=Hi.round(e[r][0],e[r][1]);a.x===s.x&&a.y===s.y||(this.segments.push(ts.fromRing(s,a,this)),a.x<this.bbox.ll.x&&(this.bbox.ll.x=a.x),a.y<this.bbox.ll.y&&(this.bbox.ll.y=a.y),a.x>this.bbox.ur.x&&(this.bbox.ur.x=a.x),a.y>this.bbox.ur.y&&(this.bbox.ur.y=a.y),s=a)}(i.x!==s.x||i.y!==s.y)&&this.segments.push(ts.fromRing(s,i,this))}getSweepEvents(){const e=[];for(let n=0,o=this.segments.length;n<o;n++){const i=this.segments[n];e.push(i.leftSE),e.push(i.rightSE)}return e}}class Hb{constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new zd(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let o=1,i=e.length;o<i;o++){const s=new zd(e[o],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,o=this.interiorRings.length;n<o;n++){const i=this.interiorRings[n].getSweepEvents();for(let s=0,r=i.length;s<r;s++)e.push(i[s])}return e}}class Ud{constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let o=0,i=e.length;o<i;o++){const s=new Hb(e[o],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,o=this.polys.length;n<o;n++){const i=this.polys[n].getSweepEvents();for(let s=0,r=i.length;s<r;s++)e.push(i[s])}return e}}class Wr{static factory(e){const n=[];for(let o=0,i=e.length;o<i;o++){const s=e[o];if(!s.isInResult()||s.ringOut)continue;let r=null,l=s.leftSE,a=s.rightSE;const d=[l],h=l.point,c=[];for(;r=l,l=a,d.push(l),l.point!==h;)for(;;){const p=l.getAvailableLinkedEvents();if(p.length===0){const D=d[0].point,T=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${D.x}, ${D.y}]. Last matching segment found ends at [${T.x}, ${T.y}].`)}if(p.length===1){a=p[0].otherSE;break}let m=null;for(let D=0,T=c.length;D<T;D++)if(c[D].point===l.point){m=D;break}if(m!==null){const D=c.splice(m)[0],T=d.splice(D.index);T.unshift(T[0].otherSE),n.push(new Wr(T.reverse()));continue}c.push({index:d.length,point:l.point});const g=l.getLeftmostComparator(r);a=p.sort(g)[0].otherSE;break}n.push(new Wr(d))}return n}constructor(e){this.events=e;for(let n=0,o=e.length;n<o;n++)e[n].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point;const n=[e];for(let d=1,h=this.events.length-1;d<h;d++){const c=this.events[d].point,p=this.events[d+1].point;Nd(c,e,p)!==0&&(n.push(c),e=c)}if(n.length===1)return null;const o=n[0],i=n[1];Nd(o,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,r=this.isExteriorRing()?0:n.length-1,l=this.isExteriorRing()?n.length:-1,a=[];for(let d=r;d!=l;d+=s)a.push([n[d].x,n[d].y]);return a}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let i=1,s=this.events.length;i<s;i++){const r=this.events[i];Kn.compare(e,r)>0&&(e=r)}let n=e.segment.prevInResult(),o=n?n.prevInResult():null;for(;;){if(!n)return null;if(!o)return n.ringOut;if(o.ringOut!==n.ringOut)return o.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=o.prevInResult(),o=n?n.prevInResult():null}}}class Hd{constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(let n=0,o=this.interiorRings.length;n<o;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}}class jb{constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,o=this.polys.length;n<o;n++){const i=this.polys[n].getGeom();i!==null&&e.push(i)}return e}_composePolys(e){const n=[];for(let o=0,i=e.length;o<i;o++){const s=e[o];if(!s.poly)if(s.isExteriorRing())n.push(new Hd(s));else{const r=s.enclosingRing();r.poly||n.push(new Hd(r)),r.poly.addInterior(s)}}return n}}class Wb{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ts.compare;this.queue=e,this.tree=new du(n),this.segments=[]}process(e){const n=e.segment,o=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),o;const i=e.isLeft?this.tree.add(n):this.tree.find(n);if(!i)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let s=i,r=i,l,a;for(;l===void 0;)s=this.tree.prev(s),s===null?l=null:s.key.consumedBy===void 0&&(l=s.key);for(;a===void 0;)r=this.tree.next(r),r===null?a=null:r.key.consumedBy===void 0&&(a=r.key);if(e.isLeft){let d=null;if(l){const c=l.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(d=c),!l.isAnEndpoint(c))){const p=this._splitSafely(l,c);for(let m=0,g=p.length;m<g;m++)o.push(p[m])}}let h=null;if(a){const c=a.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(h=c),!a.isAnEndpoint(c))){const p=this._splitSafely(a,c);for(let m=0,g=p.length;m<g;m++)o.push(p[m])}}if(d!==null||h!==null){let c=null;d===null?c=h:h===null?c=d:c=Kn.comparePoints(d,h)<=0?d:h,this.queue.remove(n.rightSE),o.push(n.rightSE);const p=n.split(c);for(let m=0,g=p.length;m<g;m++)o.push(p[m])}o.length>0?(this.tree.remove(n),o.push(e)):(this.segments.push(n),n.prev=l)}else{if(l&&a){const d=l.getIntersection(a);if(d!==null){if(!l.isAnEndpoint(d)){const h=this._splitSafely(l,d);for(let c=0,p=h.length;c<p;c++)o.push(h[c])}if(!a.isAnEndpoint(d)){const h=this._splitSafely(a,d);for(let c=0,p=h.length;c<p;c++)o.push(h[c])}}}this.tree.remove(n)}return o}_splitSafely(e,n){this.tree.remove(e);const o=e.rightSE;this.queue.remove(o);const i=e.split(n);return i.push(o),e.consumedBy===void 0&&this.tree.add(e),i}}const jd=typeof process<"u"&&Uh.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,qb=typeof process<"u"&&Uh.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Yb{run(e,n,o){Xn.type=e,Hi.reset();const i=[new Ud(n,!0)];for(let c=0,p=o.length;c<p;c++)i.push(new Ud(o[c],!1));if(Xn.numMultiPolys=i.length,Xn.type==="difference"){const c=i[0];let p=1;for(;p<i.length;)Ra(i[p].bbox,c.bbox)!==null?p++:i.splice(p,1)}if(Xn.type==="intersection")for(let c=0,p=i.length;c<p;c++){const m=i[c];for(let g=c+1,D=i.length;g<D;g++)if(Ra(m.bbox,i[g].bbox)===null)return[]}const s=new du(Kn.compare);for(let c=0,p=i.length;c<p;c++){const m=i[c].getSweepEvents();for(let g=0,D=m.length;g<D;g++)if(s.insert(m[g]),s.size>jd)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const r=new Wb(s);let l=s.size,a=s.pop();for(;a;){const c=a.key;if(s.size===l){const m=c.segment;throw new Error(`Unable to pop() ${c.isLeft?"left":"right"} SweepEvent [${c.point.x}, ${c.point.y}] from segment #${m.id} [${m.leftSE.point.x}, ${m.leftSE.point.y}] -> [${m.rightSE.point.x}, ${m.rightSE.point.y}] from queue.`)}if(s.size>jd)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(r.segments.length>qb)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const p=r.process(c);for(let m=0,g=p.length;m<g;m++){const D=p[m];D.consumedBy===void 0&&s.insert(D)}l=s.size,a=s.pop()}Hi.reset();const d=Wr.factory(r.segments);return new jb(d).getGeom()}}const Xn=new Yb,Xb=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return Xn.run("union",t,n)},Jb=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return Xn.run("intersection",t,n)},Gb=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return Xn.run("xor",t,n)},Zb=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return Xn.run("difference",t,n)};var Qb={union:Xb,intersection:Jb,xor:Gb,difference:Zb};const Wd={keySpacing:0,bevelMargin:6,bevelOffsetTop:3,bevelOffsetBottom:3,padding:3,roundOuter:5,roundInner:3};class ey{ctx;options;imageCache;imageLoadCallbacks;onImageLoadCallback;onImageErrorCallback;constructor(e,n){this.ctx=e.getContext("2d"),this.options=n,this.imageCache=new Map,this.imageLoadCallbacks=new Map}setImageLoadCallback(e){this.onImageLoadCallback=e}setImageErrorCallback(e){this.onImageErrorCallback=e}getContext(){return this.ctx}getOptions(){return this.options}updateOptions(e){this.options=e}isSvgUrl(e){return e.toLowerCase().endsWith(".svg")||e.includes("image/svg+xml")}svgToDataUrl(e){return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e)}`}loadImage(e,n){const o=this.imageCache.get(e);if(o==="loading"){if(n){const s=this.imageLoadCallbacks.get(e)||[];s.push(n),this.imageLoadCallbacks.set(e,s)}return}else if(o instanceof HTMLImageElement||o==="error"){n&&n();return}this.imageCache.set(e,"loading");const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{this.isSvgUrl(e)&&(!i.naturalWidth||!i.naturalHeight)&&console.warn(`SVG image at ${e} may not render correctly in all browsers. SVG files should have explicit width and height attributes (not percentages).`),this.imageCache.set(e,i);const s=this.imageLoadCallbacks.get(e)||[];n&&s.push(n),s.forEach(r=>r()),this.imageLoadCallbacks.delete(e)},i.onerror=()=>{this.imageCache.set(e,"error"),console.warn(`Failed to load image: ${e}`),this.onImageErrorCallback&&this.onImageErrorCallback(e);const s=this.imageLoadCallbacks.get(e)||[];n&&s.push(n),s.forEach(r=>r()),this.imageLoadCallbacks.delete(e)},i.src=e}getImage(e){const n=this.imageCache.get(e);return n instanceof HTMLImageElement?n:null}getRenderParams(e){const n={...Wd,unit:this.options.unit},o={};o.nonRectangular=e.width!==e.width2||e.height!==e.height2||e.x2||e.y2,o.capwidth=S.mul(n.unit,e.width),o.capheight=S.mul(n.unit,e.height),o.capx=S.mul(n.unit,e.x),o.capy=S.mul(n.unit,e.y),o.nonRectangular&&(o.capwidth2=S.mul(n.unit,e.width2||e.width),o.capheight2=S.mul(n.unit,e.height2||e.height),o.capx2=S.mul(n.unit,S.add(e.x,e.x2||0)),o.capy2=S.mul(n.unit,S.add(e.y,e.y2||0))),o.outercapwidth=S.max(2,S.sub(o.capwidth,S.mul(n.keySpacing,2))),o.outercapheight=S.max(2,S.sub(o.capheight,S.mul(n.keySpacing,2)));const i=S.max(0,S.div(S.sub(o.capwidth,o.outercapwidth),2)),s=S.max(0,S.div(S.sub(o.capheight,o.outercapheight),2));if(o.outercapx=S.add(o.capx,i),o.outercapy=S.add(o.capy,s),o.nonRectangular){o.outercapwidth2=S.max(2,S.sub(o.capwidth2,S.mul(n.keySpacing,2))),o.outercapheight2=S.max(2,S.sub(o.capheight2,S.mul(n.keySpacing,2)));const c=S.max(0,S.div(S.sub(o.capwidth2,o.outercapwidth2),2)),p=S.max(0,S.div(S.sub(o.capheight2,o.outercapheight2),2));o.outercapx2=S.add(o.capx2,c),o.outercapy2=S.add(o.capy2,p)}o.innercapwidth=S.max(1,S.sub(o.outercapwidth,S.mul(n.bevelMargin,2))),o.innercapheight=S.max(1,S.sub(o.outercapheight,S.add(S.mul(n.bevelMargin,2),S.sub(n.bevelOffsetBottom,n.bevelOffsetTop))));const r=S.max(0,S.div(S.sub(o.outercapwidth,o.innercapwidth),2)),l=S.max(0,S.div(S.sub(o.outercapheight,S.add(o.innercapheight,S.sub(n.bevelOffsetBottom,n.bevelOffsetTop))),2));if(o.innercapx=S.add(o.outercapx,r),o.innercapy=S.sub(S.add(o.outercapy,l),n.bevelOffsetTop),o.nonRectangular){o.innercapwidth2=S.max(1,S.sub(o.outercapwidth2,S.mul(n.bevelMargin,2))),o.innercapheight2=S.max(1,S.sub(o.outercapheight2,S.mul(n.bevelMargin,2)));const c=S.max(0,S.div(S.sub(o.outercapwidth2,o.innercapwidth2),2)),p=S.max(0,S.div(S.sub(o.outercapheight2,o.innercapheight2),2));o.innercapx2=S.add(o.outercapx2,c),o.innercapy2=S.sub(S.add(o.outercapy2,p),n.bevelOffsetTop)}const a=Math.max(1,n.padding-1);o.textcapwidth=S.max(1,S.sub(o.innercapwidth,S.mul(a,2))),o.textcapheight=S.max(1,S.sub(o.innercapheight,S.mul(a,2)));const d=S.max(0,S.div(S.sub(o.innercapwidth,o.textcapwidth),2)),h=S.max(0,S.div(S.sub(o.innercapheight,o.textcapheight),2));return o.textcapx=S.add(o.innercapx,d),o.textcapy=S.add(o.innercapy,h),o.darkColor=e.color,o.lightColor=this.lightenColor(e.color),o.origin_x=S.mul(n.unit,e.rotation_x||0),o.origin_y=S.mul(n.unit,e.rotation_y||0),o}lightenColor(e,n=1.2){const o=e.replace("#","");if(o.length!==6)return e;const i=parseInt(o.substr(0,2),16),s=parseInt(o.substr(2,2),16),r=parseInt(o.substr(4,2),16),l=U=>{const Fe=U/255;return Fe<=.03928?Fe/12.92:Math.pow((Fe+.055)/1.055,2.4)},a=U=>U<=.0031308?U*12.92*255:(1.055*Math.pow(U,1/2.4)-.055)*255,d=l(i),h=l(s),c=l(r),p=d*.4124564+h*.3575761+c*.1804375,m=d*.2126729+h*.7151522+c*.072175,g=d*.0193339+h*.119192+c*.9503041,D=p/.95047,T=m/1,y=g/1.08883,C=D>.008856?Math.pow(D,1/3):7.787*D+16/116,M=T>.008856?Math.pow(T,1/3):7.787*T+16/116,E=y>.008856?Math.pow(y,1/3):7.787*y+16/116;let R=116*M-16;const L=500*(C-M),B=200*(M-E);R=Math.min(100,R*n);const x=(R+16)/116,I=L/500+x,N=x-B/200,z=(I>.206893?Math.pow(I,3):(I*116-16)/903.3)*.95047,F=R>8?Math.pow(x,3):R/903.3,te=(N>.206893?Math.pow(N,3):(N*116-16)/903.3)*1.08883,H=z*3.2404542+F*-1.5371385+te*-.4985314,Q=z*-.969266+F*1.8760108+te*.041556,W=z*.0556434+F*-.2040259+te*1.0572252,J=Math.min(255,Math.max(0,Math.round(a(H)))),G=Math.min(255,Math.max(0,Math.round(a(Q)))),ye=Math.min(255,Math.max(0,Math.round(a(W))));return`#${J.toString(16).padStart(2,"0")}${G.toString(16).padStart(2,"0")}${ye.toString(16).padStart(2,"0")}`}getKeycapColor(e){return e.lightColor}alignToPixel(e){return Math.round(e)+.5}alignRectToPixels(e,n,o,i){const s=Math.round(e)+.5,r=Math.round(n)+.5,l=Math.round(e+o)-Math.round(e),a=Math.round(n+i)-Math.round(n);return{x:s,y:r,width:l,height:a}}alignNonRectangularKeyParams(e){const n={...e},o=this.alignRectToPixels(e.outercapx,e.outercapy,e.outercapwidth,e.outercapheight);if(n.outercapx=o.x,n.outercapy=o.y,n.outercapwidth=o.width,n.outercapheight=o.height,e.outercapx2!==void 0&&e.outercapy2!==void 0){const a=this.alignRectToPixels(e.outercapx2,e.outercapy2,e.outercapwidth2,e.outercapheight2);n.outercapx2=a.x,n.outercapy2=a.y,n.outercapwidth2=a.width,n.outercapheight2=a.height}const i=e.innercapx-e.outercapx,s=e.innercapy-e.outercapy,r=(e.outercapwidth-e.innercapwidth)/2,l=(e.outercapheight-e.innercapheight)/2;if(n.innercapx=n.outercapx+i,n.innercapy=n.outercapy+s,n.innercapwidth=n.outercapwidth-r*2,n.innercapheight=n.outercapheight-l*2,e.innercapx2!==void 0&&e.innercapy2!==void 0){const a=e.innercapx2-e.outercapx2,d=e.innercapy2-e.outercapy2,h=(e.outercapwidth2-e.innercapwidth2)/2,c=(e.outercapheight2-e.innercapheight2)/2;n.innercapx2=n.outercapx2+a,n.innercapy2=n.outercapy2+d,n.innercapwidth2=n.outercapwidth2-h*2,n.innercapheight2=n.outercapheight2-c*2}return n}drawRoundedRect(e,n,o,i,s,r,l,a=1){const d=e,h=n,c=o,p=i;this.ctx.beginPath(),this.ctx.moveTo(d+s,h),this.ctx.lineTo(d+c-s,h),this.ctx.quadraticCurveTo(d+c,h,d+c,h+s),this.ctx.lineTo(d+c,h+p-s),this.ctx.quadraticCurveTo(d+c,h+p,d+c-s,h+p),this.ctx.lineTo(d+s,h+p),this.ctx.quadraticCurveTo(d,h+p,d,h+p-s),this.ctx.lineTo(d,h+s),this.ctx.quadraticCurveTo(d,h,d+s,h),this.ctx.closePath(),r&&(this.ctx.fillStyle=r,this.ctx.fill()),l&&(this.ctx.strokeStyle=l,this.ctx.lineWidth=a,this.ctx.lineCap="square",this.ctx.lineJoin="miter",this.ctx.stroke())}makeRoundedRectPolygon(e,n,o,i,s,r=8){const l=[],a=Math.max(2,Math.floor(r));s=Math.min(s,o/2,i/2);const d=(h,c,p,m,g,D)=>{const T=[];for(let y=0;y<=D;y++){const C=y/D,M=m+C*(g-m);T.push([h+Math.cos(M)*p,c+Math.sin(M)*p])}return T};return l.push(...d(e+s,n+s,s,Math.PI,1.5*Math.PI,a)),l.push([e+o-s,n]),l.push(...d(e+o-s,n+s,s,1.5*Math.PI,2*Math.PI,a)),l.push([e+o,n+i-s]),l.push(...d(e+o-s,n+i-s,s,0,.5*Math.PI,a)),l.push([e+s,n+i]),l.push(...d(e+s,n+i-s,s,.5*Math.PI,Math.PI,a)),l.push([e,n+s]),l}polygonToPath2D(e,n=1){const o=new Path2D,i=s=>{if(s.length!==0){o.moveTo(s[0][0]/n,s[0][1]/n);for(let r=1;r<s.length;r++)o.lineTo(s[r][0]/n,s[r][1]/n);o.closePath()}};if(Array.isArray(e)){for(const s of e)if(Array.isArray(s))for(const r of s)Array.isArray(r)&&r.length>0&&i(r)}return o}createVectorUnionPath(e,n){if(e.length===1){const s=e[0],r=new Path2D;return r.moveTo(s.x+n,s.y),r.lineTo(s.x+s.width-n,s.y),r.quadraticCurveTo(s.x+s.width,s.y,s.x+s.width,s.y+n),r.lineTo(s.x+s.width,s.y+s.height-n),r.quadraticCurveTo(s.x+s.width,s.y+s.height,s.x+s.width-n,s.y+s.height),r.lineTo(s.x+n,s.y+s.height),r.quadraticCurveTo(s.x,s.y+s.height,s.x,s.y+s.height-n),r.lineTo(s.x,s.y+n),r.quadraticCurveTo(s.x,s.y,s.x+n,s.y),r.closePath(),r}const o=1e3,i=e.map(s=>this.makeRoundedRectPolygon(s.x*o,s.y*o,s.width*o,s.height*o,n*o,Math.max(6,Math.ceil(n/2))));try{let s=[[i[0]]];for(let r=1;r<i.length;r++)s=Qb.union(s,[[i[r]]]);return this.polygonToPath2D(s,o)}catch(s){console.warn("Vector union calculation failed, using fallback rendering:",s);const r=new Path2D;return e.forEach(l=>{r.moveTo(l.x+n,l.y),r.lineTo(l.x+l.width-n,l.y),r.quadraticCurveTo(l.x+l.width,l.y,l.x+l.width,l.y+n),r.lineTo(l.x+l.width,l.y+l.height-n),r.quadraticCurveTo(l.x+l.width,l.y+l.height,l.x+l.width-n,l.y+l.height),r.lineTo(l.x+n,l.y+l.height),r.quadraticCurveTo(l.x,l.y+l.height,l.x,l.y+l.height-n),r.lineTo(l.x,l.y+n),r.quadraticCurveTo(l.x,l.y,l.x+n,l.y),r.closePath()}),r}}drawKeyRectangleLayers(e,n,o,i,s,r){const l=e.filter(h=>h.type==="outer"),a=e.filter(h=>h.type==="inner"),d=this.createVectorUnionPath(l,n);if(i&&(this.ctx.fillStyle=i,this.ctx.fill(d)),o&&(this.ctx.strokeStyle=o,this.ctx.lineWidth=r,this.ctx.stroke(d)),a.length>0&&s){const h=this.createVectorUnionPath(a,n);this.ctx.fillStyle=s,this.ctx.fill(h)}}drawRotationOriginIndicator(e){const n=S.mul(e.rotation_x||0,this.options.unit),o=S.mul(e.rotation_y||0,this.options.unit);this.ctx.save(),this.ctx.strokeStyle="#ff6b35",this.ctx.lineWidth=2,this.ctx.setLineDash([]);const i=8;this.ctx.beginPath(),this.ctx.moveTo(n-i,o),this.ctx.lineTo(n+i,o),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(n,o-i),this.ctx.lineTo(n,o+i),this.ctx.stroke(),this.ctx.fillStyle="#ff6b35",this.ctx.beginPath(),this.ctx.arc(n,o,3,0,2*Math.PI),this.ctx.fill(),this.ctx.strokeStyle="#ff6b35",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(n,o,6,0,2*Math.PI),this.ctx.stroke(),this.ctx.restore()}rotationPoints=[];calculateRotatedPoint(e,n,o,i,s){const l=document.createElement("canvas").getContext("2d");l.save();const a=o*this.options.unit,d=i*this.options.unit;l.translate(a,d),l.rotate(s),l.translate(-a,-d);const h=e*this.options.unit,c=n*this.options.unit,p=l.getTransform(),m=p.a*h+p.c*c+p.e,g=p.b*h+p.d*c+p.f;return l.restore(),{x:m/this.options.unit,y:g/this.options.unit}}drawRotationPoints(e,n,o){e.length!==0&&(this.rotationPoints=[],this.ctx.save(),e.forEach((i,s)=>{const r=i.rotation_angle&&i.rotation_angle!==0,l=r?S.degreesToRadians(i.rotation_angle):0,a=i.rotation_x!==void 0?i.rotation_x:i.x+i.width/2,d=i.rotation_y!==void 0?i.rotation_y:i.y+i.height/2;[{x:i.x,y:i.y,corner:"top-left"},{x:i.x+i.width,y:i.y,corner:"top-right"},{x:i.x,y:i.y+i.height,corner:"bottom-left"},{x:i.x+i.width,y:i.y+i.height,corner:"bottom-right"}].forEach((E,R)=>{const L=r?this.calculateRotatedPoint(E.x,E.y,a,d,l):{x:E.x,y:E.y},B=L.x*this.options.unit,x=L.y*this.options.unit,I=`corner-${s}-${R}`;this.rotationPoints.push({id:I,x:L.x,y:L.y,keyX:L.x,keyY:L.y,type:"corner",canvasX:B,canvasY:x});const N=n===I,z=o&&Math.abs(L.x-o.x)<.01&&Math.abs(L.y-o.y)<.01,F=N||z;this.ctx.fillStyle=F?"#dc3545":"#007bff",this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=F?3:2,this.ctx.beginPath(),this.ctx.arc(B,x,F?8:6,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke()});const c=i.x+i.width/2,p=i.y+i.height/2,m=r?this.calculateRotatedPoint(c,p,a,d,l):{x:c,y:p},g=m.x*this.options.unit,D=m.y*this.options.unit,T=`center-${s}`;this.rotationPoints.push({id:T,x:m.x,y:m.y,keyX:m.x,keyY:m.y,type:"center",canvasX:g,canvasY:D});const y=n===T,C=o&&Math.abs(m.x-o.x)<.01&&Math.abs(m.y-o.y)<.01,M=y||C;this.ctx.fillStyle=M?"#dc3545":"#0056b3",this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=M?3:2,this.ctx.beginPath(),this.ctx.arc(g,D,M?8:6,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke()}),this.ctx.restore())}getRotationPointAtPosition(e,n){for(const o of this.rotationPoints){const i=Math.sqrt(Math.pow(e-o.canvasX,2)+Math.pow(n-o.canvasY,2)),s=o.type==="corner"?10:12;if(i<=s)return{id:o.id,x:o.keyX,y:o.keyY,type:o.type}}return null}drawKey(e,n=!1){let o=this.getRenderParams(e);const i={...Wd,unit:this.options.unit,strokeWidth:n?2:1};if(this.ctx.save(),e.rotation_angle&&(this.ctx.translate(o.origin_x,o.origin_y),this.ctx.rotate(S.degreesToRadians(e.rotation_angle)),this.ctx.translate(-o.origin_x,-o.origin_y)),e.ghost&&(this.ctx.globalAlpha=.3),o.nonRectangular&&o.outercapx2!==void 0)o=this.alignNonRectangularKeyParams(o);else{const r=o.outercapx,l=o.outercapy,a=this.alignRectToPixels(o.outercapx,o.outercapy,o.outercapwidth,o.outercapheight),d=a.x-r,h=a.y-l;o.outercapx=a.x,o.outercapy=a.y,o.outercapwidth=a.width,o.outercapheight=a.height,o.innercapx=o.innercapx+d,o.innercapy=o.innercapy+h}const s=[];s.push({x:o.outercapx,y:o.outercapy,width:o.outercapwidth,height:o.outercapheight,type:"outer"}),o.nonRectangular&&o.outercapx2!==void 0&&s.push({x:o.outercapx2,y:o.outercapy2,width:o.outercapwidth2,height:o.outercapheight2,type:"outer"}),e.ghost||(s.push({x:o.innercapx,y:o.innercapy,width:o.innercapwidth,height:o.innercapheight,type:"inner"}),o.nonRectangular&&!e.stepped&&o.innercapx2!==void 0&&s.push({x:o.innercapx2,y:o.innercapy2,width:o.innercapwidth2,height:o.innercapheight2,type:"inner"})),e.decal||this.drawKeyRectangleLayers(s,i.roundOuter,n?"#dc3545":"#000000",o.darkColor,o.lightColor,i.strokeWidth),e.decal&&n&&s.filter(l=>l.type==="outer").forEach(l=>{this.drawRoundedRect(l.x,l.y,l.width,l.height,i.roundOuter,void 0,"#dc3545",i.strokeWidth)}),e.nub&&this.drawHomingNub(o),this.drawKeyLabels(e,o),this.ctx.restore()}drawHomingNub(e){const n=e.innercapx+e.innercapwidth/2,o=e.innercapy+e.innercapheight*.9,i=10,s=2;this.ctx.fillStyle="rgba(0, 0, 0, 0.3)",this.ctx.fillRect(n-i/2,o-s/2,i,s)}drawKeyLabels(e,n){const o=[{align:"left",baseline:"hanging"},{align:"center",baseline:"hanging"},{align:"right",baseline:"hanging"},{align:"left",baseline:"middle"},{align:"center",baseline:"middle"},{align:"right",baseline:"middle"},{align:"left",baseline:"alphabetic"},{align:"center",baseline:"alphabetic"},{align:"right",baseline:"alphabetic"},{align:"left",baseline:"hanging"},{align:"center",baseline:"hanging"},{align:"right",baseline:"hanging"}];e.labels.forEach((i,s)=>{if(!i||s>=o.length)return;const r=o[s],l=e.textColor[s]||e.default.textColor,a=e.textSize[s]||e.default.textSize;let d,h;const c=1,p=3;r.align==="left"?d=n.textcapx+c:r.align==="right"?d=n.textcapx+n.textcapwidth-c:d=n.textcapx+n.textcapwidth*.5;let m=6+2*a;s>=9&&(m=Math.min(10,m*.8));const g=this.options.fontFamily||'"Helvetica Neue", Helvetica, Arial, sans-serif';if(this.ctx.font=`${m}px ${g}`,s>=9)h=n.innercapy+n.innercapheight+1;else{const M=n.textcapy+p,E=n.textcapy+n.textcapheight*.5+1,R=n.textcapy+n.textcapheight-p;s>=0&&s<=2?h=M:s>=3&&s<=5?h=E:s>=6&&s<=8?h=R:h=E}this.ctx.fillStyle=l,this.ctx.textAlign=r.align,this.ctx.textBaseline=r.baseline;const D=this.calculateAvailableWidth(n),T=this.calculateAvailableHeight(n),y=/^<img\s+[^>]+>\s*$/.test(i),C=/^<svg[^>]*>[\s\S]*?<\/svg>\s*$/.test(i);if(y||C)this.drawImageLabel(i,n,r,s);else{const M=this.processLabelText(i);this.drawWrappedText(M,d,h,D,T,r)}})}drawImageLabel(e,n,o,i){const r=this.parseHtmlText(e).find(p=>p.type==="image"||p.type==="svg");if(!r)return;let l=null,a,d;if(r.type==="svg"&&r.svgContent){const p=this.svgToDataUrl(r.svgContent);if(l=this.getImage(p),!l){this.loadImage(p,this.onImageLoadCallback);return}a=r.width||l.naturalWidth||32,d=r.height||l.naturalHeight||32}else if(r.type==="image"&&r.src){if(l=this.getImage(r.src),!l){this.loadImage(r.src,this.onImageLoadCallback);return}a=r.width||l.naturalWidth,d=r.height||l.naturalHeight}else return;let h,c;o.align==="left"?h=n.innercapx:o.align==="center"?h=n.innercapx+n.innercapwidth/2-a/2:h=n.innercapx+n.innercapwidth-a,i>=0&&i<=2?c=n.innercapy:i>=3&&i<=5?c=n.innercapy+n.innercapheight/2-d/2:i>=6&&i<=8?c=n.innercapy+n.innercapheight-d:i>=9?c=n.capy+n.capheight+1:c=n.innercapy,this.ctx.drawImage(l,h,c,a,d)}processLabelText(e){return e.replace(/<br\s*\/?>/gi,`
`)}parseHtmlText(e){const n=[];let o=!1,i=!1,s="";const r=/<\s*(\/?)([bi])\s*>|<img\s+([^>]+)>|<svg[^>]*>([\s\S]*?)<\/svg>|([^<]+)/gi;let l;for(;(l=r.exec(e))!==null;)if(l[5])s+=l[5];else if(l[4]!==void 0){s&&(n.push({type:"text",text:s,bold:o,italic:i}),s="");const a=l[0],d=a.match(/width\s*=\s*["']?(\d+)["']?/i),h=a.match(/height\s*=\s*["']?(\d+)["']?/i);n.push({type:"svg",svgContent:a,width:d?parseInt(d[1]):void 0,height:h?parseInt(h[1]):void 0})}else if(l[3]){s&&(n.push({type:"text",text:s,bold:o,italic:i}),s="");const a=l[3],d=a.match(/src\s*=\s*["']([^"']+)["']/i),h=a.match(/width\s*=\s*["']?(\d+)["']?/i),c=a.match(/height\s*=\s*["']?(\d+)["']?/i);d&&n.push({type:"image",src:d[1],width:h?parseInt(h[1]):void 0,height:c?parseInt(c[1]):void 0})}else if(l[2]){const a=l[1]==="/",d=l[2].toLowerCase();s&&(n.push({type:"text",text:s,bold:o,italic:i}),s=""),d==="b"?o=!a:d==="i"&&(i=!a)}return s&&n.push({type:"text",text:s,bold:o,italic:i}),n.length===0&&n.push({type:"text",text:e,bold:!1,italic:!1}),n}hasHtmlFormatting(e){return/<\s*[bi]\s*>|<\s*\/\s*[bi]\s*>|<img\s+|<svg[^>]*>/i.test(e)}stripHtmlTags(e){return e.replace(/<\s*\/?[bi]\s*>/gi,"")}measureHtmlText(e){const n=this.parseHtmlText(e);let o=0;const i=this.ctx.font;return n.forEach(s=>{if(s.type==="text"){const r=this.buildFontStyle(s.bold,s.italic);this.ctx.font=r,o+=this.ctx.measureText(s.text).width}else if(s.type==="image"){const r=this.getImage(s.src);if(r){const l=s.width||r.naturalWidth;o+=l}else o+=s.width||16}}),this.ctx.font=i,o}buildFontStyle(e,n){const o=parseInt(this.ctx.font.match(/\d+/)?.[0]||"12"),i=this.options.fontFamily||'"Helvetica Neue", Helvetica, Arial, sans-serif';return`${`${n?"italic ":""}${e?"bold ":""}`}${o}px ${i}`}drawHtmlText(e,n,o){const i=this.parseHtmlText(e),s=this.ctx.font,r=this.ctx.textAlign,l=this.ctx.textBaseline;let a=0;(r==="center"||r==="right")&&(a=this.measureHtmlText(e));let d=n;r==="center"?d=n-a/2:r==="right"&&(d=n-a),this.ctx.textAlign="left",i.forEach(h=>{if(h.type==="text"){const c=this.buildFontStyle(h.bold,h.italic);this.ctx.font=c,this.ctx.fillText(h.text,d,o),d+=this.ctx.measureText(h.text).width}else if(h.type==="image"&&h.src&&!this.getImage(h.src)){this.loadImage(h.src,this.onImageLoadCallback);const p=h.width||16,m=h.height||16;let g=o;l==="middle"?g=o-m/2:l==="alphabetic"&&(g=o-m),this.ctx.save(),this.ctx.strokeStyle="#ccc",this.ctx.strokeRect(d,g,p,m),this.ctx.restore(),d+=p}}),this.ctx.font=s,this.ctx.textAlign=r,this.ctx.textBaseline=l}wrapHtmlText(e,n,o){const i=this.parseHtmlText(e),s=[];let r=[],l=0;const a=this.ctx.font;for(const d of i){if(d.type==="image")continue;const h=d.text.split(" ");for(let c=0;c<h.length;c++){const p=h[c],m=this.buildFontStyle(d.bold,d.italic);this.ctx.font=m;const g=r.length===0?p:" "+p,D=this.ctx.measureText(g).width;if(l+D<=n)r.push({text:g,bold:d.bold,italic:d.italic}),l+=D;else if(r.length>0){if(s.push(this.reconstructHtmlLine(r)),s.length>=o)break;r=[{text:p,bold:d.bold,italic:d.italic}],l=this.ctx.measureText(p).width}else{if(r.push({text:p,bold:d.bold,italic:d.italic}),s.push(this.reconstructHtmlLine(r)),s.length>=o)break;r=[],l=0}if(s.length>=o)break}if(s.length>=o)break}return r.length>0&&s.length<o&&s.push(this.reconstructHtmlLine(r)),this.ctx.font=a,s}reconstructHtmlLine(e){let n="",o=!1,i=!1;return e.forEach(s=>{o&&!s.bold&&(n+="</b>",o=!1),i&&!s.italic&&(n+="</i>",i=!1),!o&&s.bold&&(n+="<b>",o=!0),!i&&s.italic&&(n+="<i>",i=!0),n+=s.text}),i&&(n+="</i>"),o&&(n+="</b>"),n}drawMultiLineHtmlText(e,n,o,i,s){let r=o;if(s.baseline==="middle"){const l=(e.length-1)*i;r=o-l/2}else if(s.baseline==="alphabetic"){const l=(e.length-1)*i;r=o-l}e.forEach((l,a)=>{const d=r+a*i;this.drawHtmlText(l,n,d)})}calculateAvailableWidth(e){return Math.max(0,e.textcapwidth-0)}calculateAvailableHeight(e){return Math.max(0,e.textcapheight-2)}drawWrappedText(e,n,o,i,s,r){const l=parseInt(this.ctx.font.match(/\d+/)?.[0]||"12")*1.2,a=Math.floor(s/l);if(a<1)return;const d=this.hasHtmlFormatting(e),h=e.includes(`
`);if(!h&&!d){if(this.ctx.measureText(e).width<=i){this.ctx.fillText(e,n,o);return}const g=e.split(" ");if(g.length===1){this.drawOverflowText(e,n,o,i);return}const D=[];let T="";for(const y of g){const C=T?`${T} ${y}`:y;if(this.ctx.measureText(C).width<=i)T=C;else if(T?(D.push(T),T=y):D.push(y),D.length>=a)break}T&&D.length<a&&D.push(T),this.drawMultiLineText(D,n,o,l,r);return}else if(d&&!h){if(this.measureHtmlText(e)<=i){this.drawHtmlText(e,n,o);return}const g=this.wrapHtmlText(e,i,a);if(g.length===0)return;this.drawMultiLineHtmlText(g,n,o,l,r);return}const c=e.split(`
`),p=[];for(const m of c){const g=m.trim();if(!g){if(p.push(""),p.length>=a)break;continue}if(this.ctx.measureText(g).width<=i)p.push(g);else{const T=g.split(" ");if(T.length===1)p.push(g);else{let y="";for(const C of T){const M=y?`${y} ${C}`:C;if(this.ctx.measureText(M).width<=i)y=M;else if(y){if(p.push(y),y=C,p.length>=a)break}else{p.push(C);break}}y&&p.length<a&&p.push(y)}}if(p.length>=a)break}if(p.length===1&&this.ctx.measureText(p[0]).width<=i){this.ctx.fillText(p[0],n,o);return}this.drawMultiLineText(p.slice(0,a),n,o,l,r)}drawOverflowText(e,n,o,i){let s=e;for(;s.length>1;){const r=s+"…";if(this.ctx.measureText(r).width<=i){this.ctx.fillText(r,n,o);return}s=s.slice(0,-1)}this.ctx.fillText(e,n,o)}drawMultiLineText(e,n,o,i,s){let r=o;if(s.baseline==="middle"){const l=(e.length-1)*i;r=o-l/2}else if(s.baseline==="alphabetic"){const l=(e.length-1)*i;r=o-l}e.forEach((l,a)=>{const d=r+a*i;this.ctx.fillText(l,n,d)})}render(e,n,o,i=!0,s=!1,r,l){if(i){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle=this.options.background;const p=o.radii?.trim()||"6px",m=uu(p,this.ctx.canvas.width,this.ctx.canvas.height);cu(this.ctx,0,0,this.ctx.canvas.width,this.ctx.canvas.height,m),this.ctx.fill()}this.ctx.save();const a=new Set(n),h=[...e.filter(p=>!a.has(p))].sort((p,m)=>(p.rotation_angle||0)-(m.rotation_angle||0)||(p.rotation_x||0)-(m.rotation_x||0)||(p.rotation_y||0)-(m.rotation_y||0)||p.y-m.y||p.x-m.x),c=[...n].sort((p,m)=>(p.rotation_angle||0)-(m.rotation_angle||0)||(p.rotation_x||0)-(m.rotation_x||0)||(p.rotation_y||0)-(m.rotation_y||0)||p.y-m.y||p.x-m.x);h.forEach(p=>{this.drawKey(p,!1)}),c.forEach(p=>{this.drawKey(p,!0)}),n.forEach(p=>{p.rotation_angle&&p.rotation_angle!==0&&this.drawRotationOriginIndicator(p)}),s&&n.length>0&&this.drawRotationPoints(n,r,l),this.ctx.restore()}calculateBounds(e){if(e.length===0)return{x:0,y:0,width:0,height:0};let n=1/0,o=1/0,i=-1/0,s=-1/0;return e.forEach(r=>{const l=this.calculateRotatedKeyBounds(r);n=Math.min(n,l.minX),o=Math.min(o,l.minY),i=Math.max(i,l.maxX),s=Math.max(s,l.maxY)}),{x:n,y:o,width:i-n,height:s-o}}calculateRotatedKeyBounds(e){if(!e.rotation_angle||e.rotation_angle===0){const C=this.options.unit,M=e.x*C,E=e.y*C,R=M+e.width*C,L=E+e.height*C;let B=M,x=E,I=R,N=L;if(e.width2&&e.height2){const z=(e.x+(e.x2||0))*C,F=(e.y+(e.y2||0))*C,te=z+e.width2*C,H=F+e.height2*C;B=Math.min(B,z),x=Math.min(x,F),I=Math.max(I,te),N=Math.max(N,H)}return{minX:B,minY:x,maxX:I+1,maxY:N+1}}const o=this.options.unit,i=S.mul(e.rotation_x||0,o),s=S.mul(e.rotation_y||0,o),r=S.degreesToRadians(e.rotation_angle),l=S.cos(r),a=S.sin(r),d=S.mul(e.x,o),h=S.mul(e.y,o),c=S.mul(e.width,o),p=S.mul(e.height,o),m=[{x:d,y:h},{x:S.add(d,c),y:h},{x:d,y:S.add(h,p)},{x:S.add(d,c),y:S.add(h,p)}];if(e.width2&&e.height2){const C=S.mul(S.add(e.x,e.x2||0),o),M=S.mul(S.add(e.y,e.y2||0),o),E=S.mul(e.width2,o),R=S.mul(e.height2,o);m.push({x:C,y:M},{x:S.add(C,E),y:M},{x:C,y:S.add(M,R)},{x:S.add(C,E),y:S.add(M,R)})}let g=1/0,D=1/0,T=-1/0,y=-1/0;return m.forEach(C=>{const M=S.sub(C.x,i),E=S.sub(C.y,s),R=S.sub(S.mul(l,M),S.mul(a,E)),L=S.add(S.mul(a,M),S.mul(l,E)),B=S.add(R,i),x=S.add(L,s);g=S.min(g,B),D=S.min(D,x),T=S.max(T,B),y=S.max(y,x)}),{minX:g,minY:D,maxX:T+1,maxY:y+1}}getKeyAtPosition(e,n,o){for(let i=o.length-1;i>=0;i--){const s=o[i],r=this.getRenderParams(s);let l=e,a=n;if(s.rotation_angle){const d=S.degreesToRadians(-s.rotation_angle),h=r.origin_x,c=r.origin_y,p=e-h,m=n-c,g=Math.cos(d),D=Math.sin(d);l=p*g-m*D+h,a=p*D+m*g+c}if(l>=r.outercapx&&l<=r.outercapx+r.outercapwidth&&a>=r.outercapy&&a<=r.outercapy+r.outercapheight||r.nonRectangular&&r.outercapx2!==void 0&&l>=r.outercapx2&&l<=r.outercapx2+r.outercapwidth2&&a>=r.outercapy2&&a<=r.outercapy2+r.outercapheight2)return s}return null}}const ty=t=>S.degreesToRadians(t),ny=(t,e,n)=>{const o=ty(n),i=S.cos(o),s=S.sin(o),r=S.sub(t.x,e.x),l=S.sub(t.y,e.y),a=S.sub(S.mul(i,r),S.mul(s,l)),d=S.add(S.mul(s,r),S.mul(i,l));return{x:S.add(a,e.x),y:S.add(d,e.y)}},oy=t=>[{x:t.x,y:t.y},{x:S.add(t.x,t.width),y:t.y},{x:S.add(t.x,t.width),y:S.add(t.y,t.height)},{x:t.x,y:S.add(t.y,t.height)}],qd=t=>{const e=oy(t);if(!t.rotation||t.rotation===0)return e;const n={x:t.originX??S.add(t.x,S.div(t.width,2)),y:t.originY??S.add(t.y,S.div(t.height,2))};return e.map(o=>ny(o,n,t.rotation))},Yd=(t,e)=>{let n=1/0,o=-1/0;return t.forEach(i=>{const s=S.add(S.mul(i.x,e.x),S.mul(i.y,e.y));n=S.min(n,s),o=S.max(o,s)}),{min:n,max:o}},Xd=t=>{const e=[];for(let n=0;n<t.length;n++){const o=t[n],i=t[(n+1)%t.length],s={x:S.sub(i.x,o.x),y:S.sub(i.y,o.y)},r={x:-s.y,y:s.x},l=S.sqrt(S.add(S.mul(r.x,r.x),S.mul(r.y,r.y)));l>0&&e.push({x:S.div(r.x,l),y:S.div(r.y,l)})}return e},sy=(t,e)=>{const n=qd(t),o=qd(e),i=Xd(n),s=Xd(o),r=[...i,...s];for(const l of r){const a=Yd(n,l),d=Yd(o,l);if(a.max<d.min||d.max<a.min)return!1}return!0},iy=(t,e)=>({x:S.mul(t.x,e),y:S.mul(t.y,e),width:S.mul(t.width,e),height:S.mul(t.height,e),rotation:t.rotation_angle||0,originX:t.rotation_x?S.mul(t.rotation_x,e):void 0,originY:t.rotation_y?S.mul(t.rotation_y,e):void 0}),ry=(t,e)=>{const n=Math.min(t.x,e.x),o=Math.max(t.x,e.x),i=Math.min(t.y,e.y),s=Math.max(t.y,e.y);return{x:n,y:i,width:o-n,height:s-i}},ly=(t,e,n,o)=>{const i=iy(t,o),s=ry(e,n);return sy(i,s)};function Ji(t={}){const{defaultPosition:e={x:100,y:100},smoothRepositioning:n=!0,headerHeight:o=40,mobileBreakpoint:i=768}=t,s=Y({...e}),r=Y(!1),l=Y({x:0,y:0}),a=Y(),d=Y(!1),h=()=>{const B={width:window.innerWidth,height:window.innerHeight};return d.value=B.width<=i,B},c=()=>{if(!a.value)return{width:400,height:300};const B=a.value.getBoundingClientRect();return{width:B.width,height:B.height}},p=(B,x)=>{const I=h(),N=x||c(),z=B.y+o,F=100,te=B.x+F>0,H=B.x<I.width-F;return B.y>=-5&&B.y<=I.height-o&&z>10&&te&&H&&N.width>0},m=(B,x)=>{const I=h(),N=x||c();if(p(B,N))return B;const z=100,F=-N.width+z,te=I.width-z,H=-5,Q=I.height-o,W=Math.max(F,Math.min(B.x,te)),J=Math.max(H,Math.min(B.y,Q));return{x:W,y:J}},g=B=>{n&&a.value?(a.value.style.transition="transform 0.2s ease-out",s.value=B,setTimeout(()=>{a.value&&(a.value.style.transition="")},200)):s.value=B},D=()=>{if(h(),!r.value){if(d.value)return;const B={...s.value},x=m(B);(x.x!==B.x||x.y!==B.y)&&g(x)}},T=B=>{B.target===a.value&&B.preventDefault()},y=B=>{if(!a.value||d.value)return;r.value=!0;const x=a.value.getBoundingClientRect();l.value={x:B.clientX-x.left,y:B.clientY-x.top},document.addEventListener("mousemove",C),document.addEventListener("mouseup",M),B.preventDefault()},C=B=>{r.value&&(s.value={x:B.clientX-l.value.x,y:B.clientY-l.value.y})},M=async()=>{if(r.value){r.value=!1,await je();const B=s.value,x=m(B);(x.x!==B.x||x.y!==B.y)&&g(x)}document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",M)},E=B=>{const I=m(B||e);g(I)},R=(B,x=!1)=>{const I=x?B:m(B);g(I)},L=B=>{const I=m(B||e);s.value=I};return Qt(()=>{window.addEventListener("resize",D)}),an(()=>{window.removeEventListener("resize",D),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",M)}),{position:s,isDragging:r,panelRef:a,isMobile:d,handleMouseDown:T,handleHeaderMouseDown:y,resetPosition:E,setPosition:R,initializePosition:L,ensureInViewport:m,getViewport:h,getPanelSize:c,isPositionAccessible:p}}const ay=["value","step","min","max","title","placeholder","disabled"],uy={class:"spinner-buttons"},cy=["disabled","title"],dy=["disabled","title"],fy=At({__name:"CustomNumberInput",props:{modelValue:{},step:{default:1},ctrlStep:{default:1},min:{},max:{},class:{default:"form-control form-control-sm"},title:{},placeholder:{},disabled:{type:Boolean,default:!1},wrapAround:{type:Boolean,default:!1},wrapMin:{default:-360},wrapMax:{default:360},size:{default:"default"},valueOnClear:{},disableWheel:{type:Boolean,default:!1},referenceValue:{}},emits:["update:modelValue","change"],setup(t,{expose:e,emit:n}){const o=t,i=n,s=Y(),r=Y(),l=Y(!1),a=Y(null),d=Oe(()=>o.class),h=()=>o.valueOnClear!==void 0?o.valueOnClear===null?void 0:o.valueOnClear:o.min!==void 0?o.min:o.step||1,c=Oe(()=>{if(a.value!==null)return a.value;if(o.modelValue===void 0||o.modelValue===null){const x=h();return x!==void 0?String(x):""}return String(o.modelValue)}),p=async()=>{if(!r.value)return;await je(),r.value.style.width="auto";const x=r.value.scrollWidth+12;r.value.parentElement&&r.value.parentElement.style.setProperty("--suffix-width",`${x}px`)},m=x=>{const I=x.target;if(a.value=I.value,I.value===""){const z=h();z!==void 0&&i("update:modelValue",z);return}const N=parseFloat(I.value);if(!isNaN(N))i("update:modelValue",N);else{const z=h();z!==void 0&&(i("update:modelValue",z),a.value=null)}},g=()=>{if(a.value===null)return;const x=a.value.trim();if(x===""){const N=h();C(N),a.value=null;return}const I=parseFloat(x);if(isNaN(I)){a.value=null;return}C(I),a.value=null},D=()=>{l.value=!0},T=()=>{l.value=!1,g()},y=x=>{if(x==null)return x;if(isNaN(x))return;let I=x;if(o.wrapAround){const N=o.wrapMin||-360,z=o.wrapMax||360;if(Math.abs(z-N)>=360){for(;I>180;)I-=360;for(;I<-180;)I+=360}else I>z?I=N+(I-z):I<N&&(I=z-(N-I))}else o.min!==void 0&&I<o.min&&(I=o.min),o.max!==void 0&&I>o.max&&(I=o.max);return I},C=x=>{const I=y(x);i("update:modelValue",I),i("change",I)},M=x=>{x.key==="Escape"?s.value?.blur():x.key==="ArrowUp"?(x.preventDefault(),R()):x.key==="ArrowDown"&&(x.preventDefault(),L())},E=(x,I)=>{const N=I!==void 0?I:o.step||1,z=o.modelValue??o.referenceValue??0,F=S.add(z,S.mul(x,N));a.value=null,C(F)},R=()=>{E(1)},L=()=>{E(-1)},B=x=>{if(o.disableWheel)return;const I=document.activeElement===s.value;if(!l.value&&!I)return;x.preventDefault();const N=x.deltaY>0?-1:1,z=x.ctrlKey?o.ctrlStep:o.step;E(N,z)};return e({focus:()=>{s.value?.focus()},select:()=>{s.value?.select()}}),Qt(()=>{p()}),at(()=>o.modelValue,(x,I)=>{a.value===null&&x!==I&&je(p)},{flush:"post"}),at([()=>o.disabled,()=>o.min,()=>o.max],()=>{a.value!==null&&(a.value=null)}),(x,I)=>(ae(),pe("div",{class:vt(["custom-number-input",{"input-focused":l.value,"input-disabled":x.disabled,"has-suffix":x.$slots.suffix,[`size-${x.size}`]:!0}])},[f("input",{ref_key:"inputRef",ref:s,value:c.value,onInput:m,onChange:g,onWheel:B,onFocus:D,onBlur:T,onKeydown:M,type:"number",step:x.step,min:x.min,max:x.max,class:vt(d.value),title:x.title,placeholder:x.placeholder,disabled:x.disabled},null,42,ay),f("div",uy,[f("button",{type:"button",class:"spinner-btn spinner-up",onClick:R,onMousedown:I[0]||(I[0]=pt(()=>{},["prevent"])),disabled:x.disabled||x.max!==void 0&&(x.modelValue??x.referenceValue??0)>=x.max,title:`Increase by ${x.step}`,tabindex:"-1"},[...I[2]||(I[2]=[f("i",{class:"bi bi-chevron-up"},null,-1)])],40,cy),f("button",{type:"button",class:"spinner-btn spinner-down",onClick:L,onMousedown:I[1]||(I[1]=pt(()=>{},["prevent"])),disabled:x.disabled||x.min!==void 0&&(x.modelValue??x.referenceValue??0)<=x.min,title:`Decrease by ${x.step}`,tabindex:"-1"},[...I[3]||(I[3]=[f("i",{class:"bi bi-chevron-down"},null,-1)])],40,dy)]),x.$slots.suffix?(ae(),pe("div",{key:0,ref_key:"suffixRef",ref:r,class:"input-suffix"},[Jm(x.$slots,"suffix",{},void 0)],512)):Ke("",!0)],2))}}),lt=St(fy,[["__scopeId","data-v-6eeae5a0"]]),hy={class:"panel-content"},py={class:"panel-body"},vy={class:"rotation-info mb-3"},my={key:0,class:"text-center"},gy={key:1},by={class:"d-flex justify-content-between align-items-center"},yy={class:"text-muted"},wy={key:0,class:"angle-input mb-3"},xy={class:"d-flex align-items-center gap-3"},Dy={class:"form-text text-muted"},_y={key:0},Cy={key:1,class:"text-warning"},Ey={class:"panel-footer"},Ay=["disabled"],Sy=At({__name:"RotationControlModal",props:{visible:{type:Boolean,default:!1},rotationOrigin:{default:null}},emits:["apply","cancel","angleChange"],setup(t,{emit:e}){const n=t,o=e,i=Y(0),s=Y(),{position:r,panelRef:l,handleMouseDown:a,handleHeaderMouseDown:d,initializePosition:h}=Ji({defaultPosition:{x:100,y:100},headerHeight:45});at(()=>n.visible,T=>{T&&(i.value=0)});const c=T=>T.toFixed(2).replace(/\.?0+$/,""),p=T=>{T!==void 0&&(i.value=T,o("angleChange",i.value))},m=()=>{o("apply",i.value)},g=()=>{o("cancel")};at(()=>n.visible,T=>{T&&(i.value=0,h({x:window.innerWidth-400,y:100}))}),at(()=>n.rotationOrigin,async(T,y)=>{if(T&&!y){await je();const C=document.querySelector('.rotation-panel input[type="number"]');C&&(C.focus(),C.select())}});const D=T=>{T.key==="Escape"&&n.visible?g():T.key==="Enter"&&n.visible&&m()};return Qt(()=>{document.addEventListener("keydown",D)}),an(()=>{document.removeEventListener("keydown",D)}),(T,y)=>T.visible?(ae(),pe("div",{key:0,class:"rotation-panel",ref_key:"panelRef",ref:l,style:en({transform:`translate(${Ue(r).x}px, ${Ue(r).y}px)`}),onMousedown:y[4]||(y[4]=(...C)=>Ue(a)&&Ue(a)(...C))},[f("div",hy,[f("div",{class:"panel-header",onMousedown:y[1]||(y[1]=(...C)=>Ue(d)&&Ue(d)(...C))},[y[5]||(y[5]=f("div",{class:"panel-title"},[f("i",{class:"bi bi-grip-vertical me-2 drag-handle"}),f("i",{class:"bi bi-arrow-repeat me-2"}),$e(" Rotate Selection ")],-1)),f("button",{type:"button",class:"btn-close",onClick:g,onMousedown:y[0]||(y[0]=pt(()=>{},["stop"])),"aria-label":"Close"},null,32)],32),f("div",py,[f("div",vy,[T.rotationOrigin?(ae(),pe("div",gy,[f("div",by,[f("small",yy,[y[7]||(y[7]=f("i",{class:"bi bi-crosshair2 me-1"},null,-1)),$e(" Origin: ("+Ve(c(T.rotationOrigin.x))+", "+Ve(c(T.rotationOrigin.y))+") ",1)])])])):(ae(),pe("div",my,[...y[6]||(y[6]=[f("div",{class:"mb-2"},[f("i",{class:"bi bi-crosshair2 text-warning",style:{"font-size":"1.5rem"}})],-1),f("div",{class:"text-muted"},[f("strong",null,"Select rotation anchor point"),f("br"),f("small",null,"Click on a key corner or center to choose rotation origin")],-1)])]))]),T.rotationOrigin?(ae(),pe("div",wy,[f("div",xy,[y[9]||(y[9]=f("label",{class:"form-label small mb-0 text-nowrap"},"Rotation Change:",-1)),Ee(lt,{ref_key:"angleInputRef",ref:s,"model-value":i.value,"onUpdate:modelValue":p,onChange:p,step:1,"ctrl-step":5,min:-360,max:360,"wrap-around":!0,"wrap-min":-360,"wrap-max":360,disabled:!T.rotationOrigin},{suffix:Yn(()=>[...y[8]||(y[8]=[$e("degrees",-1)])]),_:1},8,["model-value","disabled"])]),f("small",Dy,[T.rotationOrigin?(ae(),pe("span",_y," Mouse wheel: ±1°, Ctrl+wheel: ±5° ")):(ae(),pe("span",Cy," Select an anchor point first to enable rotation controls "))])])):Ke("",!0)]),f("div",Ey,[f("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:g,onMousedown:y[2]||(y[2]=pt(()=>{},["stop"]))},[...y[10]||(y[10]=[f("i",{class:"bi bi-x-circle me-1"},null,-1),$e(" Cancel ",-1)])],32),T.rotationOrigin?(ae(),pe("button",{key:0,type:"button",class:"btn btn-primary btn-sm",disabled:!T.rotationOrigin,onClick:m,onMousedown:y[3]||(y[3]=pt(()=>{},["stop"]))},[...y[11]||(y[11]=[f("i",{class:"bi bi-check-circle me-1"},null,-1),$e(" Apply ",-1)])],40,Ay)):Ke("",!0)])])],36)):Ke("",!0)}}),Fy=St(Sy,[["__scopeId","data-v-97aeff0b"]]),ky={class:"panel-content"},My={class:"panel-body"},Ty={class:"unit-selection mb-3"},$y={class:"d-flex align-items-center gap-3"},Ly={class:"btn-group",role:"group"},Iy={key:0,class:"spacing-config mb-3"},Oy={class:"row g-2"},Ry={class:"col-6"},Py={class:"col-6"},By={class:"movement-inputs mb-3"},Ny={class:"row g-2"},Vy={class:"col-6"},Ky={class:"col-6"},zy={class:"form-text text-muted"},Uy={class:"panel-footer"},Hy=At({__name:"MoveExactlyModal",props:{visible:{type:Boolean,default:!1}},emits:["apply","cancel","movementChange"],setup(t,{emit:e}){const n=t,o=e,i=Y(0),s=Y(0),r=Y("U"),l=Y({x:19.05,y:19.05}),a=Y({movementX:0,movementY:0,selectedUnit:"U",uSpacing:{x:19.05,y:19.05}}),{position:d,panelRef:h,handleMouseDown:c,handleHeaderMouseDown:p,initializePosition:m}=Ji({defaultPosition:{x:100,y:100},headerHeight:45});at(()=>n.visible,async B=>{if(B){i.value=a.value.movementX,s.value=a.value.movementY,r.value=a.value.selectedUnit,l.value={...a.value.uSpacing},m({x:window.innerWidth-400,y:100}),await je();const x=document.querySelector('.move-exactly-panel input[type="number"]');x&&(x.focus(),x.select())}});const g=B=>r.value==="U"?B:B/l.value.x,D=B=>r.value==="U"?B:B/l.value.y,T=B=>{B!==void 0&&(l.value.x=B)},y=B=>{B!==void 0&&(l.value.y=B)},C=B=>{i.value=B??0;const x=g(i.value),I=D(s.value);o("movementChange",x,I)},M=B=>{s.value=B??0;const x=g(i.value),I=D(s.value);o("movementChange",x,I)},E=()=>{const B=g(i.value),x=D(s.value);a.value={movementX:i.value,movementY:s.value,selectedUnit:r.value,uSpacing:{...l.value}},o("apply",B,x)},R=()=>{o("cancel")},L=B=>{B.key==="Escape"&&n.visible?R():B.key==="Enter"&&n.visible&&E()};return Qt(()=>{document.addEventListener("keydown",L)}),an(()=>{document.removeEventListener("keydown",L)}),(B,x)=>B.visible?(ae(),pe("div",{key:0,class:"move-exactly-panel",ref_key:"panelRef",ref:h,style:en({transform:`translate(${Ue(d).x}px, ${Ue(d).y}px)`}),onMousedown:x[4]||(x[4]=(...I)=>Ue(c)&&Ue(c)(...I))},[f("div",ky,[f("div",{class:"panel-header",onMousedown:x[1]||(x[1]=(...I)=>Ue(p)&&Ue(p)(...I))},[x[5]||(x[5]=f("div",{class:"panel-title"},[f("i",{class:"bi bi-grip-vertical me-2 drag-handle"}),f("i",{class:"bi bi-arrows-move me-2"}),$e(" Move Exactly ")],-1)),f("button",{type:"button",class:"btn-close",onClick:R,onMousedown:x[0]||(x[0]=pt(()=>{},["stop"])),"aria-label":"Close"},null,32)],32),f("div",My,[f("div",Ty,[f("div",$y,[x[8]||(x[8]=f("label",{class:"form-label small mb-0 text-nowrap"},"Unit:",-1)),f("div",Ly,[Ge(f("input",{type:"radio",class:"btn-check",id:"unit-u",value:"U","onUpdate:modelValue":x[2]||(x[2]=I=>r.value=I),autocomplete:"off"},null,512),[[qn,r.value]]),x[6]||(x[6]=f("label",{class:"btn btn-outline-primary btn-sm",for:"unit-u"},"U",-1)),Ge(f("input",{type:"radio",class:"btn-check",id:"unit-mm",value:"mm","onUpdate:modelValue":x[3]||(x[3]=I=>r.value=I),autocomplete:"off"},null,512),[[qn,r.value]]),x[7]||(x[7]=f("label",{class:"btn btn-outline-primary btn-sm",for:"unit-mm"},"mm",-1))])])]),r.value==="mm"?(ae(),pe("div",Iy,[f("div",Oy,[f("div",Ry,[x[10]||(x[10]=f("label",{class:"form-label small mb-1"},"X Spacing:",-1)),Ee(lt,{"model-value":l.value.x,"onUpdate:modelValue":T,onChange:T,step:.05,min:10,max:30},{suffix:Yn(()=>[...x[9]||(x[9]=[$e("mm/U",-1)])]),_:1},8,["model-value"])]),f("div",Py,[x[12]||(x[12]=f("label",{class:"form-label small mb-1"},"Y Spacing:",-1)),Ee(lt,{"model-value":l.value.y,"onUpdate:modelValue":y,onChange:y,step:.05,min:10,max:30},{suffix:Yn(()=>[...x[11]||(x[11]=[$e("mm/U",-1)])]),_:1},8,["model-value"])])]),x[13]||(x[13]=f("small",{class:"form-text text-muted"}," Configure mm-to-U conversion ",-1))])):Ke("",!0),f("div",By,[f("div",Ny,[f("div",Vy,[x[14]||(x[14]=f("label",{class:"form-label small mb-1"},"X Movement:",-1)),Ee(lt,{"model-value":i.value,"onUpdate:modelValue":C,onChange:C,step:.1,"value-on-clear":0},{suffix:Yn(()=>[$e(Ve(r.value),1)]),_:1},8,["model-value"])]),f("div",Ky,[x[15]||(x[15]=f("label",{class:"form-label small mb-1"},"Y Movement:",-1)),Ee(lt,{"model-value":s.value,"onUpdate:modelValue":M,onChange:M,step:.1,"value-on-clear":0},{suffix:Yn(()=>[$e(Ve(r.value),1)]),_:1},8,["model-value"])])]),f("small",zy,[f("span",null," Focus and scroll: ±0.1"+Ve(r.value)+", Ctrl+scroll: ±1.0"+Ve(r.value),1)])])]),f("div",Uy,[f("button",{type:"button",class:"btn btn-secondary btn-sm",onMousedown:pt(R,["prevent","stop"])},[...x[16]||(x[16]=[f("i",{class:"bi bi-x-circle me-1"},null,-1),$e(" Cancel ",-1)])],32),f("button",{type:"button",class:"btn btn-primary btn-sm",onMousedown:pt(E,["prevent","stop"])},[...x[17]||(x[17]=[f("i",{class:"bi bi-check-circle me-1"},null,-1),$e(" Apply ",-1)])],32)])])],36)):Ke("",!0)}}),jy=St(Hy,[["__scopeId","data-v-9cb3836a"]]);function Ln(t){let e=S.add(t.x,S.div(t.width||1,2)),n=S.add(t.y,S.div(t.height||1,2));if(t.rotation_angle&&t.rotation_angle!==0){const o=t.rotation_x!==void 0?t.rotation_x:e,i=t.rotation_y!==void 0?t.rotation_y:n,s=S.degreesToRadians(t.rotation_angle),r=Math.cos(s),l=Math.sin(s),a=S.sub(e,o),d=S.sub(n,i),h=S.sub(S.mul(a,r),S.mul(d,l)),c=S.add(S.mul(a,l),S.mul(d,r));e=S.add(o,h),n=S.add(i,c)}return{x:Number(e),y:Number(n)}}function Wy(t,e){const n=Ln(t),o=Ln(e);return Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))}function qy(t,e,n,o=0){const i=Ln(n),s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));if(s<1e-4){const D=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),T=n.width||1,y=n.height||1,C=Math.sqrt(Math.pow(T,2)+Math.pow(y,2));return D<=C/2}const r=((i.x-t.x)*(e.x-t.x)+(i.y-t.y)*(e.y-t.y))/(s*s),l=Math.max(0,Math.min(1,r));if(r<0||r>1){const D=r<0?t:e;if(!n.rotation_angle||n.rotation_angle===0){const T=n.x,y=n.x+(n.width||1),C=n.y,M=n.y+(n.height||1);return D.x>=T&&D.x<=y&&D.y>=C&&D.y<=M}else{const T=n.width||1,y=n.height||1,C=Math.sqrt(Math.pow(T,2)+Math.pow(y,2));return Math.sqrt(Math.pow(i.x-D.x,2)+Math.pow(i.y-D.y,2))<=C/2}}const a=t.x+l*(e.x-t.x),d=t.y+l*(e.y-t.y),h=Math.sqrt(Math.pow(i.x-a,2)+Math.pow(i.y-d,2)),c=(e.x-t.x)/s,p=(e.y-t.y)/s,m=n.width||1,g=n.height||1;if(!n.rotation_angle||n.rotation_angle===0){const D=Math.abs(c),T=Math.abs(p),C=(D*g/2+T*m/2)*(1-o);return h<=C}else{const y=Math.sqrt(Math.pow(m,2)+Math.pow(g,2))/2*(1-o);return h<=y}}function Pa(t,e,n,o=0){const i=[];for(const s of n){if(s.decal||s.ghost)continue;if(qy(t,e,s,o)){const l=Ln(s),a=Math.sqrt(Math.pow(l.x-t.x,2)+Math.pow(l.y-t.y,2));i.push({key:s,distance:a})}}return i.sort((s,r)=>s.distance-r.distance),i.map(s=>s.key)}const Yy={class:"matrix-overlay-container"},Xy=["width","height"],Jy=At({__name:"MatrixAnnotationOverlay",props:{visible:{type:Boolean},canvasWidth:{},canvasHeight:{},zoom:{},panX:{},panY:{},coordinateOffset:{},renderer:{}},setup(t,{expose:e}){const n=t,o=Y(),i=An(),s=ul(),r=Y([]),l=Y([]),a=Y(null),d=Y(null),h=Y(null),c=Y(""),p=Y(null),m=Y(!1),g=Oe(()=>o.value?.getContext("2d")),D=K=>{if(!n.renderer)return{x:0,y:0};const ie=Ln(K),_e=n.renderer.getOptions().unit;return{x:ie.x*_e,y:ie.y*_e}},T=(K,ie,_e)=>{let k=null,O=1/0;for(const P of _e){if(P.decal||P.ghost)continue;const oe=D(P),ne=Math.sqrt(Math.pow(oe.x-K,2)+Math.pow(oe.y-ie,2));ne<O&&(O=ne,k=P)}return k},y=K=>{if(!o.value)return{x:0,y:0};const ie=o.value.getBoundingClientRect(),_e=K.clientX-ie.left,k=K.clientY-ie.top;return{x:(_e-n.panX-n.coordinateOffset.x*n.zoom)/n.zoom,y:(k-n.panY-n.coordinateOffset.y*n.zoom)/n.zoom}},C=(K,ie,_e,k,O,P)=>{const oe=O-_e,ne=P-k,re=oe*oe+ne*ne;if(re===0)return Math.sqrt((K-_e)*(K-_e)+(ie-k)*(ie-k));let ue=((K-_e)*oe+(ie-k)*ne)/re;ue=Math.max(0,Math.min(1,ue));const ve=_e+ue*oe,ce=k+ue*ne;return Math.sqrt((K-ve)*(K-ve)+(ie-ce)*(ie-ce))},M=(K,ie,_e,k,O,P,oe=6)=>C(K,ie,_e,k,O,P)<oe,E=()=>{if(o.value){if(s.drawingType==="remove"){a.value!==null||d.value!==null||h.value!==null?o.value.style.cursor="crosshair":o.value.style.cursor="default";return}o.value.style.cursor="default"}},R=(K,ie)=>{const O=a.value,P=d.value;a.value=null,d.value=null,h.value=null;const oe=[];if(s.completedRows.forEach((ne,re)=>{ne.forEach(ue=>{const ve=D(ue),ce=Math.sqrt(Math.pow(ve.x-K,2)+Math.pow(ve.y-ie,2));ce<8&&oe.push({type:"row",index:re,key:ue,distance:ce})})}),s.completedColumns.forEach((ne,re)=>{ne.forEach(ue=>{const ve=D(ue),ce=Math.sqrt(Math.pow(ve.x-K,2)+Math.pow(ve.y-ie,2));ce<8&&oe.push({type:"column",index:re,key:ue,distance:ce})})}),oe.length>0){oe.sort((ue,ve)=>ue.distance-ve.distance);const ne=oe[0],re=oe.filter(ue=>Math.abs(D(ue.key).x-D(ne.key).x)<.1&&Math.abs(D(ue.key).y-D(ne.key).y)<.1);re.length>1?h.value={type:"overlap",index:ne.index,key:ne.key,overlappingNodes:re}:h.value={type:ne.type,index:ne.index,key:ne.key};return}s.completedRows.forEach((ne,re)=>{if(!(ne.length<2))for(let ue=0;ue<ne.length-1;ue++){const ve=D(ne[ue]),ce=D(ne[ue+1]);if(M(K,ie,ve.x,ve.y,ce.x,ce.y,6)){a.value=re;return}}}),a.value===null&&d.value===null&&s.completedColumns.forEach((ne,re)=>{if(!(ne.length<2))for(let ue=0;ue<ne.length-1;ue++){const ve=D(ne[ue]),ce=D(ne[ue+1]);if(M(K,ie,ve.x,ve.y,ce.x,ce.y,6)){d.value=re;return}}}),(O!==a.value||P!==d.value)&&p.value!==null&&(m.value?m.value=!1:(c.value="",p.value=null))},L=K=>{const ie=y(K);if(s.drawingType==="remove"){R(ie.x,ie.y),E(),H();return}if(s.isDrawing&&s.currentSequence.length>0?o.value&&(o.value.style.cursor="default"):(R(ie.x,ie.y),E()),!s.isDrawing||!n.renderer||s.currentSequence.length===0){(r.value.length>0||l.value.length>0)&&(r.value=[],l.value=[]),H();return}const k=T(ie.x,ie.y,i.keys);if(!k||s.currentSequence.includes(k)){(r.value.length>0||l.value.length>0)&&(r.value=[],l.value=[],H());return}const O=s.currentSequence[s.currentSequence.length-1],P=Ln(O),oe=Ln(k),ne=Pa(P,oe,i.keys,s.sensitivity),re=[],ue=[];ne.forEach(fe=>{s.currentSequence.includes(fe)||(s.canAddKeyToSequence(fe,i.keys)?re.push(fe):ue.push(fe))});const ve=r.value.length!==re.length||!r.value.every((fe,Te)=>fe===re[Te]),ce=l.value.length!==ue.length||!l.value.every((fe,Te)=>fe===ue[Te]);(ve||ce)&&(r.value=re,l.value=ue,H())},B=K=>{if(!s.isDrawing||!n.renderer)return;if(s.drawingType==="remove"){a.value!==null&&h.value===null?F(a.value):d.value!==null&&h.value===null?te(d.value):h.value!==null&&z({type:h.value.type,index:h.value.index,key:h.value.key});return}const ie=y(K),_e=T(ie.x,ie.y,i.keys);if(_e&&s.canAddKeyToSequence(_e,i.keys)){if(s.currentSequence.includes(_e)){s.currentSequence.length>0&&(s.completeSequence(),r.value=[],l.value=[],o.value&&(o.value.style.cursor="default"),H());return}if(s.currentSequence.length>0){const k=s.currentSequence[s.currentSequence.length-1],O=Ln(k),P=Ln(_e);Pa(O,P,i.keys,s.sensitivity).forEach(ne=>{!s.currentSequence.includes(ne)&&s.canAddKeyToSequence(ne,i.keys)&&s.addKeyToSequence(ne)}),s.currentSequence.includes(_e)||s.addKeyToSequence(_e),s.completeSequence(),r.value=[],l.value=[],o.value&&(o.value.style.cursor="default")}else s.addKeyToSequence(_e),a.value=null,d.value=null,h.value=null,o.value&&(o.value.style.cursor="default");H()}},x=()=>{s.isDrawing&&s.currentSequence.length>0&&(s.clearCurrentSequence(),r.value=[],l.value=[],o.value&&(o.value.style.cursor="default"),H())},I=K=>{if(n.visible&&!(a.value===null&&d.value===null)){if(p.value===null)if(a.value!==null)p.value={type:"row",index:a.value,originalIndex:a.value};else if(d.value!==null)p.value={type:"column",index:d.value,originalIndex:d.value};else return;if(p.value){if(K.key==="Escape"){if(c.value.length>0){c.value="",p.value=null,m.value=!1,H(),K.preventDefault(),K.stopPropagation();return}return}if(K.key==="Backspace"){if(c.value.length>0){c.value=c.value.slice(0,-1),H(),K.preventDefault(),K.stopPropagation();return}return}if(K.key==="Enter"){if(c.value.length>0){const ie=parseInt(c.value,10);if(p.value.type==="row"){const _e=p.value.index;s.renumberRow(_e,ie),p.value.index=ie,a.value=ie,m.value=!0}else if(p.value.type==="column"){const _e=p.value.index;s.renumberColumn(_e,ie),p.value.index=ie,d.value=ie,m.value=!0}c.value="",H(),K.preventDefault(),K.stopPropagation();return}return}if(K.key>="0"&&K.key<="9"){c.value+=K.key,H(),K.preventDefault(),K.stopPropagation();return}}}},N=K=>{let ie=!1,_e=!1,k=null,O=null;s.completedRows.forEach((P,oe)=>{P.includes(K)&&(ie=!0,k=oe)}),s.completedColumns.forEach((P,oe)=>{P.includes(K)&&(_e=!0,O=oe)}),!ie&&!_e?K.labels=[]:!ie&&_e?K.labels=O!==null?[`,${O}`]:[]:ie&&!_e?K.labels=k!==null?[`${k},`]:[]:ie&&_e&&(K.labels=k!==null&&O!==null?[`${k},${O}`]:[])},z=K=>{K.type==="overlap"?(s.completedRows.forEach((ie,_e)=>{s.removeKeyFromRow(_e,K.key,!0)}),s.completedColumns.forEach((ie,_e)=>{s.removeKeyFromColumn(_e,K.key,!0)})):K.type==="row"?s.removeKeyFromRow(K.index,K.key,!0):K.type==="column"&&s.removeKeyFromColumn(K.index,K.key,!0),N(K.key),H()},F=K=>{const ie=new Set,_e=s.completedRows.get(K);_e&&(_e.forEach(k=>ie.add(k)),s.removeRow(K,!0)),ie.forEach(k=>N(k)),H()},te=K=>{const ie=new Set,_e=s.completedColumns.get(K);_e&&(_e.forEach(k=>ie.add(k)),s.removeColumn(K,!0)),ie.forEach(k=>N(k)),H()},H=()=>{!g.value||!o.value||(g.value.save(),g.value.setTransform(1,0,0,1,0,0),g.value.clearRect(0,0,o.value.width,o.value.height),g.value.restore(),g.value.save(),g.value.setTransform(n.zoom,0,0,n.zoom,n.panX+n.coordinateOffset.x*n.zoom,n.panY+n.coordinateOffset.y*n.zoom),s.completedRows.forEach(K=>{Q(K)}),s.completedColumns.forEach(K=>{W(K)}),s.currentSequence.length>0&&J(s.currentSequence),r.value.length>0&&G(r.value),l.value.length>0&&ye(l.value),U(),g.value.restore())},Q=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="#007bff",k=2,O=5;g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.beginPath(),ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)}),g.value.stroke(),ie.forEach(P=>{g.value.fillStyle=_e,g.value.strokeStyle="#ffffff",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke()})},W=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="#28a745",k=2,O=5;g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.beginPath(),ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)}),g.value.stroke(),ie.forEach(P=>{g.value.fillStyle=_e,g.value.strokeStyle="#ffffff",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke()})},J=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="#ffc107",k=3,O=6;g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.beginPath(),ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)}),g.value.stroke(),ie.forEach(P=>{g.value.fillStyle=_e,g.value.strokeStyle="#ffffff",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke()})},G=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="rgba(128, 128, 128, 0.6)",k=2,O=5;if(g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.setLineDash([5,5]),g.value.beginPath(),s.currentSequence.length>0){const P=s.currentSequence[s.currentSequence.length-1],oe=D(P);g.value.moveTo(oe.x,oe.y),ie.forEach(ne=>{g.value.lineTo(ne.x,ne.y)})}else ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)});g.value.stroke(),g.value.setLineDash([]),ie.forEach(P=>{g.value.fillStyle="rgba(128, 128, 128, 0.4)",g.value.strokeStyle="rgba(255, 255, 255, 0.8)",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke()})},ye=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="rgba(220, 53, 69, 0.8)",k=2,O=5;if(g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.setLineDash([5,5]),g.value.beginPath(),s.currentSequence.length>0){const P=s.currentSequence[s.currentSequence.length-1],oe=D(P);g.value.moveTo(oe.x,oe.y),ie.forEach(ne=>{g.value.lineTo(ne.x,ne.y)})}else ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)});g.value.stroke(),g.value.setLineDash([]),ie.forEach(P=>{g.value.fillStyle="rgba(220, 53, 69, 0.6)",g.value.strokeStyle="rgba(220, 53, 69, 1)",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke(),g.value.strokeStyle="#ffffff",g.value.lineWidth=2;const oe=O*.6;g.value.beginPath(),g.value.moveTo(P.x-oe,P.y-oe),g.value.lineTo(P.x+oe,P.y+oe),g.value.moveTo(P.x+oe,P.y-oe),g.value.lineTo(P.x-oe,P.y+oe),g.value.stroke()})},U=()=>{if(g.value){if(a.value!==null){const K=s.completedRows.get(a.value);K&&nt(K)}if(d.value!==null){const K=s.completedColumns.get(d.value);K&&Ce(K)}h.value&&Fe(h.value)}},Fe=K=>{if(!g.value)return;const ie=D(K.key);g.value.fillStyle="rgba(255, 193, 7, 0.3)",g.value.strokeStyle="#ffc107",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(ie.x,ie.y,10,0,Math.PI*2),g.value.fill(),g.value.stroke()},nt=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="#007bff",k=4,O=7;g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.globalAlpha=.7,g.value.beginPath(),ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)}),g.value.stroke(),g.value.globalAlpha=1,ie.forEach(P=>{g.value.fillStyle=_e,g.value.strokeStyle="#ffffff",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke()})},Ce=K=>{if(!g.value||K.length===0)return;const ie=K.map(P=>D(P)),_e="#28a745",k=4,O=7;g.value.strokeStyle=_e,g.value.lineWidth=k,g.value.globalAlpha=.7,g.value.beginPath(),ie.forEach((P,oe)=>{oe===0?g.value.moveTo(P.x,P.y):g.value.lineTo(P.x,P.y)}),g.value.stroke(),g.value.globalAlpha=1,ie.forEach(P=>{g.value.fillStyle=_e,g.value.strokeStyle="#ffffff",g.value.lineWidth=2,g.value.beginPath(),g.value.arc(P.x,P.y,O,0,Math.PI*2),g.value.fill(),g.value.stroke()})};at(()=>[n.canvasWidth,n.canvasHeight,n.zoom,n.panX,n.panY],()=>{je(()=>{H()})}),at(()=>n.visible,K=>{K&&je(()=>{H()})}),at(()=>s.isDrawing,K=>{o.value&&(o.value.style.pointerEvents="auto"),K||(r.value=[],l.value=[],H())}),at(()=>[s.completedRows.size,s.completedColumns.size],()=>{H()});const se=K=>{s.enableDrawing(K),r.value=[],l.value=[],a.value=null,d.value=null,h.value=null,o.value&&(o.value.style.cursor="default")},De=()=>{s.disableDrawing(),r.value=[],l.value=[],E(),H()},Me=()=>s.getCompletedDrawings(),me=()=>{r.value=[],l.value=[],s.clearDrawings(),H()},j=Oe(()=>{if(!p.value||!c.value)return null;const K=p.value.type==="row"?"Row":"Column",ie=p.value.originalIndex,_e=c.value;return{type:K,original:ie,newValue:_e,message:`${K} ${ie} → ${_e}`}});return e({renderCanvas:H,enableDrawing:se,disableDrawing:De,getCompletedDrawings:Me,clearDrawings:me,renumberingStatus:j}),at(()=>n.visible,K=>{K||(c.value="",p.value=null,m.value=!1)}),Qt(()=>{H(),document.addEventListener("keydown",I,!0)}),an(()=>{document.removeEventListener("keydown",I,!0)}),(K,ie)=>(ae(),pe("div",Yy,[Ge(f("canvas",{ref_key:"canvasRef",ref:o,class:"matrix-annotation-overlay",width:K.canvasWidth,height:K.canvasHeight,onClick:B,onContextmenu:pt(x,["prevent"]),onMousemove:L},null,40,Xy),[[xa,K.visible]])]))}}),Gy=St(Jy,[["__scopeId","data-v-d9958b48"]]),Zy=["width","height"],ro=54,Qy=At({__name:"DebugOverlay",props:{visible:{type:Boolean},canvasWidth:{},canvasHeight:{},zoom:{},panX:{},panY:{},coordinateOffset:{}},setup(t,{expose:e}){const n=t,o=An(),i=Y(),s=Y(null),r=Y(null),l=()=>{if(!i.value||!s.value&&!r.value)return;const p=i.value,m=p.getContext("2d");if(!m){console.error("DebugOverlay: Could not get 2d context");return}if(m.clearRect(0,0,p.width,p.height),o.keys.length===0)return;const g=n.coordinateOffset.x,D=n.coordinateOffset.y;if(m.save(),m.setTransform(n.zoom,0,0,n.zoom,n.panX+g*n.zoom,n.panY+D*n.zoom),r.value){const T=r.value,y=T.point1.x*ro,C=T.point1.y*ro,M=T.point2.x*ro,E=T.point2.y*ro;m.strokeStyle=T.lineColor,m.lineWidth=3/n.zoom,m.beginPath(),m.moveTo(y,C),m.lineTo(M,E),m.stroke(),m.fillStyle=T.lineColor,m.beginPath(),m.arc(y,C,5,0,Math.PI*2),m.fill(),m.beginPath(),m.arc(M,E,5,0,Math.PI*2),m.fill(),T.intersectingKeys.forEach(R=>{const L=Ln(R),B=L.x*ro,x=L.y*ro;if(m.fillStyle="rgba(255, 255, 0, 0.3)",m.strokeStyle="#ffcc00",m.lineWidth=2/n.zoom,m.beginPath(),m.arc(B,x,12,0,Math.PI*2),m.fill(),m.stroke(),T.showKeyLabels){const I=o.keys.indexOf(R);m.fillStyle="#000000",m.strokeStyle="#ffffff",m.lineWidth=2/n.zoom,m.font=`bold ${10/n.zoom}px monospace`,m.textAlign="center",m.textBaseline="middle";const N=`#${I}`;m.strokeText(N,B,x),m.fillText(N,B,x)}})}if(s.value){const T=s.value;o.keys.forEach((y,C)=>{if(y.decal||y.ghost)return;const M=Ln(y),E=M.x*ro,R=M.y*ro;if(m.strokeStyle=T.markerColor,m.lineWidth=2/n.zoom,m.beginPath(),m.moveTo(E-T.markerSize*1.5,R),m.lineTo(E+T.markerSize*1.5,R),m.moveTo(E,R-T.markerSize*1.5),m.lineTo(E,R+T.markerSize*1.5),m.stroke(),T.showLabels){m.fillStyle="#000000",m.strokeStyle="#ffffff",m.lineWidth=2/n.zoom,m.font=`bold ${9/n.zoom}px monospace`,m.textAlign="center",m.textBaseline="bottom";const L=`${C}`,B=R-T.markerSize*2;m.strokeText(L,E,B),m.fillText(L,E,B);const x=`(${M.x.toFixed(2)}, ${M.y.toFixed(2)})`;m.font=`${8/n.zoom}px monospace`,m.textBaseline="top";const I=R+T.markerSize*2;if(m.strokeText(x,E,I),m.fillText(x,E,I),y.rotation_angle&&y.rotation_angle!==0){const N=`r:${y.rotation_angle}°`;m.font=`italic ${7/n.zoom}px monospace`,m.fillStyle="#0066cc",m.strokeText(N,E,I+10/n.zoom),m.fillText(N,E,I+10/n.zoom)}}if(T.showDistances&&C<o.keys.length-1){const L=o.keys[C+1];if(!L.decal&&!L.ghost){const B=Wy(y,L),x=Ln(L),I=x.x*ro,N=x.y*ro;m.strokeStyle="rgba(0, 150, 0, 0.5)",m.lineWidth=1/n.zoom,m.setLineDash([4/n.zoom,4/n.zoom]),m.beginPath(),m.moveTo(E,R),m.lineTo(I,N),m.stroke(),m.setLineDash([]);const z=(E+I)/2,F=(R+N)/2,te=`${B.toFixed(2)}u`;m.fillStyle="#006600",m.strokeStyle="#ffffff",m.font=`bold ${10/n.zoom}px monospace`,m.lineWidth=2/n.zoom,m.textAlign="center",m.textBaseline="middle",m.strokeText(te,z,F),m.fillText(te,z,F)}}})}m.restore()},a=p=>{s.value={markerSize:p.markerSize??8,markerColor:p.markerColor??"#ff0000",showLabels:p.showLabels??!0,showDistances:p.showDistances??!1},je(()=>{l()})},d=()=>{if(s.value=null,i.value){const p=i.value.getContext("2d");p&&p.clearRect(0,0,i.value.width,i.value.height)}};return at([()=>n.zoom,()=>n.panX,()=>n.panY,()=>n.canvasWidth,()=>n.canvasHeight,()=>o.keys],()=>{(s.value||r.value)&&je(()=>{l()})},{deep:!0}),e({setDebugOptions:a,clearDebugMarkers:d,drawDebugLine:p=>{r.value=p,je(()=>{l()})},clearDebugLine:()=>{r.value=null,je(()=>{l()})}}),(p,m)=>p.visible?(ae(),pe("canvas",{key:0,ref_key:"overlayCanvasRef",ref:i,width:p.canvasWidth,height:p.canvasHeight,class:"debug-overlay-canvas"},null,8,Zy)):Ke("",!0)}}),ew=St(Qy,[["__scopeId","data-v-c4c77e7e"]]),tw={class:"panel-header"},nw={class:"panel-body"},ow={class:"section"},sw={class:"section"},iw={class:"line-inputs"},rw={class:"input-with-label"},lw={class:"input-with-label"},aw={class:"input-with-label"},uw={class:"input-with-label"},cw={class:"input-with-label full-width"},dw=At({__name:"DebugActionsModal",props:{visible:{type:Boolean},debugOverlayRef:{}},emits:["close"],setup(t){const e=t,n=An(),o=Y({markerSize:8,markerColor:"#ff0000",showLabels:!0,showDistances:!1}),i=Y({point1:{x:0,y:0},point2:{x:5,y:5},lineColor:"#ff0000",showKeyLabels:!0,sensitivity:0}),s=()=>{e.debugOverlayRef&&e.debugOverlayRef.setDebugOptions(o.value)},r=()=>{e.debugOverlayRef&&e.debugOverlayRef.clearDebugMarkers()},l=()=>{if(e.debugOverlayRef){const h=Pa(i.value.point1,i.value.point2,n.keys,i.value.sensitivity);e.debugOverlayRef.drawDebugLine({point1:i.value.point1,point2:i.value.point2,lineColor:i.value.lineColor,showKeyLabels:i.value.showKeyLabels,intersectingKeys:h})}},a=()=>{e.debugOverlayRef&&e.debugOverlayRef.clearDebugLine()},d=()=>{r(),a()};return(h,c)=>h.visible?(ae(),pe("div",{key:0,class:"debug-panel",onClick:c[9]||(c[9]=pt(()=>{},["stop"]))},[f("div",tw,[c[10]||(c[10]=f("span",null,"Debug Tools",-1)),f("button",{class:"close-btn",onClick:c[0]||(c[0]=p=>h.$emit("close")),title:"Close"},"×")]),f("div",nw,[f("div",ow,[f("label",null,[Ge(f("input",{"onUpdate:modelValue":c[1]||(c[1]=p=>o.value.showLabels=p),type:"checkbox"},null,512),[[Jo,o.value.showLabels]]),c[11]||(c[11]=$e(" Labels ",-1))]),f("label",null,[Ge(f("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>o.value.showDistances=p),type:"checkbox"},null,512),[[Jo,o.value.showDistances]]),c[12]||(c[12]=$e(" Distances ",-1))]),f("button",{onClick:s},"Mark Centers")]),f("div",sw,[f("div",iw,[f("div",rw,[c[13]||(c[13]=f("label",null,"x1",-1)),Ee(lt,{modelValue:i.value.point1.x,"onUpdate:modelValue":c[3]||(c[3]=p=>i.value.point1.x=p),step:.1,placeholder:"X1",class:"form-control form-control-sm"},null,8,["modelValue"])]),f("div",lw,[c[14]||(c[14]=f("label",null,"y1",-1)),Ee(lt,{modelValue:i.value.point1.y,"onUpdate:modelValue":c[4]||(c[4]=p=>i.value.point1.y=p),step:.1,placeholder:"Y1",class:"form-control form-control-sm"},null,8,["modelValue"])]),f("div",aw,[c[15]||(c[15]=f("label",null,"x2",-1)),Ee(lt,{modelValue:i.value.point2.x,"onUpdate:modelValue":c[5]||(c[5]=p=>i.value.point2.x=p),step:.1,placeholder:"X2",class:"form-control form-control-sm"},null,8,["modelValue"])]),f("div",uw,[c[16]||(c[16]=f("label",null,"y2",-1)),Ee(lt,{modelValue:i.value.point2.y,"onUpdate:modelValue":c[6]||(c[6]=p=>i.value.point2.y=p),step:.1,placeholder:"Y2",class:"form-control form-control-sm"},null,8,["modelValue"])])]),f("div",cw,[c[17]||(c[17]=f("label",null,"Sensitivity (0.0 = permissive, 1.0 = strict)",-1)),Ee(lt,{modelValue:i.value.sensitivity,"onUpdate:modelValue":c[7]||(c[7]=p=>i.value.sensitivity=p),step:.1,min:0,max:1,placeholder:"Sensitivity",class:"form-control form-control-sm"},null,8,["modelValue"])]),f("label",null,[Ge(f("input",{"onUpdate:modelValue":c[8]||(c[8]=p=>i.value.showKeyLabels=p),type:"checkbox"},null,512),[[Jo,i.value.showKeyLabels]]),c[18]||(c[18]=$e(" Key Labels ",-1))]),f("button",{onClick:l},"Draw Line")]),f("div",{class:"section"},[f("button",{onClick:d,class:"clear-btn"},"Clear All")])])])):Ke("",!0)}}),fw=St(dw,[["__scopeId","data-v-ad18810f"]]),hw={key:0,class:"debug-control-button-container"},pw=At({__name:"DebugControlButton",props:{debugOverlayRef:{}},setup(t){const n=Y(!1),o=()=>{n.value=!n.value};return(i,s)=>Ue(!1)?(ae(),pe("div",hw,[f("button",{type:"button",class:"debug-control-button btn btn-sm",onClick:o,title:"Debug Geometry Tools"},[...s[1]||(s[1]=[f("i",{class:"bi bi-bug"},null,-1)])]),n.value?(ae(),zn(fw,{key:0,visible:n.value,onClose:s[0]||(s[0]=r=>n.value=!1),debugOverlayRef:i.debugOverlayRef},null,8,["visible","debugOverlayRef"])):Ke("",!0)])):Ke("",!0)}}),vw=St(pw,[["__scopeId","data-v-8550aa05"]]),mw=["width","height"],gw={key:2,class:"matrix-renumbering-status"},bw={class:"status-label"},qs=9,yw=At({__name:"KeyboardCanvas",setup(t,{expose:e}){const o=An(),i=ul(),s=Li(),r=b=>typeof b=="object"&&b!==null&&"meta"in b&&"keys"in b&&Array.isArray(b.keys),l=Y(),a=Y(),d=Y(),h=Y(),c=Y(800),p=Y(600),m=Y(),g=Y(0),D=Y(0),T=Y(),y=Y(!1);at(()=>i.isModalOpen,b=>{y.value=b});const C=Y(null),M=Y(null),E=Y(0),R=Y(0),L=Y(1),B=Y(!1),x=Y(!1),I=Y(null),N=Y({x:0,y:0,visible:!1}),z=Y(!1),F=Y(!1),te=Y(0),H=b=>{const $=b.dataTransfer;if(!$)return!1;if($.files?.length>0)return!0;const V=Array.from($.types||[]);return V.includes("Files")&&!V.includes("text/plain")},Q=Oe(()=>o.canvasMode==="select"?o.mouseDragMode==="rect-select"?"crosshair":"default":o.canvasMode==="rotate"?M.value?"pointer":"default":o.canvasMode==="mirror-h"||o.canvasMode==="mirror-v"?o.selectedKeys.length>0?"copy":"not-allowed":o.canvasMode==="move-exactly"?o.selectedKeys.length>0?"move":"not-allowed":o.mouseDragMode==="key-move"?"grabbing":"default"),W=Oe(()=>d.value?.renumberingStatus||null),J=Oe(()=>({unit:54,background:o.metadata?.backcolor||"#ffffff",fontFamily:s.canvasFontFamily}));at(()=>o.keys.length,()=>{y.value&&(y.value=!1),d.value&&d.value.clearDrawings()}),Qt(()=>{l.value&&a.value&&(m.value=new ey(l.value,J.value),m.value.setImageLoadCallback(()=>{je(()=>{me()})}),m.value.setImageErrorCallback(b=>{const $=b.substring(b.lastIndexOf("/")+1);Be.showError(`Failed to load image: ${$}`,"Image Load Error")}),ye(),se(),me(),l.value.focus(),z.value=!0,window.addEventListener("resize",j),j(),T.value=new ResizeObserver(()=>{ye(),se(),je(()=>{me()})}),T.value.observe(a.value),window.addEventListener("canvas-zoom",Wt),window.addEventListener("canvas-reset-view",kn),window.addEventListener("request-canvas-focus",q),window.addEventListener("system-copy",Z),G=new MutationObserver(b=>{b.forEach($=>{$.type==="attributes"&&$.attributeName==="data-bs-theme"&&me()})}),G.observe(document.documentElement,{attributes:!0,attributeFilter:["data-bs-theme"]}))}),at([()=>o.keys,()=>o.selectedKeys,()=>o.tempSelectedKeys,()=>o.mouseDragMode,()=>o.metadata],async(b,$)=>{await je();const[V]=b,[he]=$||[[],[]];(!he||V.length!==he.length||V.some((de,ze)=>{const Le=he[ze];return!Le||de.x!==Le.x||de.y!==Le.y||de.width!==Le.width||de.height!==Le.height||de.width2!==Le.width2||de.height2!==Le.height2||de.x2!==Le.x2||de.y2!==Le.y2||(de.rotation_angle||0)!==(Le.rotation_angle||0)||(de.rotation_x||0)!==(Le.rotation_x||0)||(de.rotation_y||0)!==(Le.rotation_y||0)}))&&(ye(),se(),await je(),await je()),me()},{deep:!0,immediate:!0}),at(()=>o.resetViewTrigger,()=>{Sn()}),at(L,async()=>{await je(),se(),await je(),me()}),at(()=>o.keys.length,async(b,$)=>{b!==$&&(await je(),ye(),se(),await je(),me())}),at(()=>o.keys.map(b=>({x:b.x,y:b.y,width:b.width,height:b.height,rotation_angle:b.rotation_angle||0,rotation_x:b.rotation_x||0,rotation_y:b.rotation_y||0})),async()=>{await je(),se(),await je(),me()},{deep:!0}),at(()=>o.canvasMode,async()=>{await je(),se(),await je(),me()}),at(()=>o.metadata?.backcolor,(b,$)=>{m.value&&b!==$&&(m.value.updateOptions(J.value),me())},{immediate:!1}),at(()=>s.canvasFontFamily,(b,$)=>{m.value&&b!==$&&(m.value.updateOptions(J.value),je(()=>{me()}))},{immediate:!1});let G=null;const ye=()=>{if(a.value){const b=a.value.getBoundingClientRect(),$=getComputedStyle(a.value),V=parseFloat($.paddingLeft)+parseFloat($.paddingRight);g.value=Math.max(800,b.width-V-40)}};let U=null;const Fe=()=>{if(o.keys.length===0||!m.value)return{minX:0,minY:0,maxX:1,maxY:1};let b=1/0,$=1/0,V=-1/0,he=-1/0;return o.keys.forEach(ge=>{const de=m.value.calculateRotatedKeyBounds(ge),ze=J.value.unit,Le=de.minX/ze,qe=de.minY/ze,tn=de.maxX/ze,Dt=de.maxY/ze;b=Math.min(b,Le),$=Math.min($,qe),V=Math.max(V,tn),he=Math.max(he,Dt)}),{minX:b,minY:$,maxX:V,maxY:he}},nt=()=>{const b=U||Fe(),$=S.mul(S.min(b.minX,0),J.value.unit),V=S.mul(S.min(b.minY,0),J.value.unit);return{x:-$+qs/L.value,y:-V+qs/L.value}};let Ce=!1;const se=()=>{if(Ce)return;if(Ce=!0,o.keys.length===0){const $t=S.round(S.mul(800,L.value))+qs*2,Vt=S.round(S.mul(600,L.value))+qs*2;c.value=$t,p.value=Vt,g.value=$t,D.value=Vt,U=null,Ce=!1;return}if(!m.value){Ce=!1;return}const b=Fe();U=b;const{minX:$,minY:V,maxX:he,maxY:ge}=b,de=J.value.unit*L.value;let ze=(he-Math.min($,0))*de,Le=(ge-Math.min(V,0))*de;const qe=200*L.value;o.canvasMode==="mirror-h"?Le+=qe*2:o.canvasMode==="mirror-v"&&(ze+=qe*2);const tn=ze,Dt=Le,Ft=Math.ceil(tn)+qs*2,ht=Math.ceil(Dt)+qs*2;(c.value!==Ft||p.value!==ht)&&(c.value=Ft,p.value=ht,g.value=Ft,D.value=ht),U=null,Ce=!1},De=b=>{if(!o.rectSelectStart||!o.rectSelectEnd)return;const $=o.rectSelectStart.x,V=o.rectSelectStart.y,he=o.rectSelectEnd.x,ge=o.rectSelectEnd.y,de=Math.min($,he),ze=Math.min(V,ge),Le=Math.abs(he-$),qe=Math.abs(ge-V);Le<2&&qe<2||(b.strokeStyle="#dc3545",b.lineWidth=2,b.setLineDash([8,4]),b.strokeRect(de,ze,Le,qe),b.fillStyle="rgba(220, 53, 69, 0.1)",b.fillRect(de,ze,Le,qe),b.setLineDash([]))},Me=b=>{let $=null,V=null;if(o.mirrorAxis)V={x:o.mirrorAxis.x,y:o.mirrorAxis.y,direction:o.mirrorAxis.direction},$={x:o.mirrorAxis.x*J.value.unit,y:o.mirrorAxis.y*J.value.unit,direction:o.mirrorAxis.direction};else if(N.value.visible){const he=o.moveStep,ge=S.roundToStep(N.value.x,he),de=S.roundToStep(N.value.y,he);V={x:ge,y:de,direction:o.canvasMode==="mirror-h"?"horizontal":"vertical"},$={x:S.mul(ge,J.value.unit),y:S.mul(de,J.value.unit),direction:o.canvasMode==="mirror-h"?"horizontal":"vertical"}}if(!(!$||!V)){if(b.save(),b.strokeStyle=o.mirrorAxis?"#ff6b35":"rgba(255, 107, 53, 0.6)",b.lineWidth=o.mirrorAxis?3:2,b.setLineDash(o.mirrorAxis?[]:[10,5]),b.beginPath(),$.direction==="horizontal"?(b.moveTo(0,$.y),b.lineTo(c.value,$.y)):(b.moveTo($.x,0),b.lineTo($.x,p.value)),b.stroke(),!o.mirrorAxis&&N.value.visible){const he=V.direction==="horizontal"?`Y: ${V.y}`:`X: ${V.x}`,ge=$.direction==="horizontal"?Math.min($.x+10,c.value-80):$.x+10,de=$.direction==="horizontal"?$.y-10:Math.min($.y+10,p.value-30);b.fillStyle="rgba(0, 0, 0, 0.8)",b.font='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';const Le=b.measureText(he).width+12;b.fillRect(ge-6,de-15,Le,20),b.fillStyle="white",b.fillText(he,ge,de)}b.setLineDash([]),b.restore()}},me=()=>{if(m.value)try{const b=m.value.getContext();b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,b.canvas.width,b.canvas.height);const $=o.metadata.radii?.trim()||"6px",V=getComputedStyle(a.value).backgroundColor;b.fillStyle=V,b.fillRect(0,0,b.canvas.width,b.canvas.height),b.fillStyle=J.value.background;const he=uu($,b.canvas.width,b.canvas.height);cu(b,0,0,b.canvas.width,b.canvas.height,he),b.fill(),b.restore(),b.save();const ge=nt();b.setTransform(L.value,0,0,L.value,E.value+ge.x*L.value,R.value+ge.y*L.value);const de=o.mouseDragMode==="rect-select"?o.tempSelectedKeys:o.selectedKeys;m.value.render(o.keys,de,o.metadata,!1,o.canvasMode==="rotate"&&o.selectedKeys.length>0,M.value||void 0,o.rotationOrigin),o.mouseDragMode==="rect-select"&&De(b),(o.canvasMode==="mirror-h"||o.canvasMode==="mirror-v")&&o.selectedKeys.length>0&&Me(b),b.restore()}catch(b){console.error("Error rendering keyboard:",b)}},j=()=>{ye(),se(),je(()=>{me()})},K=b=>{const $=l.value?.getBoundingClientRect();if(!$)return{x:0,y:0};const V=S.sub(b.clientX,$.left),he=S.sub(b.clientY,$.top),ge=C.value||nt();return{x:S.div(S.sub(V,S.add(E.value,S.mul(ge.x,L.value))),L.value),y:S.div(S.sub(he,S.add(R.value,S.mul(ge.y,L.value))),L.value)}},ie=b=>{if(b.target!==l.value){if(o.canvasMode==="rotate"){o.setCanvasMode("select");return}if(B.value){B.value=!1;return}b.preventDefault(),o.unselectAll(),l.value&&l.value.focus()}},_e=b=>{b.target!==l.value&&b.preventDefault()},k=b=>{b.target!==l.value&&o.mouseDragMode==="rect-select"&&(ce(),B.value=!0)},O=b=>{if(!m.value)return;if(o.canvasMode==="rotate"){const he=K(b),ge=m.value.getRotationPointAtPosition(he.x,he.y);ge?o.startRotation({x:ge.x,y:ge.y}):o.setCanvasMode("select");return}if(B.value){B.value=!1;return}if(x.value){x.value=!1;return}const $=K(b);if(o.canvasMode==="mirror-h"||o.canvasMode==="mirror-v"){if(o.selectedKeys.length===0){o.setCanvasMode("select");return}const he=o.canvasMode==="mirror-h"?"horizontal":"vertical";o.setMirrorAxis($,he),o.performMirror();return}const V=m.value.getKeyAtPosition($.x,$.y,o.keys);V?o.selectKey(V,b.ctrlKey||b.metaKey):!b.ctrlKey&&!b.metaKey&&o.unselectAll(),l.value?.focus()},P=b=>{if(!m.value||o.canvasMode==="rotate"||o.canvasMode==="mirror-h"||o.canvasMode==="mirror-v")return;const $=K(b),V=m.value.getKeyAtPosition($.x,$.y,o.keys);if(b.button===0){!b.ctrlKey&&!b.metaKey&&(C.value=nt(),o.startRectSelect($),B.value=!1,document.addEventListener("mousemove",re),document.addEventListener("mouseup",fe));return}if(b.button===1){b.preventDefault(),l.value&&l.value.focus(),V&&(o.selectedKeys.includes(V)||o.selectKey(V,!1),C.value=nt(),o.startKeyDrag(V,$),I.value={key:V,pos:$},x.value=!1,document.addEventListener("mousemove",re),document.addEventListener("mouseup",fe));return}if(b.button===2){b.preventDefault();return}},oe=b=>{if(Ne(b),o.canvasMode==="rotate"&&m.value){const $=K(b),V=m.value.getRotationPointAtPosition($.x,$.y);V?.id!==M.value&&(M.value=V?.id||null,je(()=>{me()}));return}if(o.canvasMode==="mirror-h"||o.canvasMode==="mirror-v"){je(()=>{me()});return}if(I.value&&o.mouseDragMode==="none"){const $=K(b),V=I.value.pos;S.sqrt(S.add(S.pow(S.sub($.x,V.x),2),S.pow(S.sub($.y,V.y),2)))>5&&(x.value=!0,I.value=null)}ne(b)},ne=b=>{if(o.mouseDragMode==="key-move"){const $=K(b);o.updateKeyDrag($),x.value=!0,ue(b),je(()=>{me()});return}if(o.mouseDragMode==="rect-select"){const $=K(b),V=vo($);o.updateRectSelect($,V),B.value=!0,ue(b);return}},re=b=>{(o.mouseDragMode==="key-move"||o.mouseDragMode==="rect-select")&&ne(b)},ue=b=>{if(!a.value)return;const $=a.value,V=$.getBoundingClientRect(),he=b.clientX-V.left,ge=b.clientY-V.top,de=50,ze=10;let Le=0,qe=0;he<de&&$.scrollLeft>0?Le=-Math.max(1,ze*(de-he)/de):he>V.width-de&&$.scrollLeft<$.scrollWidth-$.clientWidth&&(Le=Math.max(1,ze*(he-(V.width-de))/de)),ge<de&&$.scrollTop>0?qe=-Math.max(1,ze*(de-ge)/de):ge>V.height-de&&$.scrollTop<$.scrollHeight-$.clientHeight&&(qe=Math.max(1,ze*(ge-(V.height-de))/de)),(Le!==0||qe!==0)&&$.scrollBy(Le,qe)},ve=()=>{ce()},ce=()=>{if(I.value=null,C.value=null,document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",fe),o.mouseDragMode==="key-move"){o.endKeyDrag();return}if(o.mouseDragMode==="rect-select"){o.endRectSelect();return}},fe=()=>{ce()},Te=()=>{N.value.visible=!0},Se=()=>{N.value.visible=!1,M.value&&(M.value=null,je(()=>{me()})),window.dispatchEvent(new CustomEvent("canvas-mouse-position",{detail:{x:N.value.x,y:N.value.y,visible:!1}}))},Pe=b=>{b.preventDefault()},Ne=b=>{const $=K(b);N.value.x=S.format(S.div($.x,J.value.unit),2),N.value.y=S.format(S.div($.y,J.value.unit),2),window.dispatchEvent(new CustomEvent("canvas-mouse-position",{detail:{x:N.value.x,y:N.value.y,visible:N.value.visible}}))},ot=()=>{z.value=!0,window.dispatchEvent(new CustomEvent("canvas-focus-change",{detail:{focused:!0}}))},et=()=>{z.value=!1,window.dispatchEvent(new CustomEvent("canvas-focus-change",{detail:{focused:!1}}))},Je=async b=>{if((b.ctrlKey||b.metaKey)&&(b.key==="["||b.key==="]")){b.preventDefault(),b.key==="["?Oo():Io();return}if(b.ctrlKey||b.metaKey)switch(b.key.toLowerCase()){case"a":b.preventDefault(),o.selectAll();break;case"c":b.preventDefault(),await o.copy();break;case"x":b.preventDefault(),await o.cut();break;case"v":b.preventDefault(),await o.paste();break;case"z":b.preventDefault(),b.shiftKey?o.redo():o.undo();break;case"y":b.preventDefault(),o.redo();break}else if(b.shiftKey)switch(b.key){case"ArrowLeft":b.preventDefault(),Lo("width",-o.moveStep);break;case"ArrowRight":b.preventDefault(),Lo("width",o.moveStep);break;case"ArrowUp":b.preventDefault(),Lo("height",-o.moveStep);break;case"ArrowDown":b.preventDefault(),Lo("height",o.moveStep);break}else switch(b.key){case"Delete":case"Backspace":b.preventDefault(),o.deleteKeys();break;case"Escape":b.preventDefault(),o.unselectAll();break;case"Insert":b.preventDefault(),o.addKey();break;case"a":case"A":b.preventDefault(),o.addKey();break;case"ArrowUp":b.preventDefault(),$o(0,-o.moveStep);break;case"ArrowDown":b.preventDefault(),$o(0,o.moveStep);break;case"ArrowLeft":b.preventDefault(),$o(-o.moveStep,0);break;case"ArrowRight":b.preventDefault(),$o(o.moveStep,0);break}},Rt=b=>{H(b)&&(b.preventDefault(),te.value++,te.value===1&&(F.value=!0))},Tt=b=>{H(b)&&(b.preventDefault(),b.dataTransfer.dropEffect="copy")},jt=b=>{(H(b)||F.value)&&(b.preventDefault(),te.value--,te.value===0&&(F.value=!1))},Xt=async b=>{if(te.value=0,F.value=!1,!H(b))return;b.preventDefault();const $=b.dataTransfer?.files;if(!$||$.length===0)return;const V=$[0];try{const he=V.name.replace(/\.[^/.]+$/,"");if(V.type==="image/png"||V.name.toLowerCase().endsWith(".png")){if(console.log(`Checking dropped PNG file for embedded layout: ${V.name}`),await Vh(V)){const ge=await Kh(V);ge?(console.log(`Loading layout from dropped PNG metadata: ${V.name}`),o.loadKLELayout(ge),o.filename=he,Be.showSuccess(`Layout imported from PNG: ${V.name}`,"Import Successful")):Be.showError("Failed to extract layout data from PNG metadata","Import Failed")}else Be.showError("This PNG file does not contain layout data. Only PNG files exported from this tool contain the necessary metadata to import layouts.","No Layout Data");return}if(V.type==="application/json"||V.name.toLowerCase().endsWith(".json")){console.log(`Processing dropped JSON file: ${V.name}`);const ge=await V.text(),de=Oi(ge);r(de)?(console.log(`Loading internal KLE format from dropped file: ${V.name}`),o.loadLayout(de.keys,de.meta),Be.showSuccess(`Internal KLE layout loaded from ${V.name}`,"Import Successful")):(console.log(`Loading raw KLE format from dropped file: ${V.name}`),o.loadKLELayout(de),Be.showSuccess(`KLE layout loaded from ${V.name}`,"Import Successful")),o.filename=he;return}Be.showError("Please drop a JSON or PNG file with keyboard layout data","Unsupported File Type")}catch(he){console.error("Error processing dropped file:",he);const ge=he instanceof Error?he.message:"Failed to process file";Be.showError(ge,"Import Failed")}},Wt=b=>{const $=b;L.value=$.detail,je(()=>{se(),je(()=>{me()})})},kn=()=>{L.value=1,E.value=0,R.value=0,je(()=>{se(),je(()=>{me()})})},q=()=>{l.value&&l.value.focus()},_=async b=>{try{navigator.clipboard&&window.isSecureContext?await navigator.clipboard.writeText(b):console.warn("Clipboard API not available, copy not performed")}catch($){console.warn("System clipboard copy error:",$)}},Z=b=>{_(b.detail)},Sn=()=>{L.value=1,E.value=0,R.value=0,window.dispatchEvent(new CustomEvent("canvas-zoom-update",{detail:L.value})),je(()=>{se(),je(()=>{me()})})},$o=(b,$)=>{o.selectedKeys.forEach(V=>{V.x=S.add(V.x,b),V.y=S.add(V.y,$),o.lockRotations&&(V.rotation_x!==void 0||V.rotation_y!==void 0)&&(V.rotation_x!==void 0&&(V.rotation_x=S.add(V.rotation_x,b)),V.rotation_y!==void 0&&(V.rotation_y=S.add(V.rotation_y,$)))}),o.saveState(),se(),je(()=>{me()})},Lo=(b,$)=>{o.selectedKeys.length!==0&&(o.selectedKeys.forEach(V=>{const he=V[b],ge=S.add(he,$);ge>0&&(V[b]=ge,b==="width"?V.width2!==void 0&&!V.stepped&&!V.x2&&!V.y2&&(V.width2=ge):b==="height"&&V.height2!==void 0&&!V.stepped&&!V.x2&&!V.y2&&(V.height2=ge))}),o.saveState(),se(),je(()=>{me()}))},Io=()=>{if(o.keys.length===0)return;const b=[...o.keys].sort((V,he)=>Math.abs(V.y-he.y)>.1?V.y-he.y:V.x-he.x);let $=0;if(o.selectedKeys.length===1){const V=o.selectedKeys[0],he=b.findIndex(ge=>ge===V);he!==-1&&($=(he+1)%b.length)}else if(o.selectedKeys.length>1){const V=o.selectedKeys.reduce((ge,de)=>{const ze=b.findIndex(qe=>qe===de),Le=b.findIndex(qe=>qe===ge);return ze>Le?de:ge});$=(b.findIndex(ge=>ge===V)+1)%b.length}o.selectKey(b[$],!1)},Oo=()=>{if(o.keys.length===0)return;const b=[...o.keys].sort((V,he)=>Math.abs(V.y-he.y)>.1?V.y-he.y:V.x-he.x);let $=b.length-1;if(o.selectedKeys.length===1){const V=o.selectedKeys[0],he=b.findIndex(ge=>ge===V);he!==-1&&($=he===0?b.length-1:he-1)}else if(o.selectedKeys.length>1){const V=o.selectedKeys.reduce((ge,de)=>{const ze=b.findIndex(qe=>qe===de),Le=b.findIndex(qe=>qe===ge);return ze<Le?de:ge}),he=b.findIndex(ge=>ge===V);$=he===0?b.length-1:he-1}o.selectKey(b[$],!1)},vo=b=>{if(!o.rectSelectStart||!m.value)return[];const $=m.value.getOptions().unit;return o.keys.filter(V=>ly(V,o.rectSelectStart,b,$))},$s=()=>{const b=o.selectedKeys;if(b.length===0)return 0;const $=b[0].rotation_angle||0;return b.every(he=>(he.rotation_angle||0)===$)?$:0},li=b=>{o.applyRotation(),je(()=>{me()})},ai=()=>{o.cancelRotation(),je(()=>{me()})},ui=b=>{o.updateRotationPreview(b),je(()=>{me()})},Ls=(b,$)=>{o.moveSelectedKeys(b,$),o.saveState(),je(()=>{o.setCanvasMode("select"),me()})},Hn=()=>{o.setCanvasMode("select")},Ro=()=>{},Gi=()=>{window.removeEventListener("resize",j),window.removeEventListener("canvas-zoom",Wt),window.removeEventListener("canvas-reset-view",kn),window.removeEventListener("request-canvas-focus",q),window.removeEventListener("system-copy",Z),document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",fe),C.value=null,T.value&&T.value.disconnect()};return an(()=>{Gi(),G&&(G.disconnect(),G=null)}),e({}),(b,$)=>(ae(),pe(xt,null,[f("div",{class:vt(["keyboard-canvas-container",{"drag-target":F.value}]),ref_key:"containerRef",ref:a,onClick:ie,onMousedown:_e,onMouseup:k,onDragover:Tt,onDragenter:Rt,onDragleave:jt,onDrop:Xt},[f("canvas",{ref_key:"canvasRef",ref:l,width:c.value,height:p.value,style:en({cursor:Q.value}),onClick:O,onMousedown:P,onMousemove:oe,onMouseup:ve,onMouseenter:Te,onMouseleave:Se,onContextmenu:Pe,class:"keyboard-canvas",tabindex:"0",onKeydown:Je,onFocus:ot,onBlur:et},null,44,mw),Ee(Gy,{ref_key:"matrixOverlayRef",ref:d,visible:y.value,canvasWidth:c.value,canvasHeight:p.value,zoom:L.value,panX:E.value,panY:R.value,coordinateOffset:nt(),renderer:m.value||null},null,8,["visible","canvasWidth","canvasHeight","zoom","panX","panY","coordinateOffset","renderer"]),Ue(!1)?(ae(),zn(ew,{key:0,ref_key:"debugOverlayRef",ref:h,visible:!0,canvasWidth:c.value,canvasHeight:p.value,zoom:L.value,panX:E.value,panY:R.value,coordinateOffset:nt()},null,8,["canvasWidth","canvasHeight","zoom","panX","panY","coordinateOffset"])):Ke("",!0),Ue(!1)?(ae(),zn(vw,{key:1,debugOverlayRef:h.value},null,8,["debugOverlayRef"])):Ke("",!0),W.value?(ae(),pe("div",gw,[f("span",bw,Ve(W.value.message),1),$[0]||($[0]=f("span",{class:"status-hint"},[$e("Press "),f("kbd",null,"Enter"),$e(" to confirm, "),f("kbd",null,"Esc"),$e(" to cancel")],-1))])):Ke("",!0)],34),Ee(Fy,{visible:Ue(o).canvasMode==="rotate"&&Ue(o).selectedKeys.length>0,"rotation-origin":Ue(o).rotationOrigin,"initial-angle":$s(),onApply:li,onCancel:ai,onAngleChange:ui},null,8,["visible","rotation-origin","initial-angle"]),Ee(jy,{visible:Ue(o).canvasMode==="move-exactly"&&Ue(o).selectedKeys.length>0,onApply:Ls,onCancel:Hn,onMovementChange:Ro},null,8,["visible"])],64))}}),ww=St(yw,[["__scopeId","data-v-0b19a6f8"]]);function xw(t,e,n){t=t/360,e=e/100,n=n/100;const o=n*e,i=o*(1-Math.abs(t*6%2-1)),s=n-o;let r=0,l=0,a=0;return 0<=t&&t<1/6?(r=o,l=i,a=0):1/6<=t&&t<2/6?(r=i,l=o,a=0):2/6<=t&&t<3/6?(r=0,l=o,a=i):3/6<=t&&t<4/6?(r=0,l=i,a=o):4/6<=t&&t<5/6?(r=i,l=0,a=o):5/6<=t&&t<1&&(r=o,l=0,a=i),{r:Math.round((r+s)*255),g:Math.round((l+s)*255),b:Math.round((a+s)*255)}}function Dw(t,e,n){t=t/255,e=e/255,n=n/255;const o=Math.max(t,e,n),i=Math.min(t,e,n),s=o-i;let r=0;const l=o===0?0:s/o,a=o;return s!==0&&(o===t?r=(e-n)/s%6:o===e?r=(n-t)/s+2:r=(t-e)/s+4,r*=60,r<0&&(r+=360)),{h:Math.round(r),s:Math.round(l*100),v:Math.round(a*100)}}function Ba(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}}function jh(t,e,n){const o=i=>{const s=Math.round(Math.max(0,Math.min(255,i))).toString(16);return s.length===1?"0"+s:s};return`#${o(t)}${o(e)}${o(n)}`}function _w(t){const e=Ba(t);return Dw(e.r,e.g,e.b)}function sa(t,e,n){const o=xw(t,e,n);return jh(o.r,o.g,o.b)}function qr(t){return/^#?[0-9A-F]{6}$/i.test(t)}function Na(t){return t.startsWith("#")?t:`#${t}`}const ia="kle-ng-recently-used-colors",Jd=12;class Cw{getRecentlyUsedColors(){try{const e=localStorage.getItem(ia);if(e){const n=JSON.parse(e);return Array.isArray(n)?n.slice(0,Jd):[]}}catch(e){console.warn("Failed to load recently used colors from localStorage:",e)}return[]}addColor(e){if(!e||!e.startsWith("#"))return;const n=e.toLowerCase(),i=this.getRecentlyUsedColors().filter(r=>r.toLowerCase()!==n),s=[n,...i].slice(0,Jd);try{localStorage.setItem(ia,JSON.stringify(s))}catch(r){console.warn("Failed to save recently used colors to localStorage:",r)}}clear(){try{localStorage.removeItem(ia)}catch(e){console.warn("Failed to clear recently used colors from localStorage:",e)}}}const Ri=new Cw,Ew={class:"custom-color-picker"},Aw={class:"saturation-picker"},Sw={class:"sketch-controls"},Fw={class:"hue-slider-wrap"},kw={class:"sketch-color-wrap"},Mw={class:"color-inputs"},Tw={class:"input-wrapper"},$w=["value"],Lw={class:"input-wrapper"},Iw={class:"input-wrapper"},Ow={class:"input-wrapper"},Rw={class:"color-presets"},Pw=["onClick","title"],Bw={key:0,class:"recently-used-colors"},Nw={class:"recently-used-grid"},Vw=["onClick","title"],Kw=At({__name:"CustomColorPicker",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const o=t,i=n,s=Y(0),r=Y(0),l=Y(100),a=Y(""),d=Y(0),h=Y(0),c=Y(0),p=Y(),m=Y(),g=Y(!1),D=Y(!1),T=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#4A4A4A","#9B9B9B","#FFFFFF"],y=Y([]),C=Oe(()=>r.value),M=Oe(()=>100-l.value),E=Oe(()=>({top:`${M.value}%`,left:`${C.value}%`})),R=Oe(()=>({backgroundColor:sa(s.value,100,100)})),L=Oe(()=>({left:`${s.value/360*100}%`})),B=Oe(()=>sa(s.value,r.value,l.value)),x=Ce=>{const se=_w(Ce);s.value=se.h,r.value=se.s,l.value=se.v;const De=Ba(Ce);a.value=Ce.replace("#",""),d.value=De.r,h.value=De.g,c.value=De.b};at(()=>o.modelValue,Ce=>{Ce!==B.value&&x(Ce)},{immediate:!0});const I=()=>{const Ce=B.value;i("update:modelValue",Ce)},N=()=>{y.value=Ri.getRecentlyUsedColors()};Qt(()=>{N()}),e({refreshRecentlyUsedColors:N});const z=Ce=>{if(!p.value)return;const se=p.value.getBoundingClientRect(),De=Math.max(0,Math.min(Ce.clientX-se.left,se.width)),Me=Math.max(0,Math.min(Ce.clientY-se.top,se.height));r.value=De/se.width*100,l.value=100-Me/se.height*100,ye(),I()},F=Ce=>{g.value=!0,z(Ce),document.addEventListener("mousemove",te),document.addEventListener("mouseup",H)},te=Ce=>{g.value&&z(Ce)},H=()=>{g.value=!1,document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",H)},Q=Ce=>{if(!m.value)return;const se=m.value.getBoundingClientRect(),De=Math.max(0,Math.min(Ce.clientX-se.left,se.width));s.value=De/se.width*360,ye(),I()},W=Ce=>{D.value=!0,Q(Ce),document.addEventListener("mousemove",J),document.addEventListener("mouseup",G)},J=Ce=>{D.value&&Q(Ce)},G=()=>{D.value=!1,document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",G)},ye=()=>{const Ce=sa(s.value,r.value,l.value),se=Ba(Ce);a.value=Ce.replace("#",""),d.value=se.r,h.value=se.g,c.value=se.b},U=Ce=>{const se=Ce.target;let De=se.value;if(De.startsWith("#")&&(De=De.substring(1)),De=De.replace(/[^0-9a-fA-F]/g,"").substring(0,6),se.value=De,a.value=De,De.length===6&&qr(`#${De}`)){const Me=Na(De);x(Me),I()}},Fe=(Ce,se)=>{const De=se??0;Ce==="r"?d.value=De:Ce==="g"?h.value=De:Ce==="b"&&(c.value=De);const Me=jh(d.value,h.value,c.value);x(Me),I()},nt=Ce=>{x(Ce),I()};return an(()=>{document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",H),document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",G)}),(Ce,se)=>(ae(),pe("div",Ew,[f("div",Aw,[f("canvas",{ref_key:"saturationCanvas",ref:p,class:"saturation-canvas",style:en(R.value),onMousedown:F,width:"250",height:"150"},null,36),se[4]||(se[4]=f("div",{class:"saturation-white"},null,-1)),se[5]||(se[5]=f("div",{class:"saturation-black"},null,-1)),f("div",{class:"saturation-pointer",style:en(E.value)},[...se[3]||(se[3]=[f("div",{class:"saturation-circle"},null,-1)])],4)]),f("div",Sw,[f("div",Fw,[f("div",{ref_key:"hueSlider",ref:m,class:"hue-slider",onMousedown:W},[f("div",{class:"hue-pointer",style:en(L.value)},[...se[6]||(se[6]=[f("div",{class:"hue-picker"},null,-1)])],4)],544)]),f("div",kw,[f("div",{class:"sketch-active-color",style:en({background:B.value})},null,4)])]),f("div",Mw,[f("div",Tw,[se[7]||(se[7]=f("label",{class:"control-label"},"hex",-1)),f("input",{value:a.value,onInput:U,class:"color-input",maxlength:"6",placeholder:"000000"},null,40,$w)]),f("div",Lw,[se[8]||(se[8]=f("label",{class:"control-label"},"r",-1)),Ee(lt,{"model-value":d.value,"onUpdate:modelValue":se[0]||(se[0]=De=>Fe("r",De)),min:0,max:255,step:1,size:"compact"},null,8,["model-value"])]),f("div",Iw,[se[9]||(se[9]=f("label",{class:"control-label"},"g",-1)),Ee(lt,{"model-value":h.value,"onUpdate:modelValue":se[1]||(se[1]=De=>Fe("g",De)),min:0,max:255,step:1,size:"compact"},null,8,["model-value"])]),f("div",Ow,[se[10]||(se[10]=f("label",{class:"control-label"},"b",-1)),Ee(lt,{"model-value":c.value,"onUpdate:modelValue":se[2]||(se[2]=De=>Fe("b",De)),min:0,max:255,step:1,size:"compact"},null,8,["model-value"])])]),f("div",Rw,[(ae(),pe(xt,null,En(T,De=>f("div",{key:De,class:"preset-color",style:en({backgroundColor:De}),onClick:Me=>nt(De),title:`Color: ${De}`},null,12,Pw)),64))]),y.value.length>0?(ae(),pe("div",Bw,[se[11]||(se[11]=f("div",{class:"recently-used-header"},"Recently used colors",-1)),f("div",Nw,[(ae(!0),pe(xt,null,En(y.value,De=>(ae(),pe("div",{key:De,class:"recently-used-color",style:en({backgroundColor:De}),onClick:Me=>nt(De),title:`Color: ${De}`},null,12,Vw))),128))])])):Ke("",!0)]))}}),zw=St(Kw,[["__scopeId","data-v-7b6d8334"]]),Uw=["title"],Hw={key:0,class:"color-picker-popup"},jw=At({__name:"ColorPicker",props:{modelValue:{},disabled:{type:Boolean,default:!1},size:{default:"sm"},class:{},style:{},title:{}},emits:["update:modelValue","change","input"],setup(t,{emit:e}){const n=t,o=e,i=Y(!1),s=Y(n.modelValue||"#CCCCCC"),r=Y(n.modelValue||"#CCCCCC"),l=Y(),a=Oe(()=>qr(s.value)?s.value:"#CCCCCC");at(()=>n.modelValue,M=>{M&&M!==s.value&&(s.value=M,r.value=M)});const d=M=>{s.value=M,o("update:modelValue",M),o("input",M)},h=()=>{n.disabled||(i.value||(r.value=s.value),i.value=!i.value)},c=()=>{Ri.addColor(s.value),l.value?.refreshRecentlyUsedColors(),o("change",s.value),o("input",s.value),i.value=!1},p=()=>{s.value=r.value,o("update:modelValue",r.value),o("change",r.value),o("input",r.value),i.value=!1},m=Y(),g=Y(null),D=M=>{g.value&&m.value?.contains(g.value)||m.value&&!m.value.contains(M.target)&&p()},T=M=>{g.value=M.target},y=()=>{setTimeout(()=>{g.value=null},10)},C=M=>{if(!i.value)return;const E=M.target;E.tagName==="INPUT"||E.tagName==="TEXTAREA"||(M.key==="Escape"?(M.preventDefault(),M.stopPropagation(),p()):M.key==="Enter"&&(M.preventDefault(),M.stopPropagation(),c()))};return at(i,M=>{M?(document.addEventListener("click",D),document.addEventListener("keydown",C),document.addEventListener("mousedown",T),document.addEventListener("mouseup",y)):(document.removeEventListener("click",D),document.removeEventListener("keydown",C),document.removeEventListener("mousedown",T),document.removeEventListener("mouseup",y))}),an(()=>{document.removeEventListener("click",D),document.removeEventListener("keydown",C),document.removeEventListener("mousedown",T),document.removeEventListener("mouseup",y)}),(M,E)=>(ae(),pe("div",{class:"vue-color-picker-wrapper",ref_key:"pickerRef",ref:m},[f("div",{onClick:E[0]||(E[0]=R=>!M.disabled&&h()),class:vt([[n.class,{disabled:M.disabled}],"color-picker-button"]),style:en(n.style),title:M.title},[f("div",{class:"color-preview-swatch",style:en({backgroundColor:a.value})},null,4)],14,Uw),i.value?(ae(),pe("div",Hw,[Ee(zw,{ref_key:"customColorPickerRef",ref:l,"model-value":s.value,"onUpdate:modelValue":d},null,8,["model-value"]),f("div",{class:"color-picker-footer"},[f("button",{onClick:p,type:"button",class:"btn btn-secondary btn-sm me-2"}," Cancel "),f("button",{onClick:c,type:"button",class:"btn btn-primary btn-sm"},"OK")])])):Ke("",!0)],512))}}),wn=St(jw,[["__scopeId","data-v-9775732c"]]),Ww={class:"key-properties-panel"},qw=["disabled"],Yw={class:"row g-3"},Xw={class:"col-lg-3 col-md-6"},Jw={class:"property-group position-rotation-container"},Gw={class:"d-flex justify-content-between align-items-center mb-2"},Zw={class:"property-group-title mb-0"},Qw=["title"],ex={class:"position-content"},tx={class:"mb-2"},nx={class:"row g-1"},ox={class:"col-6"},sx={class:"col-6"},ix={class:"mb-2"},rx={key:0,class:"row g-1"},lx={class:"col-6"},ax={class:"col-6"},ux={key:1,class:"row g-1"},cx={class:"mb-2"},dx={class:"d-flex justify-content-between align-items-center mb-1"},fx={class:"form-label small mb-0"},hx=["checked","disabled"],px={class:"row g-1"},vx={class:"col-6"},mx={class:"control-label"},gx={class:"col-6"},bx={class:"control-label"},yx={class:"position-content"},wx={class:"mb-2"},xx={class:"row g-1"},Dx={class:"col-3"},_x={class:"col-3"},Cx={class:"col-3"},Ex={class:"col-3"},Ax={class:"mb-2"},Sx={class:"row g-1"},Fx={class:"col-3"},kx={class:"col-3"},Mx={class:"col-3"},Tx={class:"col-3"},$x={class:"mb-2"},Lx={class:"d-flex justify-content-between align-items-center mb-1"},Ix={class:"form-label small mb-0"},Ox=["checked","disabled"],Rx={class:"row g-1"},Px={class:"col-6"},Bx={class:"control-label"},Nx={class:"col-6"},Vx={class:"control-label"},Kx={class:"col-lg-3 col-md-6"},zx={class:"property-group"},Ux={class:"mb-2"},Hx={class:"d-flex justify-content-between align-items-center mb-1"},jx=["disabled"],Wx={class:"labels-grid"},qx={class:"label-input-group"},Yx={class:"label-input-group"},Xx={class:"label-input-group"},Jx={class:"label-input-group"},Gx={class:"label-input-group"},Zx={class:"label-input-group"},Qx={class:"label-input-group"},eD={class:"label-input-group"},tD={class:"label-input-group"},nD={class:"mb-2"},oD={class:"d-flex justify-content-between align-items-center mb-1"},sD=["disabled"],iD={class:"labels-grid"},rD={class:"label-input-group"},lD={class:"label-input-group"},aD={class:"label-input-group"},uD={class:"row g-1 mb-2"},cD={class:"col-6"},dD={class:"input-group input-group-sm"},fD={class:"col-6"},hD={class:"input-group input-group-sm"},pD={class:"col-lg-3 col-md-6"},vD={class:"property-group"},mD={class:"mb-2"},gD={class:"mb-2"},bD={class:"d-flex justify-content-between align-items-center mb-1"},yD=["disabled"],wD={class:"text-size-grid-layout"},xD={class:"text-size-input-group"},DD={class:"text-size-input-group"},_D={class:"text-size-input-group"},CD={class:"text-size-input-group"},ED={class:"text-size-input-group"},AD={class:"text-size-input-group"},SD={class:"text-size-input-group"},FD={class:"text-size-input-group"},kD={class:"text-size-input-group"},MD={class:"mb-2"},TD={class:"row g-1"},$D={class:"col-6"},LD={class:"form-check form-check-sm"},ID={class:"form-check form-check-sm"},OD=["disabled"],RD={class:"col-6"},PD={class:"form-check form-check-sm"},BD={class:"form-check form-check-sm"},ND=At({__name:"KeyPropertiesPanel",setup(t){const e=An(),n=q=>S.format(q,6),o=Oe(()=>e.selectedKeys),i=Oe(()=>o.value.length===0||e.canvasMode==="rotate"||e.canvasMode==="mirror-h"||e.canvasMode==="mirror-v"),s=Oe(()=>e.moveStep),r=Oe(()=>{if(o.value.length===0)return!1;const q=o.value[0];return q.height2!==void 0&&q.height2!==q.height||q.x2!==void 0&&q.x2!==0||q.y2!==void 0&&q.y2!==0}),l=Oe(()=>{if(o.value.length===0)return!1;const q=o.value[0],_=q.width2&&q.width2!==q.width||q.height2&&q.height2!==q.height||q.x2!==0||q.y2!==0;return q.width===1&&q.height===1&&!_}),a=Y(!1),d=()=>{a.value=!a.value,localStorage.setItem("kle-ng-advanced-position",a.value.toString())};(()=>{const q=localStorage.getItem("kle-ng-advanced-position");q!==null&&(a.value=q==="true")})();const c=Y(!1),p=()=>{c.value=!c.value,localStorage.setItem("kle-ng-relative-rotation",c.value.toString())};(()=>{const q=localStorage.getItem("kle-ng-relative-rotation");q!==null&&(c.value=q==="true")})();const g=Y(Array(12).fill(void 0)),D=Y(Array(12).fill(void 0)),T=Y(Array(12).fill(void 0)),y=Y(Array(9).fill(void 0)),C=Y(1),M=Y(1),E=Y(1),R=Y(1),L=Y(0),B=Y(0),x=Y(0),I=Y(0),N=Y("#cccccc"),z=Y("#000000"),F=Y(3),te=Y(!1),H=Y(!1),Q=Y(!1),W=Y(!1),J=Y(0),G=Y(0),ye=Y(0),U=(q,_)=>S.sub(q,_),Fe=(q,_)=>S.add(q,_),nt=q=>{for(;q>180;)q-=360;for(;q<-180;)q+=360;return n(q)},Ce=Oe({get:()=>{if(o.value.length===0)return 0;const q=o.value[0],_=q.rotation_x||0;return c.value?n(U(_,q.x)):n(_)},set:q=>{G.value=q}}),se=Oe({get:()=>{if(o.value.length===0)return 0;const q=o.value[0],_=q.rotation_y||0;return c.value?n(U(_,q.y)):n(_)},set:q=>{ye.value=q}}),De=()=>{if(o.value.length===0){g.value=Array(12).fill(void 0),D.value=Array(12).fill(void 0),C.value=1,M.value=1,E.value=1,R.value=1,L.value=0,B.value=0,x.value=0,I.value=0,N.value="#cccccc",z.value="#000000",F.value=3,T.value=Array(12).fill(void 0),y.value=Array(9).fill(void 0),te.value=!1,H.value=!1,Q.value=!1,W.value=!1,J.value=0,G.value=0,ye.value=0;return}const q=o.value[0];if(o.value.length===1){for(g.value=[...q.labels],D.value=q.textColor.map(_=>_||q.default.textColor);D.value.length<12;)D.value.push(q.default.textColor);C.value=n(q.width),M.value=n(q.height),E.value=n(q.width2||q.width),R.value=n(q.height2||q.height),L.value=n(q.x),B.value=n(q.y),x.value=n(q.x2||0),I.value=n(q.y2||0),N.value=q.color,z.value=q.default.textColor,F.value=q.default.textSize,T.value=q.textSize.map(_=>_===void 0?void 0:_),y.value=[...T.value.slice(0,9)],te.value=!!q.ghost,H.value=!!q.stepped,Q.value=!!q.nub,W.value=!!q.decal,J.value=nt(q.rotation_angle||0),G.value=n(q.rotation_x||0),ye.value=n(q.rotation_y||0)}else g.value=Array(12).fill(void 0),D.value=Array(12).fill(q.default.textColor),C.value=n(q.width),M.value=n(q.height),E.value=n(q.width2||q.width),R.value=n(q.height2||q.height),L.value=n(q.x),B.value=n(q.y),x.value=n(q.x2||0),I.value=n(q.y2||0),N.value=q.color,z.value=q.default.textColor,F.value=q.default.textSize,T.value=q.textSize.map(_=>_===void 0?void 0:_),y.value=[...T.value.slice(0,9)],te.value=!!q.ghost,H.value=!!q.stepped,Q.value=!!q.nub,W.value=!!q.decal,J.value=nt(q.rotation_angle||0),G.value=n(q.rotation_x||0),ye.value=n(q.rotation_y||0)};at(o,()=>{De()},{deep:!0,immediate:!0});const Me=q=>{o.value.length!==0&&(o.value.forEach(_=>{_.labels[q]=g.value[q]||""}),e.saveState())},me=()=>{o.value.length!==0&&o.value.forEach(q=>{q.default.textColor=z.value,q.textColor=q.textColor.map(()=>{})})},j=()=>{if(o.value.length===0)return;const q=z.value.trim();if(!qr(q))return;const _=Na(q);o.value.forEach(Z=>{Z.default.textColor=_,Z.textColor=Z.textColor.map(()=>{})}),z.value=_,Ri.addColor(_),e.saveState()},K=q=>{const _=typeof q=="number"?q:parseInt(String(q));return isNaN(_)?3:Math.max(1,Math.min(9,_))},ie=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.width=C.value,q.width2!==void 0&&!q.stepped&&!q.x2&&!q.y2&&(q.width2=C.value)}),e.saveState())},_e=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.height=M.value,q.height2!==void 0&&!q.stepped&&!q.x2&&!q.y2&&(q.height2=M.value)}),e.saveState())},k=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.x=L.value}),e.saveState())},O=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.y=B.value}),e.saveState())},P=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.x2=x.value}),e.saveState())},oe=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.y2=I.value}),e.saveState())},ne=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.width2=E.value}),e.saveState())},re=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.height2=R.value}),e.saveState())},ue=()=>{o.value.length!==0&&o.value.forEach(q=>{q.color=N.value})},ve=()=>{if(o.value.length===0)return;const q=N.value.trim();if(!qr(q))return;const _=Na(q);o.value.forEach(Z=>{Z.color=_}),N.value=_,Ri.addColor(_),e.saveState()},ce=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.ghost=te.value}),e.saveState())},fe=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.stepped=H.value}),e.saveState())},Te=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.nub=Q.value}),e.saveState())},Se=()=>{o.value.length!==0&&(o.value.forEach(q=>{q.decal=W.value}),e.saveState())},Pe=()=>{if(o.value.length===0)return;const q=nt(J.value);o.value.forEach(_=>{_.rotation_angle=q}),J.value=q,e.saveState()},Ne=()=>{o.value.length!==0&&(o.value.forEach(q=>{const _=G.value;q.rotation_x=c.value?Fe(_,q.x):_}),e.saveState())},ot=()=>{o.value.length!==0&&(o.value.forEach(q=>{const _=ye.value;q.rotation_y=c.value?Fe(_,q.y):_}),e.saveState())},et=q=>{o.value.length!==0&&o.value.forEach(_=>{for(;_.textColor.length<=q;)_.textColor.push(void 0);const Z=D.value[q];Z===_.default.textColor?_.textColor[q]=void 0:_.textColor[q]=Z})},Je=q=>{if(o.value.length===0)return;o.value.forEach(Z=>{for(;Z.textColor.length<=q;)Z.textColor.push(void 0);const Sn=D.value[q];Sn===Z.default.textColor?Z.textColor[q]=void 0:Z.textColor[q]=Sn});const _=D.value[q];_&&Ri.addColor(_),e.saveState()},Rt=async()=>{o.value.length!==0&&(o.value.forEach(q=>{const _=q;delete _.width2,delete _.height2,delete _.x2,delete _.y2,delete _.stepped}),e.saveState(),await je(),De())},Tt=()=>{if(o.value.length!==0){o.value.forEach(q=>{for(let _=0;_<=8;_++)q.labels[_]=""});for(let q=0;q<=8;q++)g.value[q]="";e.saveState()}},jt=()=>{if(o.value.length!==0){o.value.forEach(q=>{for(let _=9;_<=11;_++)q.labels[_]=""});for(let q=9;q<=11;q++)g.value[q]="";e.saveState()}},Xt=()=>{if(o.value.length!==0){o.value.forEach(q=>{for(let _=0;_<=8;_++)q.textSize[_]=void 0});for(let q=0;q<=8;q++)T.value[q]=void 0;e.saveState()}},Wt=(q,_)=>{o.value.length===0||q<0||q>=9||(T.value[q]=_,o.value.forEach(Z=>{if(_==null)Z.textSize[q]=void 0;else{const Sn=K(_);Z.textSize[q]=Sn}}),e.saveState())},kn=q=>{q!==void 0&&o.value.length>0&&(o.value.forEach(_=>{_.default.textSize=q}),e.saveState())};return(q,_)=>(ae(),pe("div",Ww,[f("div",null,[f("fieldset",{disabled:i.value,class:vt({"opacity-50":i.value})},[f("div",Yw,[f("div",Xw,[f("div",Jw,[f("div",Gw,[f("h6",Zw,Ve(a.value?"Advanced Position & Rotation":"Position & Rotation"),1),f("button",{onClick:d,class:"btn btn-xs btn-outline-secondary toggle-mode-btn",title:a.value?"Switch to Basic Mode":"Switch to Advanced Mode"},Ve(a.value?"Basic":"Advanced"),9,Qw)]),Ge(f("div",ex,[f("div",tx,[_[99]||(_[99]=f("label",{class:"form-label small mb-1"},"Position",-1)),f("div",nx,[f("div",ox,[_[97]||(_[97]=f("label",{class:"control-label"},"X",-1)),Ee(lt,{modelValue:L.value,"onUpdate:modelValue":_[0]||(_[0]=Z=>L.value=Z),onChange:k,step:s.value,min:-100,max:100,title:"X Position"},null,8,["modelValue","step"])]),f("div",sx,[_[98]||(_[98]=f("label",{class:"control-label"},"Y",-1)),Ee(lt,{modelValue:B.value,"onUpdate:modelValue":_[1]||(_[1]=Z=>B.value=Z),onChange:O,step:s.value,min:-100,max:100,title:"Y Position"},null,8,["modelValue","step"])])])]),f("div",ix,[_[104]||(_[104]=f("label",{class:"form-label small mb-1"},"Size",-1)),r.value?(ae(),pe("div",ux,[f("div",{class:"col-12"},[_[103]||(_[103]=f("label",{class:"control-label"},"Non-rectangular Key",-1)),f("div",{class:"d-flex align-items-center form-control form-control-sm bg-light",style:{height:"27px"}},[_[102]||(_[102]=f("small",{class:"text-muted me-2"},"Size cannot be edited directly",-1)),f("button",{onClick:Rt,class:"btn btn-xs btn-outline-primary ms-auto",style:{"font-size":"10px",padding:"2px 6px"}}," Make Rectangular ")])])])):(ae(),pe("div",rx,[f("div",lx,[_[100]||(_[100]=f("label",{class:"control-label"},"Width",-1)),Ee(lt,{modelValue:C.value,"onUpdate:modelValue":_[2]||(_[2]=Z=>C.value=Z),onChange:ie,step:.25,min:.25,max:24,title:"Width"},null,8,["modelValue"])]),f("div",ax,[_[101]||(_[101]=f("label",{class:"control-label"},"Height",-1)),Ee(lt,{modelValue:M.value,"onUpdate:modelValue":_[3]||(_[3]=Z=>M.value=Z),onChange:_e,step:.25,min:.25,max:24,title:"Height"},null,8,["modelValue"])])]))]),f("div",cx,[_[107]||(_[107]=f("label",{class:"form-label small mb-1"},"Rotation",-1)),Ee(lt,{modelValue:J.value,"onUpdate:modelValue":_[4]||(_[4]=Z=>J.value=Z),onChange:Pe,step:15,min:-360,max:360,"wrap-around":!0,"wrap-min":-360,"wrap-max":360,class:"form-control form-control-sm mb-1",title:"Rotation Angle in Degrees"},{suffix:Yn(()=>[..._[105]||(_[105]=[$e("degrees",-1)])]),_:1},8,["modelValue"]),f("div",dx,[f("label",fx,Ve(c.value?"Origin Point (relative)":"Origin Point (absolute)"),1),f("div",{class:vt(["toggle-switch",{disabled:o.value.length===0}]),onClick:_[5]||(_[5]=Z=>o.value.length>0?p():null)},[f("input",{type:"checkbox",checked:c.value,disabled:o.value.length===0,class:"toggle-input"},null,8,hx),_[106]||(_[106]=f("span",{class:"toggle-slider"},[f("span",{class:"toggle-label toggle-label-left"},"A"),f("span",{class:"toggle-label toggle-label-right"},"R")],-1))],2)]),f("div",px,[f("div",vx,[f("label",mx,Ve(c.value?"X offset":"X"),1),Ee(lt,{modelValue:Ce.value,"onUpdate:modelValue":_[6]||(_[6]=Z=>Ce.value=Z),onChange:Ne,step:s.value,title:c.value?"Rotation Origin X (relative to key)":"Rotation Origin X (absolute)"},null,8,["modelValue","step","title"])]),f("div",gx,[f("label",bx,Ve(c.value?"Y offset":"Y"),1),Ee(lt,{modelValue:se.value,"onUpdate:modelValue":_[7]||(_[7]=Z=>se.value=Z),onChange:ot,step:s.value,title:c.value?"Rotation Origin Y (relative to key)":"Rotation Origin Y (absolute)"},null,8,["modelValue","step","title"])])])])],512),[[xa,!a.value]]),Ge(f("div",yx,[f("div",wx,[_[112]||(_[112]=f("label",{class:"form-label small mb-1"},"Position",-1)),f("div",xx,[f("div",Dx,[_[108]||(_[108]=f("label",{class:"control-label"},"X",-1)),Ee(lt,{modelValue:L.value,"onUpdate:modelValue":_[8]||(_[8]=Z=>L.value=Z),onChange:k,step:s.value,min:0,max:36,title:"X Position"},null,8,["modelValue","step"])]),f("div",_x,[_[109]||(_[109]=f("label",{class:"control-label"},"Y",-1)),Ee(lt,{modelValue:B.value,"onUpdate:modelValue":_[9]||(_[9]=Z=>B.value=Z),onChange:O,step:s.value,min:0,max:36,title:"Y Position"},null,8,["modelValue","step"])]),f("div",Cx,[_[110]||(_[110]=f("label",{class:"control-label"},"X2",-1)),Ee(lt,{modelValue:x.value,"onUpdate:modelValue":_[10]||(_[10]=Z=>x.value=Z),onChange:P,step:s.value,min:0,max:36,title:"Secondary X Position"},null,8,["modelValue","step"])]),f("div",Ex,[_[111]||(_[111]=f("label",{class:"control-label"},"Y2",-1)),Ee(lt,{modelValue:I.value,"onUpdate:modelValue":_[11]||(_[11]=Z=>I.value=Z),onChange:oe,step:s.value,min:0,max:36,title:"Secondary Y Position"},null,8,["modelValue","step"])])])]),f("div",Ax,[_[117]||(_[117]=f("label",{class:"form-label small mb-1"},"Size",-1)),f("div",Sx,[f("div",Fx,[_[113]||(_[113]=f("label",{class:"control-label"},"Width",-1)),Ee(lt,{modelValue:C.value,"onUpdate:modelValue":_[12]||(_[12]=Z=>C.value=Z),onChange:ie,step:.25,min:.25,max:24,title:"Width"},null,8,["modelValue"])]),f("div",kx,[_[114]||(_[114]=f("label",{class:"control-label"},"Height",-1)),Ee(lt,{modelValue:M.value,"onUpdate:modelValue":_[13]||(_[13]=Z=>M.value=Z),onChange:_e,step:.25,min:.25,max:24,title:"Height"},null,8,["modelValue"])]),f("div",Mx,[_[115]||(_[115]=f("label",{class:"control-label"},"Width2",-1)),Ee(lt,{modelValue:E.value,"onUpdate:modelValue":_[14]||(_[14]=Z=>E.value=Z),onChange:ne,step:.25,min:.25,max:24,title:"Secondary Width"},null,8,["modelValue"])]),f("div",Tx,[_[116]||(_[116]=f("label",{class:"control-label"},"Height2",-1)),Ee(lt,{modelValue:R.value,"onUpdate:modelValue":_[15]||(_[15]=Z=>R.value=Z),onChange:re,step:.25,min:.25,max:24,title:"Secondary Height"},null,8,["modelValue"])])])]),f("div",$x,[_[120]||(_[120]=f("label",{class:"form-label small mb-1"},"Rotation",-1)),Ee(lt,{modelValue:J.value,"onUpdate:modelValue":_[16]||(_[16]=Z=>J.value=Z),onChange:Pe,step:15,min:-360,max:360,"wrap-around":!0,"wrap-min":-360,"wrap-max":360,class:"form-control form-control-sm mb-1",title:"Rotation Angle in Degrees"},{suffix:Yn(()=>[..._[118]||(_[118]=[$e("degrees",-1)])]),_:1},8,["modelValue"]),f("div",Lx,[f("label",Ix,Ve(c.value?"Origin Point (relative)":"Origin Point (absolute)"),1),f("div",{class:vt(["toggle-switch",{disabled:o.value.length===0}]),onClick:_[17]||(_[17]=Z=>o.value.length>0?p():null)},[f("input",{type:"checkbox",checked:c.value,disabled:o.value.length===0,class:"toggle-input"},null,8,Ox),_[119]||(_[119]=f("span",{class:"toggle-slider"},[f("span",{class:"toggle-label toggle-label-left"},"A"),f("span",{class:"toggle-label toggle-label-right"},"R")],-1))],2)]),f("div",Rx,[f("div",Px,[f("label",Bx,Ve(c.value?"X offset":"X"),1),Ee(lt,{modelValue:Ce.value,"onUpdate:modelValue":_[18]||(_[18]=Z=>Ce.value=Z),onChange:Ne,step:s.value,min:c.value?-2:0,max:c.value?2:36,title:c.value?"Rotation Origin X (relative to key)":"Rotation Origin X (absolute)"},null,8,["modelValue","step","min","max","title"])]),f("div",Nx,[f("label",Vx,Ve(c.value?"Y offset":"Y"),1),Ee(lt,{modelValue:se.value,"onUpdate:modelValue":_[19]||(_[19]=Z=>se.value=Z),onChange:ot,step:s.value,min:c.value?-2:0,max:c.value?2:36,title:c.value?"Rotation Origin Y (relative to key)":"Rotation Origin Y (absolute)"},null,8,["modelValue","step","min","max","title"])])])])],512),[[xa,a.value]])])]),f("div",Kx,[f("div",zx,[_[125]||(_[125]=f("h6",{class:"property-group-title"},"Labels and Colors",-1)),f("div",Ux,[f("div",Hx,[_[121]||(_[121]=f("label",{class:"form-label small mb-0"},"Top labels",-1)),f("button",{onClick:Tt,class:"btn btn-xs btn-outline-secondary clear-labels-btn",disabled:i.value,title:"Clear all top labels"}," Clear all ",8,jx)]),f("div",Wx,[f("div",qx,[Ge(f("input",{"onUpdate:modelValue":_[20]||(_[20]=Z=>g.value[0]=Z),onInput:_[21]||(_[21]=Z=>Me(0)),type:"text",class:"form-control form-control-sm text-center",title:"Top Left"},null,544),[[Ut,g.value[0]]]),Ee(wn,{modelValue:D.value[0],"onUpdate:modelValue":_[22]||(_[22]=Z=>D.value[0]=Z),onChange:_[23]||(_[23]=Z=>Je(0)),onInput:_[24]||(_[24]=Z=>et(0)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Top Left Color"},null,8,["modelValue","disabled"])]),f("div",Yx,[Ge(f("input",{"onUpdate:modelValue":_[25]||(_[25]=Z=>g.value[1]=Z),onInput:_[26]||(_[26]=Z=>Me(1)),type:"text",class:"form-control form-control-sm text-center",title:"Top Center"},null,544),[[Ut,g.value[1]]]),Ee(wn,{modelValue:D.value[1],"onUpdate:modelValue":_[27]||(_[27]=Z=>D.value[1]=Z),onChange:_[28]||(_[28]=Z=>Je(1)),onInput:_[29]||(_[29]=Z=>et(1)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Top Center Color"},null,8,["modelValue","disabled"])]),f("div",Xx,[Ge(f("input",{"onUpdate:modelValue":_[30]||(_[30]=Z=>g.value[2]=Z),onInput:_[31]||(_[31]=Z=>Me(2)),type:"text",class:"form-control form-control-sm text-center",title:"Top Right"},null,544),[[Ut,g.value[2]]]),Ee(wn,{modelValue:D.value[2],"onUpdate:modelValue":_[32]||(_[32]=Z=>D.value[2]=Z),onChange:_[33]||(_[33]=Z=>Je(2)),onInput:_[34]||(_[34]=Z=>et(2)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Top Right Color"},null,8,["modelValue","disabled"])]),f("div",Jx,[Ge(f("input",{"onUpdate:modelValue":_[35]||(_[35]=Z=>g.value[3]=Z),onInput:_[36]||(_[36]=Z=>Me(3)),type:"text",class:"form-control form-control-sm text-center",title:"Center Left"},null,544),[[Ut,g.value[3]]]),Ee(wn,{modelValue:D.value[3],"onUpdate:modelValue":_[37]||(_[37]=Z=>D.value[3]=Z),onChange:_[38]||(_[38]=Z=>Je(3)),onInput:_[39]||(_[39]=Z=>et(3)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Center Left Color"},null,8,["modelValue","disabled"])]),f("div",Gx,[Ge(f("input",{"onUpdate:modelValue":_[40]||(_[40]=Z=>g.value[4]=Z),onInput:_[41]||(_[41]=Z=>Me(4)),type:"text",class:"form-control form-control-sm text-center",title:"Center (Main)"},null,544),[[Ut,g.value[4]]]),Ee(wn,{modelValue:D.value[4],"onUpdate:modelValue":_[42]||(_[42]=Z=>D.value[4]=Z),onChange:_[43]||(_[43]=Z=>Je(4)),onInput:_[44]||(_[44]=Z=>et(4)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Center Color"},null,8,["modelValue","disabled"])]),f("div",Zx,[Ge(f("input",{"onUpdate:modelValue":_[45]||(_[45]=Z=>g.value[5]=Z),onInput:_[46]||(_[46]=Z=>Me(5)),type:"text",class:"form-control form-control-sm text-center",title:"Center Right"},null,544),[[Ut,g.value[5]]]),Ee(wn,{modelValue:D.value[5],"onUpdate:modelValue":_[47]||(_[47]=Z=>D.value[5]=Z),onChange:_[48]||(_[48]=Z=>Je(5)),onInput:_[49]||(_[49]=Z=>et(5)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Center Right Color"},null,8,["modelValue","disabled"])]),f("div",Qx,[Ge(f("input",{"onUpdate:modelValue":_[50]||(_[50]=Z=>g.value[6]=Z),onInput:_[51]||(_[51]=Z=>Me(6)),type:"text",class:"form-control form-control-sm text-center",title:"Bottom Left"},null,544),[[Ut,g.value[6]]]),Ee(wn,{modelValue:D.value[6],"onUpdate:modelValue":_[52]||(_[52]=Z=>D.value[6]=Z),onChange:_[53]||(_[53]=Z=>Je(6)),onInput:_[54]||(_[54]=Z=>et(6)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Bottom Left Color"},null,8,["modelValue","disabled"])]),f("div",eD,[Ge(f("input",{"onUpdate:modelValue":_[55]||(_[55]=Z=>g.value[7]=Z),onInput:_[56]||(_[56]=Z=>Me(7)),type:"text",class:"form-control form-control-sm text-center",title:"Bottom Center"},null,544),[[Ut,g.value[7]]]),Ee(wn,{modelValue:D.value[7],"onUpdate:modelValue":_[57]||(_[57]=Z=>D.value[7]=Z),onChange:_[58]||(_[58]=Z=>Je(7)),onInput:_[59]||(_[59]=Z=>et(7)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Bottom Center Color"},null,8,["modelValue","disabled"])]),f("div",tD,[Ge(f("input",{"onUpdate:modelValue":_[60]||(_[60]=Z=>g.value[8]=Z),onInput:_[61]||(_[61]=Z=>Me(8)),type:"text",class:"form-control form-control-sm text-center",title:"Bottom Right"},null,544),[[Ut,g.value[8]]]),Ee(wn,{modelValue:D.value[8],"onUpdate:modelValue":_[62]||(_[62]=Z=>D.value[8]=Z),onChange:_[63]||(_[63]=Z=>Je(8)),onInput:_[64]||(_[64]=Z=>et(8)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Bottom Right Color"},null,8,["modelValue","disabled"])])])]),f("div",nD,[f("div",oD,[_[122]||(_[122]=f("label",{class:"form-label small mb-0"},"Front labels",-1)),f("button",{onClick:jt,class:"btn btn-xs btn-outline-secondary clear-labels-btn",disabled:i.value,title:"Clear all front labels"}," Clear all ",8,sD)]),f("div",iD,[f("div",rD,[Ge(f("input",{"onUpdate:modelValue":_[65]||(_[65]=Z=>g.value[9]=Z),onInput:_[66]||(_[66]=Z=>Me(9)),type:"text",class:"form-control form-control-sm text-center",title:"Top Left"},null,544),[[Ut,g.value[9]]]),Ee(wn,{modelValue:D.value[9],"onUpdate:modelValue":_[67]||(_[67]=Z=>D.value[9]=Z),onChange:_[68]||(_[68]=Z=>Je(9)),onInput:_[69]||(_[69]=Z=>et(9)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Top Left Color"},null,8,["modelValue","disabled"])]),f("div",lD,[Ge(f("input",{"onUpdate:modelValue":_[70]||(_[70]=Z=>g.value[10]=Z),onInput:_[71]||(_[71]=Z=>Me(10)),type:"text",class:"form-control form-control-sm text-center",title:"Top Center"},null,544),[[Ut,g.value[10]]]),Ee(wn,{modelValue:D.value[10],"onUpdate:modelValue":_[72]||(_[72]=Z=>D.value[10]=Z),onChange:_[73]||(_[73]=Z=>Je(10)),onInput:_[74]||(_[74]=Z=>et(10)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Top Center Color"},null,8,["modelValue","disabled"])]),f("div",aD,[Ge(f("input",{"onUpdate:modelValue":_[75]||(_[75]=Z=>g.value[11]=Z),onInput:_[76]||(_[76]=Z=>Me(11)),type:"text",class:"form-control form-control-sm text-center",title:"Top Right"},null,544),[[Ut,g.value[11]]]),Ee(wn,{modelValue:D.value[11],"onUpdate:modelValue":_[77]||(_[77]=Z=>D.value[11]=Z),onChange:_[78]||(_[78]=Z=>Je(11)),onInput:_[79]||(_[79]=Z=>et(11)),disabled:i.value,class:"label-color-picker",style:{width:"16px",height:"16px",flex:"none","border-radius":"0"},title:"Top Right Color"},null,8,["modelValue","disabled"])])])]),f("div",uD,[f("div",cD,[_[123]||(_[123]=f("label",{class:"form-label small mb-1"},"Key Color",-1)),f("div",dD,[Ee(wn,{modelValue:N.value,"onUpdate:modelValue":_[80]||(_[80]=Z=>N.value=Z),onChange:ve,onInput:ue,disabled:i.value,class:"form-control form-control-color key-color-input",style:{width:"24px",flex:"none","border-radius":"0"},title:"Key Color"},null,8,["modelValue","disabled"]),Ge(f("input",{"onUpdate:modelValue":_[81]||(_[81]=Z=>N.value=Z),onChange:ve,type:"text",class:"form-control form-control-sm",style:{"font-size":"0.65rem"}},null,544),[[Ut,N.value]])])]),f("div",fD,[_[124]||(_[124]=f("label",{class:"form-label small mb-1"},"Text Color",-1)),f("div",hD,[Ee(wn,{modelValue:z.value,"onUpdate:modelValue":_[82]||(_[82]=Z=>z.value=Z),onChange:j,onInput:me,disabled:i.value,class:"form-control form-control-color text-color-input",style:{width:"24px",flex:"none","border-radius":"0"},title:"Text Color"},null,8,["modelValue","disabled"]),Ge(f("input",{"onUpdate:modelValue":_[83]||(_[83]=Z=>z.value=Z),onChange:j,type:"text",class:"form-control form-control-sm",style:{"font-size":"0.65rem"}},null,544),[[Ut,z.value]])])])])])]),f("div",pD,[f("div",vD,[_[132]||(_[132]=f("h6",{class:"property-group-title"},"Text Size and Options",-1)),f("div",mD,[_[126]||(_[126]=f("label",{class:"form-label small mb-1"},"Default Text Size",-1)),Ee(lt,{"model-value":F.value,onChange:kn,min:1,max:9,step:1,title:"Default text size for all labels"},null,8,["model-value"])]),f("div",gD,[f("div",bD,[_[127]||(_[127]=f("label",{class:"form-label small mb-0"},"Per-Label Text Size",-1)),f("button",{onClick:Xt,class:"btn btn-xs btn-outline-secondary clear-labels-btn",disabled:i.value,title:"Clear all text sizes"}," Clear all ",8,yD)]),f("div",wD,[f("div",xD,[Ee(lt,{"model-value":T.value[0],onChange:_[84]||(_[84]=Z=>Wt(0,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Top Left (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",DD,[Ee(lt,{"model-value":T.value[1],onChange:_[85]||(_[85]=Z=>Wt(1,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Top Center (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",_D,[Ee(lt,{"model-value":T.value[2],onChange:_[86]||(_[86]=Z=>Wt(2,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Top Right (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",CD,[Ee(lt,{"model-value":T.value[3],onChange:_[87]||(_[87]=Z=>Wt(3,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Center Left (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",ED,[Ee(lt,{"model-value":T.value[4],onChange:_[88]||(_[88]=Z=>Wt(4,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Center (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",AD,[Ee(lt,{"model-value":T.value[5],onChange:_[89]||(_[89]=Z=>Wt(5,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Center Right (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",SD,[Ee(lt,{"model-value":T.value[6],onChange:_[90]||(_[90]=Z=>Wt(6,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Bottom Left (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",FD,[Ee(lt,{"model-value":T.value[7],onChange:_[91]||(_[91]=Z=>Wt(7,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Bottom Center (default: ${F.value})`},null,8,["model-value","reference-value","title"])]),f("div",kD,[Ee(lt,{"model-value":T.value[8],onChange:_[92]||(_[92]=Z=>Wt(8,Z)),min:1,max:9,step:1,"value-on-clear":null,"reference-value":F.value,size:"compact",title:`Text size for Bottom Right (default: ${F.value})`},null,8,["model-value","reference-value","title"])])])]),f("div",MD,[_[131]||(_[131]=f("label",{class:"form-label small mb-1"},"Options",-1)),f("div",TD,[f("div",$D,[f("div",LD,[Ge(f("input",{"onUpdate:modelValue":_[93]||(_[93]=Z=>te.value=Z),onChange:ce,type:"checkbox",class:"form-check-input",id:"ghostCheck"},null,544),[[Jo,te.value]]),_[128]||(_[128]=f("label",{class:"form-check-label small",for:"ghostCheck"},"Ghost",-1))]),f("div",ID,[Ge(f("input",{"onUpdate:modelValue":_[94]||(_[94]=Z=>H.value=Z),onChange:fe,type:"checkbox",class:"form-check-input",id:"steppedCheck",disabled:l.value},null,40,OD),[[Jo,H.value]]),f("label",{class:vt(["form-check-label small",{"text-muted":l.value}]),for:"steppedCheck"},"Step",2)])]),f("div",RD,[f("div",PD,[Ge(f("input",{"onUpdate:modelValue":_[95]||(_[95]=Z=>Q.value=Z),onChange:Te,type:"checkbox",class:"form-check-input",id:"nubCheck"},null,544),[[Jo,Q.value]]),_[129]||(_[129]=f("label",{class:"form-check-label small",for:"nubCheck"},"Home",-1))]),f("div",BD,[Ge(f("input",{"onUpdate:modelValue":_[96]||(_[96]=Z=>W.value=Z),onChange:Se,type:"checkbox",class:"form-check-input",id:"decalCheck"},null,544),[[Jo,W.value]]),_[130]||(_[130]=f("label",{class:"form-check-label small",for:"decalCheck"},"Decal",-1))])])])])])])])],10,qw)])]))}}),VD=St(ND,[["__scopeId","data-v-82a066ca"]]),KD=At({__name:"CssHelpModal",props:{isVisible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,o=e,i=()=>{o("close")},s=r=>{r.key==="Escape"&&i()};return at(()=>n.isVisible,r=>{r?(document.addEventListener("keydown",s),document.body.classList.add("modal-open")):(document.removeEventListener("keydown",s),document.body.classList.remove("modal-open"))}),Qt(()=>{n.isVisible&&(document.addEventListener("keydown",s),document.body.classList.add("modal-open"))}),an(()=>{document.removeEventListener("keydown",s),document.body.classList.remove("modal-open")}),(r,l)=>r.isVisible?(ae(),pe("div",{key:0,class:"modal fade show d-block",tabindex:"-1",onClick:pt(i,["self"])},[f("div",{class:"modal-dialog modal-help"},[f("div",{class:"modal-content"},[f("div",{class:"modal-header"},[l[0]||(l[0]=f("h5",{class:"modal-title"},[f("i",{class:"bi bi-question-circle"}),$e(" CSS Metadata - Help ")],-1)),f("button",{type:"button",class:"btn-close",onClick:i,"aria-label":"Close"})]),l[1]||(l[1]=Fs('<div class="modal-body scrollable-content" data-v-c4914a45><div class="help-section" data-v-c4914a45><h6 class="help-section-title" data-v-c4914a45><i class="bi bi-info-circle" data-v-c4914a45></i> What is CSS Metadata? </h6><div class="help-content" data-v-c4914a45><p data-v-c4914a45> The original <a href="https://www.keyboard-layout-editor.com/" target="_blank" data-v-c4914a45>Keyboard Layout Editor</a> provided <a href="https://github.com/ijprest/keyboard-layout-editor/wiki/Custom-Styles" target="_blank" data-v-c4914a45>fine-grained</a> control over keyboard CSS style via <code data-v-c4914a45>css</code> metadata field defined in a layout. </p><p data-v-c4914a45> When you import a KLE layout, kle-ng displays that metadata value in this field. </p></div></div><div class="help-section" data-v-c4914a45><h6 class="help-section-title" data-v-c4914a45><i class="bi bi-lightbulb" data-v-c4914a45></i> Supported CSS Features </h6><div class="help-content" data-v-c4914a45><p data-v-c4914a45>The kle-ng supports only a minimal subset of CSS:</p><ol data-v-c4914a45><li data-v-c4914a45><code data-v-c4914a45>@import url(...);</code> - Loads external font stylesheet (e.g., Google Fonts) </li></ol><p data-v-c4914a45> The font name is automatically extracted from the URL and applied globally to all canvas text. It is not possible to define different fonts for different key labels. </p><p data-v-c4914a45>All other CSS expressions are ignored and have no effect.</p></div></div></div>',1)),f("div",{class:"modal-footer"},[f("button",{type:"button",class:"btn btn-primary",onClick:i},"Got it!")])])])])):Ke("",!0)}}),zD=St(KD,[["__scopeId","data-v-c4914a45"]]),UD="/via-layout-example.png",HD=At({__name:"ViaHelpModal",props:{isVisible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,o=e,i=()=>{o("close")},s=r=>{r.key==="Escape"&&i()};return at(()=>n.isVisible,r=>{r?(document.addEventListener("keydown",s),document.body.classList.add("modal-open")):(document.removeEventListener("keydown",s),document.body.classList.remove("modal-open"))}),Qt(()=>{n.isVisible&&(document.addEventListener("keydown",s),document.body.classList.add("modal-open"))}),an(()=>{document.removeEventListener("keydown",s),document.body.classList.remove("modal-open")}),(r,l)=>r.isVisible?(ae(),pe("div",{key:0,class:"modal fade show d-block",tabindex:"-1",onClick:pt(i,["self"])},[f("div",{class:"modal-dialog modal-help"},[f("div",{class:"modal-content"},[f("div",{class:"modal-header"},[l[0]||(l[0]=f("h5",{class:"modal-title"},[f("i",{class:"bi bi-question-circle"}),$e(" VIA Metadata - Help ")],-1)),f("button",{type:"button",class:"btn-close",onClick:i,"aria-label":"Close"})]),l[1]||(l[1]=Fs('<div class="modal-body scrollable-content" data-v-b8334a2c><div class="help-section" data-v-b8334a2c><h6 class="help-section-title" data-v-b8334a2c><i class="bi bi-info-circle" data-v-b8334a2c></i> What is VIA Metadata? </h6><div class="help-content" data-v-b8334a2c><img align="right" src="'+UD+'" data-v-b8334a2c><p data-v-b8334a2c><a href="https://www.caniusevia.com/" target="_blank" data-v-b8334a2c>VIA</a> and <a href="https://get.vial.today/" target="_blank" data-v-b8334a2c>Vial</a> are keyboard configuration tools that use a special JSON format. VIA format wraps KLE layout data with additional metadata like keyboard name, vendor/product IDs, and matrix configuration. </p><p data-v-b8334a2c> It also uses special label format which maps physical arrangment of keys to the switch matrix co-ordinates. To learn more visit <a href="https://www.caniusevia.com/docs/layouts" target="_blank" data-v-b8334a2c> VIA specification</a>. </p><p data-v-b8334a2c> When you import a VIA file, kle-ng converts it to KLE format and preserves the VIA-specific metadata in this field. This allows you to edit the layout and export it back to VIA format later. </p></div></div><div class="help-section" data-v-b8334a2c><h6 class="help-section-title" data-v-b8334a2c><i class="bi bi-box-arrow-in-down" data-v-b8334a2c></i> Importing VIA Layouts </h6><div class="help-content" data-v-b8334a2c><p data-v-b8334a2c> To import a VIA layout file (e.g., from the <a href="https://github.com/the-via/keyboards" target="_blank" data-v-b8334a2c>VIA keyboards repository</a>): </p><ol data-v-b8334a2c><li data-v-b8334a2c>Click the <strong data-v-b8334a2c>Import</strong> button in the toolbar</li><li data-v-b8334a2c>Select a VIA JSON file</li><li data-v-b8334a2c>The layout will be displayed and VIA metadata will appear in this field</li></ol></div></div><div class="help-section" data-v-b8334a2c><h6 class="help-section-title" data-v-b8334a2c><i class="bi bi-box-arrow-up" data-v-b8334a2c></i> Exporting to VIA Format </h6><div class="help-content" data-v-b8334a2c><p data-v-b8334a2c> Layouts that contain VIA metadata can be exported back to VIA format for use with VIA/Vial configurators: </p><ol data-v-b8334a2c><li data-v-b8334a2c>Click the <strong data-v-b8334a2c>Export</strong> button in the toolbar</li><li data-v-b8334a2c>Select <strong data-v-b8334a2c>Download VIA JSON</strong></li><li data-v-b8334a2c>The file will contain your edited layout in VIA format</li></ol><p class="text-muted" data-v-b8334a2c><small data-v-b8334a2c>Note: The &quot;Download VIA JSON&quot; option is only available when VIA metadata is present.</small></p></div></div><div class="help-section" data-v-b8334a2c><h6 class="help-section-title" data-v-b8334a2c><i class="bi bi-code-square" data-v-b8334a2c></i> Editing VIA Metadata </h6><div class="help-content" data-v-b8334a2c><p data-v-b8334a2c> The VIA metadata is stored as JSON. The editor validates your input in real-time. Invalid JSON will be highlighted with an error indicator. </p><div class="warning-box" data-v-b8334a2c><div class="d-flex align-items-start gap-2" data-v-b8334a2c><i class="bi bi-exclamation-triangle-fill text-warning flex-shrink-0" data-v-b8334a2c></i><div data-v-b8334a2c><small data-v-b8334a2c> kle-ng does not validate the <b data-v-b8334a2c>content</b> of JSON. It is your responsibility to maintain VIA format convention as defined in the <a href="https://www.caniusevia.com/docs/specification" target="_blank" data-v-b8334a2c>VIA specification</a>. </small></div></div></div></div></div><div class="help-section" data-v-b8334a2c><h6 class="help-section-title" data-v-b8334a2c><i class="bi bi-lightbulb" data-v-b8334a2c></i> Tips </h6><div class="help-content" data-v-b8334a2c><ul class="tips-list" data-v-b8334a2c><li data-v-b8334a2c>Clearing the field will remove all VIA metadata from the layout</li><li data-v-b8334a2c> VIA metadata is preserved when exporting to KLE format (in a compressed <code data-v-b8334a2c>_kleng_via_data</code> field) </li><li data-v-b8334a2c>You can manually edit the metadata to customize keyboard information</li></ul></div></div></div>',1)),f("div",{class:"modal-footer"},[f("button",{type:"button",class:"btn btn-primary",onClick:i},"Got it!")])])])])):Ke("",!0)}}),jD=St(HD,[["__scopeId","data-v-b8334a2c"]]),WD={class:"keyboard-metadata-panel"},qD={class:"row g-3"},YD={class:"col-lg-6 col-md-12"},XD={class:"property-group h-100"},JD={class:"row g-3"},GD={class:"col-md-6"},ZD={class:"mb-3"},QD={class:"mb-3"},e_={class:"mb-3"},t_={class:"input-group input-group-sm"},n_={class:"mb-3"},o_={class:"col-md-6"},s_={class:"h-100 d-flex flex-column"},i_={class:"mb-2"},r_={class:"flex-grow-1 d-flex flex-column"},l_={class:"col-lg-6 col-md-12"},a_={class:"property-group h-100 d-flex flex-column"},u_={class:"d-flex justify-content-between align-items-center mb-2"},c_={class:"d-flex align-items-center gap-2"},d_={key:0,class:"text-danger small"},f_={key:1,class:"text-success small"},h_={key:0,class:"invalid-feedback d-block mt-1"},p_=At({__name:"KeyboardMetadataPanel",setup(t){const e=An(),n=Li(),o=Y(!1),i=Y(!1),s=()=>{o.value=!0},r=()=>{o.value=!1},l=()=>{i.value=!0},a=()=>{i.value=!1},d=Y(""),h=Y(""),c=Y(""),p=Y(""),m=Y("#ffffff"),g=Y(""),D=Y(""),T=Y(!1),y=Y(""),C=()=>{try{const z=e.metadata;if(z._kleng_via_data){const F=ri.decompressFromBase64(z._kleng_via_data);F?D.value=JSON.stringify(JSON.parse(F),null,2):D.value=""}else D.value=""}catch(z){console.error("Error parsing VIA metadata:",z),D.value=""}},M=()=>{try{return D.value.trim()?(JSON.parse(D.value),T.value=!1,y.value="",!0):(T.value=!1,y.value="",!0)}catch(z){return T.value=!0,y.value=z instanceof Error?z.message:"Invalid JSON format",!1}},E=()=>{if(M())try{const z=e.metadata;if(!D.value.trim()){delete z._kleng_via_data,e.saveState();return}const F=ri.compressToBase64(D.value);z._kleng_via_data=F,e.saveState()}catch(z){console.error("Error saving VIA metadata:",z)}},R=()=>{const z=e.metadata;d.value=z.name||"",h.value=z.author||"",c.value=z.notes||"",p.value=z.css||"",m.value=z.backcolor||"#ffffff",g.value=z.radii||"",C()};at(()=>e.metadata,()=>{R()},{deep:!0,immediate:!0});const L=(z,F)=>{e.metadata[z]=F,e.saveState()},B=()=>{e.metadata.css=p.value,e.saveState()},x=()=>{e.metadata.css=p.value,e.saveState(),n.applyFromCssMetadata(p.value,!0)},I=()=>{e.metadata={...e.metadata,backcolor:m.value}},N=()=>{e.metadata={...e.metadata,backcolor:m.value},e.saveState()};return(z,F)=>(ae(),pe("div",WD,[f("div",qD,[f("div",YD,[f("div",XD,[F[19]||(F[19]=f("h6",{class:"property-group-title"},"Keyboard Metadata",-1)),f("div",JD,[f("div",GD,[f("div",ZD,[F[12]||(F[12]=f("label",{class:"form-label small mb-1"},"Name",-1)),Ge(f("input",{"onUpdate:modelValue":F[0]||(F[0]=te=>d.value=te),onInput:F[1]||(F[1]=te=>L("name",d.value)),type:"text",class:"form-control form-control-sm",placeholder:"My Keyboard Layout"},null,544),[[Ut,d.value]])]),f("div",QD,[F[13]||(F[13]=f("label",{class:"form-label small mb-1"},"Author",-1)),Ge(f("input",{"onUpdate:modelValue":F[2]||(F[2]=te=>h.value=te),onInput:F[3]||(F[3]=te=>L("author",h.value)),type:"text",class:"form-control form-control-sm",placeholder:"Your Name"},null,544),[[Ut,h.value]])]),f("div",e_,[F[14]||(F[14]=f("label",{class:"form-label small mb-1"},"Background Color",-1)),f("div",t_,[Ee(wn,{modelValue:m.value,"onUpdate:modelValue":F[4]||(F[4]=te=>m.value=te),onChange:N,onInput:I,class:"form-control form-control-color key-color-input",style:{width:"24px",flex:"none","border-radius":"0"},title:"Background Color"},null,8,["modelValue"]),Ge(f("input",{"onUpdate:modelValue":F[5]||(F[5]=te=>m.value=te),onChange:N,type:"text",class:"form-control form-control-sm",style:{"font-size":"0.65rem"}},null,544),[[Ut,m.value]])])]),f("div",n_,[F[15]||(F[15]=f("label",{class:"form-label small mb-1"},"Border Radii",-1)),Ge(f("input",{"onUpdate:modelValue":F[6]||(F[6]=te=>g.value=te),onInput:F[7]||(F[7]=te=>L("radii",g.value)),type:"text",class:"form-control form-control-sm",placeholder:"6px (default)",title:"CSS border-radius (e.g., '10px', '5px 10px', '10px 20px 30px 40px', '10px / 20px'). Defaults to 6px when empty. Supports separate corners and elliptical radii. Affects both canvas display and PNG export."},null,544),[[Ut,g.value]])])]),f("div",o_,[f("div",s_,[f("div",i_,[F[16]||(F[16]=f("label",{class:"form-label small mb-1"},"Notes",-1)),Ge(f("textarea",{"onUpdate:modelValue":F[8]||(F[8]=te=>c.value=te),onInput:F[9]||(F[9]=te=>L("notes",c.value)),class:"form-control form-control-sm",placeholder:"Add notes about your keyboard layout...",style:{"min-height":"60px",resize:"none"}},null,544),[[Ut,c.value]])]),f("div",r_,[f("div",{class:"d-flex justify-content-between"},[F[18]||(F[18]=f("label",{class:"form-label small mb-1"},"CSS",-1)),f("button",{onClick:s,class:"btn btn-sm btn-outline-secondary css-help-btn",title:"Help"},[...F[17]||(F[17]=[f("i",{class:"bi bi-question-circle"},null,-1)])])]),Ge(f("textarea",{"onUpdate:modelValue":F[10]||(F[10]=te=>p.value=te),onInput:B,onBlur:x,class:"form-control form-control-sm font-monospace flex-grow-1",placeholder:"Custom CSS (only fonts impact render, see help)...",style:{"min-height":"0",resize:"none","font-size":"0.65rem"},spellcheck:"false"},null,544),[[Ut,p.value]])])])])])])]),f("div",l_,[f("div",a_,[f("div",u_,[F[23]||(F[23]=f("h6",{class:"property-group-title mb-0"},"VIA Metadata",-1)),f("div",c_,[T.value?(ae(),pe("div",d_,[...F[20]||(F[20]=[f("i",{class:"bi bi-exclamation-triangle"},null,-1),$e(" Invalid JSON ",-1)])])):D.value.trim()?(ae(),pe("div",f_,[...F[21]||(F[21]=[f("i",{class:"bi bi-check"},null,-1),$e(" Valid JSON ",-1)])])):Ke("",!0),f("button",{onClick:l,class:"btn btn-sm btn-outline-secondary help-btn",title:"Help"},[...F[22]||(F[22]=[f("i",{class:"bi bi-question-circle"},null,-1)])])])]),Ge(f("textarea",{"onUpdate:modelValue":F[11]||(F[11]=te=>D.value=te),onInput:E,class:vt(["form-control form-control-sm flex-grow-1 font-monospace",{"is-invalid":T.value}]),placeholder:"VIA metadata JSON...",spellcheck:"false",style:{"min-height":"0",resize:"none","font-size":"0.65rem"}},null,34),[[Ut,D.value]]),T.value?(ae(),pe("div",h_,Ve(y.value),1)):Ke("",!0)])])]),Ee(zD,{"is-visible":o.value,onClose:r},null,8,["is-visible"]),Ee(jD,{"is-visible":i.value,onClose:a},null,8,["is-visible"])]))}}),v_=St(p_,[["__scopeId","data-v-75b22336"]]),m_={class:"summary-panel"},g_={class:"row g-3 h-100"},b_={class:"col-md-6 col-lg-4"},y_={key:0,class:"table-section"},w_={class:"d-flex justify-content-between align-items-center mb-3"},x_={class:"btn-group",role:"group","aria-label":"Summary view mode"},D_={class:"table-container"},__={class:"table table-sm table-striped mb-0"},C_={class:"small align-middle"},E_={class:"text-end small align-middle"},A_={class:"table-active border-top"},S_={class:"text-end small align-middle"},F_={key:0,class:"table-active border-top"},k_={class:"text-end small align-middle"},M_={key:1,class:"table-active border-top"},T_={class:"text-end small align-middle"},$_={key:1,class:"table-section"},L_={class:"d-flex justify-content-between align-items-center mb-3"},I_={class:"btn-group",role:"group","aria-label":"Summary view mode"},O_={class:"table-container"},R_={class:"table table-sm table-striped mb-0"},P_={class:"small align-middle"},B_={class:"small align-middle"},N_={class:"d-flex align-items-center gap-2"},V_=["title"],K_={class:"color-code"},z_={class:"text-end small align-middle"},U_={class:"table-active border-top"},H_={class:"text-end small align-middle"},j_={key:0,class:"table-active border-top"},W_={class:"text-end small align-middle"},q_={key:1,class:"table-active border-top"},Y_={class:"text-end small align-middle"},X_=At({__name:"SummaryPanel",setup(t){const e=An(),n=Y("size"),o=Oe(()=>e.keys.length),i=Oe(()=>e.keys.filter(h=>!h.decal).length),s=Oe(()=>e.keys.filter(h=>h.decal).length),r=h=>{const c=h.width||1,p=h.height||1,m=h.width2,g=h.height2,D=h.x2,T=h.y2;if(c===1.25&&p===2&&m===1.5&&g===1&&D===-.25&&T===0)return"ISO Enter";if(c===1.5&&p===2&&m===2.25&&g===1&&D===-.75&&T===1)return"Big-Ass Enter";const y=h.stepped===!0,C=!y&&(c!==(m||c)||p!==(g||p)||D!==void 0&&D!==0||T!==void 0&&T!==0);if(y){const M=c===p?`${c} × ${c}`:`${c} × ${p}`,E=(m||c)===(g||p)?`${m||c} × ${m||c}`:`${m||c} × ${g||p}`;return M===E?`${M} (stepped)`:`${M}+${E} (stepped)`}if(C){const M=c===p?`${c} × ${c}`:`${c} × ${p}`,E=(m||c)===(g||p)?`${m||c} × ${m||c}`:`${m||c} × ${g||p}`;return M===E?`${M} (non-rectangular)`:`${M}+${E} (non-rectangular)`}return c===p?`${c} × ${c}`:`${c} × ${p}`},l=h=>h.color||"#cccccc",a=Oe(()=>{const h=new Map,c=new Map;e.keys.forEach(m=>{const g=r(m);m.decal?c.set(g,(c.get(g)||0)+1):h.set(g,(h.get(g)||0)+1)});const p=[];for(const[m,g]of h.entries())p.push({size:m,count:g,isDecal:!1});if(s.value>0)for(const[m,g]of c.entries())p.push({size:`${m} (decal)`,count:g,isDecal:!0});return p.sort((m,g)=>m.count!==g.count?g.count-m.count:m.isDecal!==g.isDecal?m.isDecal?1:-1:m.size.localeCompare(g.size))}),d=Oe(()=>{const h=new Map,c=new Map;e.keys.forEach(m=>{const g=r(m),D=l(m),T=`${g}|||${D}`;m.decal?c.set(T,(c.get(T)||0)+1):h.set(T,(h.get(T)||0)+1)});const p=[];for(const[m,g]of h.entries()){const[D,T]=m.split("|||");p.push({size:D,color:T,count:g,isDecal:!1})}if(s.value>0)for(const[m,g]of c.entries()){const[D,T]=m.split("|||");p.push({size:`${D} (decal)`,color:T,count:g,isDecal:!0})}return p.sort((m,g)=>m.count!==g.count?g.count-m.count:m.isDecal!==g.isDecal?m.isDecal?1:-1:m.size!==g.size?m.size.localeCompare(g.size):m.color.localeCompare(g.color))});return(h,c)=>(ae(),pe("div",m_,[f("div",g_,[f("div",b_,[n.value==="size"?(ae(),pe("div",y_,[f("div",w_,[c[6]||(c[6]=f("h6",{class:"section-title mb-0"},"Keys by Size",-1)),f("div",x_,[Ge(f("input",{type:"radio",class:"btn-check",id:"view-size",value:"size","onUpdate:modelValue":c[0]||(c[0]=p=>n.value=p),autocomplete:"off"},null,512),[[qn,n.value]]),c[4]||(c[4]=f("label",{class:"btn btn-outline-primary btn-sm",for:"view-size"},"By Size",-1)),Ge(f("input",{type:"radio",class:"btn-check",id:"view-size-color",value:"size-color","onUpdate:modelValue":c[1]||(c[1]=p=>n.value=p),autocomplete:"off"},null,512),[[qn,n.value]]),c[5]||(c[5]=f("label",{class:"btn btn-outline-primary btn-sm",for:"view-size-color"},"By Size & Color",-1))])]),f("div",D_,[f("table",__,[c[10]||(c[10]=f("thead",{class:"table-light"},[f("tr",null,[f("th",{class:"fw-semibold small border-top-0"},"Size (U)"),f("th",{class:"text-end fw-semibold small border-top-0"},"Count")])],-1)),f("tbody",null,[(ae(!0),pe(xt,null,En(a.value,p=>(ae(),pe("tr",{key:p.size},[f("td",C_,Ve(p.size),1),f("td",E_,Ve(p.count),1)]))),128)),f("tr",A_,[c[7]||(c[7]=f("td",{class:"small align-middle"},[f("strong",null,"Total Keys")],-1)),f("td",S_,[f("strong",null,Ve(o.value),1)])]),s.value>0?(ae(),pe("tr",F_,[c[8]||(c[8]=f("td",{class:"small align-middle"},[f("strong",null,"Regular Keys")],-1)),f("td",k_,[f("strong",null,Ve(i.value),1)])])):Ke("",!0),s.value>0?(ae(),pe("tr",M_,[c[9]||(c[9]=f("td",{class:"small align-middle"},[f("strong",null,"Decal Keys")],-1)),f("td",T_,[f("strong",null,Ve(s.value),1)])])):Ke("",!0)])])])])):n.value==="size-color"?(ae(),pe("div",$_,[f("div",L_,[c[13]||(c[13]=f("h6",{class:"section-title mb-0"},"Keys by Size & Color",-1)),f("div",I_,[Ge(f("input",{type:"radio",class:"btn-check",id:"view-size-2",value:"size","onUpdate:modelValue":c[2]||(c[2]=p=>n.value=p),autocomplete:"off"},null,512),[[qn,n.value]]),c[11]||(c[11]=f("label",{class:"btn btn-outline-primary btn-sm",for:"view-size-2"},"By Size",-1)),Ge(f("input",{type:"radio",class:"btn-check",id:"view-size-color-2",value:"size-color","onUpdate:modelValue":c[3]||(c[3]=p=>n.value=p),autocomplete:"off"},null,512),[[qn,n.value]]),c[12]||(c[12]=f("label",{class:"btn btn-outline-primary btn-sm",for:"view-size-color-2"},"By Size & Color",-1))])]),f("div",O_,[f("table",R_,[c[20]||(c[20]=f("thead",{class:"table-light"},[f("tr",null,[f("th",{class:"fw-semibold small border-top-0"},"Size (U)"),f("th",{class:"fw-semibold small border-top-0"},"Color"),f("th",{class:"text-end fw-semibold small border-top-0"},"Count")])],-1)),f("tbody",null,[(ae(!0),pe(xt,null,En(d.value,p=>(ae(),pe("tr",{key:`${p.size}-${p.color}`},[f("td",P_,Ve(p.size),1),f("td",B_,[f("div",N_,[f("div",{class:"color-swatch",style:en({backgroundColor:p.color}),title:p.color},null,12,V_),f("code",K_,Ve(p.color),1)])]),f("td",z_,Ve(p.count),1)]))),128)),f("tr",U_,[c[14]||(c[14]=f("td",{class:"small align-middle"},[f("strong",null,"Total Keys")],-1)),c[15]||(c[15]=f("td",{class:"small align-middle"},null,-1)),f("td",H_,[f("strong",null,Ve(o.value),1)])]),s.value>0?(ae(),pe("tr",j_,[c[16]||(c[16]=f("td",{class:"small align-middle"},[f("strong",null,"Regular Keys")],-1)),c[17]||(c[17]=f("td",{class:"small align-middle"},null,-1)),f("td",W_,[f("strong",null,Ve(i.value),1)])])):Ke("",!0),s.value>0?(ae(),pe("tr",q_,[c[18]||(c[18]=f("td",{class:"small align-middle"},[f("strong",null,"Decal Keys")],-1)),c[19]||(c[19]=f("td",{class:"small align-middle"},null,-1)),f("td",Y_,[f("strong",null,Ve(s.value),1)])])):Ke("",!0)])])])])):Ke("",!0)])])]))}}),J_=St(X_,[["__scopeId","data-v-84c6c249"]]),G_=["disabled"],Z_={class:"mb-2"},Q_={class:"d-flex justify-content-between align-items-center"},eC={key:0,class:"text-danger small"},tC={key:1,class:"text-warning small"},nC={key:2,class:"text-success small"},oC={class:"d-flex gap-2"},sC=["disabled"],iC=["disabled"],rC={class:"position-relative"},lC={key:0,class:"invalid-feedback d-block"},aC=At({__name:"JsonEditorPanel",setup(t){const e=An(),n=Y(""),o=Y(""),i=Y(!1),s=Y(""),r=y=>{const C=[];return y.forEach(M=>{C.push(l(M))}),"["+C.join(`,
`)+"]"},l=y=>{if(Array.isArray(y))return"["+y.map(M=>l(M)).join(",")+"]";if(typeof y=="object"&&y!==null){const C=[],M=y;for(const E in M)if(Object.prototype.hasOwnProperty.call(M,E)){const R=M[E];R!==void 0&&C.push(`${JSON.stringify(E)}:${l(R)}`)}return"{"+C.join(",")+"}"}return typeof y=="number"?S.format(y,6).toString():JSON.stringify(y)},a=()=>{try{return Oi(n.value),i.value=!1,s.value="",!0}catch(y){return i.value=!0,s.value=y instanceof Error?y.message:"Invalid JSON format",!1}},d=()=>{a()},h=()=>{if(a())try{const y=Oi(n.value);Array.isArray(y)?n.value=r(y):n.value=JSON.stringify(y,null,2)}catch(y){console.error("Error formatting JSON:",y)}},c=Oe(()=>n.value!==o.value&&!i.value),p=Oe(()=>e.canvasMode==="rotate"||e.canvasMode==="mirror-h"||e.canvasMode==="mirror-v"),m=()=>{try{const y=e.getSerializedData("kle"),C=Array.isArray(y)?r(y):JSON.stringify(y,null,2);n.value=C,o.value=C,i.value=!1,s.value=""}catch(y){console.error("Error loading JSON from store:",y),s.value="Error loading layout data",i.value=!0}};at([()=>e.keys,()=>e.metadata],()=>{m()},{deep:!0}),m();const g=()=>{if(a())try{const y=Oi(n.value);e.updateLayoutFromJson(y),Array.isArray(y)?(o.value=r(y),n.value=o.value):o.value=n.value,console.log("Applied JSON changes to keyboard layout (with undo support)")}catch(y){console.error("Error applying JSON changes:",y),s.value=y instanceof Error?y.message:"Error applying changes",i.value=!0}},D=y=>{(y.ctrlKey||y.metaKey)&&y.key==="Enter"&&(y.preventDefault(),g())};je(()=>{document.addEventListener("keydown",D)});const T=()=>{document.removeEventListener("keydown",D)};return Qt(()=>T),(y,C)=>(ae(),pe("fieldset",{disabled:p.value,class:vt({"opacity-50":p.value})},[f("div",Z_,[f("div",Q_,[C[4]||(C[4]=f("small",{class:"text-muted"}," Edit the JSON directly ",-1)),i.value?(ae(),pe("div",eC,[...C[1]||(C[1]=[f("i",{class:"bi bi-exclamation-triangle"},null,-1),$e(" Invalid JSON ",-1)])])):c.value?(ae(),pe("div",tC,[...C[2]||(C[2]=[f("i",{class:"bi bi-pencil"},null,-1),$e(" Unsaved changes ",-1)])])):(ae(),pe("div",nC,[...C[3]||(C[3]=[f("i",{class:"bi bi-check"},null,-1),$e(" Valid JSON",-1)])])),f("div",oC,[f("button",{onClick:h,class:"btn btn-outline-secondary btn-sm",disabled:i.value||p.value}," Format ",8,sC),f("button",{onClick:g,class:"btn btn-primary btn-sm",disabled:i.value||p.value}," Apply Changes ",8,iC)])])]),f("div",rC,[Ge(f("textarea",{"onUpdate:modelValue":C[0]||(C[0]=M=>n.value=M),onInput:d,class:vt(["form-control font-monospace",{"is-invalid":i.value}]),rows:"20",spellcheck:"false",placeholder:"Loading JSON..."},null,34),[[Ut,n.value]]),i.value?(ae(),pe("div",lC,Ve(s.value),1)):Ke("",!0)]),C[5]||(C[5]=f("div",{class:"mt-2"},[f("small",{class:"text-muted"},[$e(" This editor supports the "),f("a",{href:"https://github.com/ijprest/keyboard-layout-editor/wiki/Serialized-Data-Format",target:"_blank",class:"text-decoration-none"}," KLE JSON format"),$e('. JSON is validated automatically as you type. Changes are applied when you click "Apply Changes" or use Ctrl+Enter. ')])],-1))],10,G_))}}),uC=St(aC,[["__scopeId","data-v-1319a165"]]),cC="0.16.0",dC={version:cC},fC={id:"footer",class:"app-footer py-4 mt-auto border-top"},hC={class:"container"},pC={class:"row"},vC={class:"col-md-6"},mC=["href","title"],gC=At({__name:"AppFooter",setup(t){const e=dC.version,n=Oe(()=>`https://github.com/adamws/kle-ng/releases/tag/v${e}`);return(o,i)=>(ae(),pe("footer",fC,[f("div",hC,[f("div",pC,[f("div",vC,[f("div",null,[i[0]||(i[0]=f("strong",null,"Keyboard Layout Editor NG",-1)),f("a",{href:n.value,target:"_blank",class:"text-decoration-none",title:`View release v${Ue(e)} on GitHub`}," v"+Ve(Ue(e)),9,mC)]),i[1]||(i[1]=$e(" Successor of ",-1)),i[2]||(i[2]=f("a",{href:"https://www.keyboard-layout-editor.com/",target:"_blank",class:"text-decoration-none"},"Keyboard Layout Editor ",-1))]),i[3]||(i[3]=f("div",{class:"col-md-6 text-end"},[f("div",{class:"footer-links"},[f("a",{href:"https://github.com/adamws/kle-ng",target:"_blank",class:"text-decoration-none"}," Project GitHub"),f("br"),f("a",{href:"https://github.com/adamws/kle-ng/issues",target:"_blank",class:"text-decoration-none"}," Report Issues"),f("br")])],-1))])])]))}}),bC=St(gC,[["__scopeId","data-v-c6a3a2df"]]),yC=[{name:"ISO Enter",description:"Standard ISO layout Enter key",data:{width:1.25,height:2,width2:1.5,height2:1,x2:-.25,y2:0,labels:["","","","","Enter"]}},{name:"Big-Ass Enter",description:"Large ANSI-style Enter key",data:{width:1.5,height:2,width2:2.25,height2:1,x2:-.75,y2:1,labels:["","","","","Enter"]}}],wC={class:"panel-content"},xC={class:"panel-body"},DC={class:"tool-tabs mb-3"},_C={class:"btn-group w-100",role:"group"},CC={key:0,class:"tool-content"},EC={class:"mb-3"},AC={class:"row g-2"},SC=["onClick","title"],FC={key:1,class:"tool-content"},kC={class:"text-center mb-3"},MC={class:"keycap-preview"},TC={class:"keylabels"},$C=["onClick","title","innerHTML"],LC={key:2,class:"tool-content"},IC={class:"row"},OC={class:"col-5"},RC={class:"keycap-selector"},PC={class:"keylabels"},BC=["id","value"],NC=["for"],VC={class:"col-2 d-flex align-items-center justify-content-center"},KC=["disabled"],zC={class:"col-5"},UC={class:"keycap-selector"},HC={class:"keylabels"},jC=["id","value"],WC=["for"],qC={class:"status-info mt-3"},YC={class:"d-flex align-items-center gap-2"},XC={class:"text-muted mb-0"},JC=At({__name:"LegendToolsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,o=e,i=An(),s=Y("remove"),r=Y(null),l=Y(null),{position:a,panelRef:d,handleMouseDown:h,handleHeaderMouseDown:c,initializePosition:p}=Ji({defaultPosition:{x:100,y:100},headerHeight:45}),m=[{id:"all",label:"All",regex:/.*/,tooltip:"Remove all legends from selected keys. Does not affect decals."},{id:"alphas",label:"Alphas",regex:/^[A-Za-z]$/,tooltip:"Remove alphabetical legends (A-Z, a-z) from selected keys."},{id:"numbers",label:"Numbers",regex:/^[0-9]*$/,tooltip:"Remove numeric legends (0-9) from selected keys."},{id:"punctuation",label:"Punctuation",regex:/^[`~!@#$%^&*()_=+\[\]{}|;':",./<>?\\-]+$/,tooltip:"Remove punctuation legends (symbols, special characters) from selected keys."},{id:"function",label:"Function",regex:/F\d\d?/,tooltip:"Remove function key legends (F1, F2, etc.) from selected keys."},{id:"specials",label:"Specials",regex:/<.*>/,tooltip:"Remove special legends (FontAwesome, WebFont, images, etc.) from selected keys."},{id:"others",label:"Others",regex:/^[^A-Za-z0-9`~!@#$%^&*()_=+\[\]{}|;':",./<>?\\-]$|^[A-Za-z\s][A-Za-z\s]+$|&#.*|&.*?;/,tooltip:"Remove other legend types (multi-character text, entities, etc.) from selected keys."},{id:"decals",label:"Decals",regex:/.*/,tooltip:"Remove all legends from decal keys only.",isDecals:!0}],g={hmask:15,hcenter:0,left:1,right:2,vmask:240,vcenter:0,top:16,bottom:32},D=[{label:"↖",flags:g.left|g.top,tooltip:"Align to top-left"},{label:"↑",flags:g.hcenter|g.top,tooltip:"Align to top-center"},{label:"↗",flags:g.right|g.top,tooltip:"Align to top-right"},{label:"←",flags:g.left|g.vcenter,tooltip:"Align to center-left"},{label:"●",flags:g.hcenter|g.vcenter,tooltip:"Align to center"},{label:"→",flags:g.right|g.vcenter,tooltip:"Align to center-right"},{label:"↙",flags:g.left|g.bottom,tooltip:"Align to bottom-left"},{label:"↓",flags:g.hcenter|g.bottom,tooltip:"Align to bottom-center"},{label:"↘",flags:g.right|g.bottom,tooltip:"Align to bottom-right"}],T=[{index:0,label:"TL",description:"Top Left"},{index:1,label:"TC",description:"Top Center"},{index:2,label:"TR",description:"Top Right"},{index:3,label:"CL",description:"Center Left"},{index:4,label:"CC",description:"Center Center"},{index:5,label:"CR",description:"Center Right"},{index:6,label:"BL",description:"Bottom Left"},{index:7,label:"BC",description:"Bottom Center"},{index:8,label:"BR",description:"Bottom Right"},{index:9,label:"FL",description:"Front Left"},{index:10,label:"FC",description:"Front Center"},{index:11,label:"FR",description:"Front Right"}],y=Oe(()=>s.value==="remove"?i.selectedKeys.length>0?i.selectedKeys.length:i.keys.length:i.selectedKeys.length>0?i.selectedKeys.filter(N=>!N.decal).length:i.keys.filter(N=>!N.decal).length),C=Oe(()=>r.value!==null&&l.value!==null&&r.value!==l.value);at(()=>n.visible,async N=>{N&&(p({x:window.innerWidth-420,y:100}),await je())});const M=N=>{const z=i.selectedKeys.length>0?i.selectedKeys:i.keys;i.saveToHistory(),z.forEach(F=>{if(F.decal===!!N.isDecals)for(let te=0;te<12;te++)F.labels[te]&&N.regex.test(F.labels[te])&&(F.labels[te]="",F.textColor&&F.textColor[te]&&(F.textColor[te]=void 0),F.textSize&&F.textSize[te]&&(F.textSize[te]=void 0))}),i.markDirty()},E=(N,z,F)=>{N.labels[z]&&!N.labels[F]&&(N.labels[F]=N.labels[z],N.labels[z]="",N.textColor&&N.textColor[z]&&(N.textColor[F]=N.textColor[z],N.textColor[z]=void 0),N.textSize&&N.textSize[z]&&(N.textSize[F]=N.textSize[z],N.textSize[z]=void 0))},R=(N,z,F,te,H)=>{let Q=!1;switch(z){case g.left:!N.labels[F]&&N.labels[te]&&(E(N,te,F),Q=!0),!N.labels[F]&&N.labels[H]&&(E(N,H,F),Q=!0),!N.labels[F]&&N.labels[te]&&(E(N,te,F),Q=!0);break;case g.right:!N.labels[H]&&N.labels[te]&&(E(N,te,H),Q=!0),!N.labels[H]&&N.labels[F]&&(E(N,F,H),Q=!0),!N.labels[H]&&N.labels[te]&&(E(N,te,H),Q=!0);break;case g.hcenter:N.labels[F]&&!N.labels[te]&&!N.labels[H]&&(E(N,F,te),Q=!0),N.labels[H]&&!N.labels[te]&&!N.labels[F]&&(E(N,H,te),Q=!0);break}return Q},L=N=>{const z=i.selectedKeys.length>0?i.selectedKeys.filter(F=>!F.decal):i.keys.filter(F=>!F.decal);z.length!==0&&(i.saveToHistory(),z.forEach(F=>{let te=!1;for(let H=0;H<12;H+=3)te=R(F,N&g.hmask,H,H+1,H+2)||te;if(N&g.vmask)for(let H=0;H<3;H++)te=R(F,(N&g.vmask)>>4,H,H+3,H+6)||te}),i.markDirty())},B=()=>{if(!C.value)return;const N=i.selectedKeys.length>0?i.selectedKeys.filter(z=>!z.decal):i.keys.filter(z=>!z.decal);N.length!==0&&(i.saveToHistory(),N.forEach(z=>{E(z,r.value,l.value)}),i.markDirty())},x=()=>{o("close")},I=N=>{N.key==="Escape"&&n.visible&&x()};return Qt(()=>{document.addEventListener("keydown",I)}),an(()=>{document.removeEventListener("keydown",I)}),(N,z)=>N.visible?(ae(),pe("div",{key:0,class:"legend-tools-panel",ref_key:"panelRef",ref:d,style:en({transform:`translate(${Ue(a).x}px, ${Ue(a).y}px)`}),onMousedown:z[7]||(z[7]=(...F)=>Ue(h)&&Ue(h)(...F))},[f("div",wC,[f("div",{class:"panel-header",onMousedown:z[1]||(z[1]=(...F)=>Ue(c)&&Ue(c)(...F))},[z[8]||(z[8]=f("div",{class:"panel-title"},[f("i",{class:"bi bi-grip-vertical me-2 drag-handle"}),f("i",{class:"bi bi-wrench me-2"}),$e(" Legend Tools ")],-1)),f("button",{type:"button",class:"btn-close",onClick:x,onMousedown:z[0]||(z[0]=pt(()=>{},["stop"])),"aria-label":"Close"},null,32)],32),f("div",xC,[f("div",DC,[f("div",_C,[Ge(f("input",{type:"radio",class:"btn-check",id:"tab-remove",value:"remove","onUpdate:modelValue":z[2]||(z[2]=F=>s.value=F),autocomplete:"off"},null,512),[[qn,s.value]]),z[9]||(z[9]=f("label",{class:"btn btn-outline-primary btn-sm",for:"tab-remove"},"Remove",-1)),Ge(f("input",{type:"radio",class:"btn-check",id:"tab-align",value:"align","onUpdate:modelValue":z[3]||(z[3]=F=>s.value=F),autocomplete:"off"},null,512),[[qn,s.value]]),z[10]||(z[10]=f("label",{class:"btn btn-outline-primary btn-sm",for:"tab-align"},"Align",-1)),Ge(f("input",{type:"radio",class:"btn-check",id:"tab-move",value:"move","onUpdate:modelValue":z[4]||(z[4]=F=>s.value=F),autocomplete:"off"},null,512),[[qn,s.value]]),z[11]||(z[11]=f("label",{class:"btn btn-outline-primary btn-sm",for:"tab-move"},"Move",-1))])]),s.value==="remove"?(ae(),pe("div",CC,[f("div",EC,[f("div",AC,[(ae(),pe(xt,null,En(m,F=>f("div",{key:F.id,class:"col-6"},[f("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 d-flex align-items-center justify-content-between",onClick:te=>M(F),title:F.tooltip},[f("span",null,Ve(F.label),1),z[12]||(z[12]=f("i",{class:"bi bi-trash"},null,-1))],8,SC)])),64))])])])):Ke("",!0),s.value==="align"?(ae(),pe("div",FC,[f("div",kC,[f("div",MC,[z[13]||(z[13]=f("div",{class:"keyborder"},null,-1)),f("div",TC,[(ae(),pe(xt,null,En(D,(F,te)=>f("div",{key:te,class:vt(["keylabel",`keylabel${te}`])},[f("button",{type:"button",class:"btn btn-sm btn-outline-primary align-btn",onClick:H=>L(F.flags),title:F.tooltip,innerHTML:F.label},null,8,$C)],2)),64))])])]),z[14]||(z[14]=f("div",{class:"small text-muted"},[f("ul",{class:"mb-0"},[f("li",null,"Click an arrow to align legends in that direction"),f("li",null,"Only affects non-decal keys")])],-1))])):Ke("",!0),s.value==="move"?(ae(),pe("div",LC,[f("div",IC,[f("div",OC,[z[16]||(z[16]=f("h6",{class:"fw-bold text-center mb-2",style:{"font-size":"0.9rem",color:"var(--bs-text-primary)"}}," From ",-1)),f("div",RC,[z[15]||(z[15]=f("div",{class:"keyborder"},null,-1)),f("div",PC,[(ae(),pe(xt,null,En(T,F=>f("div",{key:`from-${F.index}`,class:vt(["keylabel",`keylabel${F.index}`])},[Ge(f("input",{type:"radio",id:`from-${F.index}`,value:F.index,"onUpdate:modelValue":z[5]||(z[5]=te=>r.value=te),class:"position-radio"},null,8,BC),[[qn,r.value]]),f("label",{for:`from-${F.index}`,class:"position-label"},Ve(F.label),9,NC)],2)),64))])])]),f("div",VC,[f("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:B,disabled:!C.value,title:"Move legends"},[...z[17]||(z[17]=[f("span",{class:"me-1"},"Move",-1),f("i",{class:"bi bi-arrow-right"},null,-1)])],8,KC)]),f("div",zC,[z[19]||(z[19]=f("h6",{class:"fw-bold text-center mb-2",style:{"font-size":"0.9rem",color:"var(--bs-text-primary)"}}," To ",-1)),f("div",UC,[z[18]||(z[18]=f("div",{class:"keyborder"},null,-1)),f("div",HC,[(ae(),pe(xt,null,En(T,F=>f("div",{key:`to-${F.index}`,class:vt(["keylabel",`keylabel${F.index}`])},[Ge(f("input",{type:"radio",id:`to-${F.index}`,value:F.index,"onUpdate:modelValue":z[6]||(z[6]=te=>l.value=te),class:"position-radio"},null,8,jC),[[qn,l.value]]),f("label",{for:`to-${F.index}`,class:"position-label"},Ve(F.label),9,WC)],2)),64))])])])]),z[20]||(z[20]=f("div",{class:"small text-muted mt-2"},[f("ul",{class:"mb-0"},[f("li",null,"Select source and destination positions"),f("li",null,"Only moves when destination is empty")])],-1))])):Ke("",!0),f("div",qC,[f("div",YC,[f("small",XC,Ve(y.value)+" key(s) will be affected ",1)])])])])],36)):Ke("",!0)}}),GC=St(JC,[["__scopeId","data-v-5d62448d"]]),ZC={class:"panel-content"},QC={class:"panel-body"},e2={class:"info-banner mb-3"},t2={key:0},n2={key:1},o2={class:"controls-section mb-3"},s2={class:"form-check mb-3"},i2={class:"row g-2"},r2={class:"col-6"},l2=["disabled"],a2={class:"col-6"},u2=["disabled"],c2={key:0,class:"small text-muted mt-2"},d2={key:0,class:"preview-section mb-3"},f2={class:"action-buttons"},h2=["disabled"],p2=At({__name:"RotationOriginsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,o=e,i=An(),s=Y(!0),r=Y(0),l=Y(0),a=Y(!1),{position:d,panelRef:h,handleMouseDown:c,handleHeaderMouseDown:p,initializePosition:m}=Ji({defaultPosition:{x:100,y:100},headerHeight:45}),g=Oe(()=>i.selectedKeys.length),D=Oe(()=>g.value>0?i.selectedKeys:i.keys),T=Oe(()=>s.value?!0:r.value!==null&&l.value!==null);at(()=>n.visible,async E=>{E&&(s.value=!0,r.value=0,l.value=0,a.value=!1,m({x:window.innerWidth-420,y:100}),await je())});const y=()=>{T.value&&(s.value?i.moveRotationOriginsToPosition(null,D.value):i.moveRotationOriginsToPosition({x:r.value,y:l.value},D.value),a.value=!1,o("close"))},C=()=>{a.value=!1,o("close")},M=()=>{C()};return(E,R)=>E.visible?(ae(),pe("div",{key:0,class:"rotation-origins-panel",ref_key:"panelRef",ref:h,style:en({transform:`translate(${Ue(d).x}px, ${Ue(d).y}px)`}),onMousedown:R[5]||(R[5]=(...L)=>Ue(c)&&Ue(c)(...L))},[f("div",ZC,[f("div",{class:"panel-header",onMousedown:R[1]||(R[1]=(...L)=>Ue(p)&&Ue(p)(...L))},[R[6]||(R[6]=f("div",{class:"panel-title"},[f("i",{class:"bi bi-grip-vertical me-2 drag-handle"}),f("i",{class:"bi bi-arrow-repeat me-2"}),$e(" Move Rotation Origins ")],-1)),f("button",{type:"button",class:"btn-close",onClick:M,onMousedown:R[0]||(R[0]=pt(()=>{},["stop"])),"aria-label":"Close"},null,32)],32),f("div",QC,[f("div",e2,[R[9]||(R[9]=f("i",{class:"bi bi-info-circle me-2"},null,-1)),g.value===0?(ae(),pe("span",t2,[...R[7]||(R[7]=[$e(" No keys selected - will affect ",-1),f("strong",null,"all keys",-1)])])):(ae(),pe("span",n2,[R[8]||(R[8]=$e(" Will affect ",-1)),f("strong",null,Ve(g.value)+" selected key(s)",1)]))]),f("div",o2,[R[14]||(R[14]=f("h6",{class:"section-title"},"New Rotation Origin Position",-1)),f("div",s2,[Ge(f("input",{class:"form-check-input",type:"checkbox",id:"useKeyCenters","onUpdate:modelValue":R[2]||(R[2]=L=>s.value=L)},null,512),[[Jo,s.value]]),R[10]||(R[10]=f("label",{class:"form-check-label",for:"useKeyCenters"},[$e(" Use key centers "),f("small",{class:"text-muted d-block"}," Automatically calculate center position for each key ")],-1))]),f("div",i2,[f("div",r2,[R[11]||(R[11]=f("label",{class:"form-label small"},"X Position",-1)),Ge(f("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":R[3]||(R[3]=L=>r.value=L),disabled:s.value,step:"0.25",placeholder:"X"},null,8,l2),[[Ut,r.value,void 0,{number:!0}]])]),f("div",a2,[R[12]||(R[12]=f("label",{class:"form-label small"},"Y Position",-1)),Ge(f("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":R[4]||(R[4]=L=>l.value=L),disabled:s.value,step:"0.25",placeholder:"Y"},null,8,u2),[[Ut,l.value,void 0,{number:!0}]])])]),s.value?Ke("",!0):(ae(),pe("div",c2,[...R[13]||(R[13]=[f("i",{class:"bi bi-lightbulb"},null,-1),$e(" Enter coordinates for a shared rotation origin point ",-1)])]))]),a.value?(ae(),pe("div",d2,[...R[15]||(R[15]=[f("div",{class:"preview-indicator"},[f("i",{class:"bi bi-eye me-1"}),$e(" Preview active - rotate keys to see changes ")],-1)])])):Ke("",!0),f("div",f2,[f("button",{type:"button",class:"btn btn-secondary btn-sm flex-fill",onClick:C},[...R[16]||(R[16]=[f("i",{class:"bi bi-x-circle me-1"},null,-1),$e(" Cancel ",-1)])]),f("button",{type:"button",class:"btn btn-primary btn-sm flex-fill",onClick:y,disabled:!T.value},[...R[17]||(R[17]=[f("i",{class:"bi bi-check-circle me-1"},null,-1),$e(" Apply ",-1)])],8,h2)]),R[18]||(R[18]=f("div",{class:"help-text mt-3"},[f("small",{class:"text-muted"},[f("ul",{class:"mb-0"},[f("li",null,"This tool changes rotation origins without affecting position"),f("li",null,'Use "key centers" for independent rotation of each key'),f("li",null,"Use manual coordinates for defining shared rotation point")])])],-1))])])],36)):Ke("",!0)}}),v2=St(p2,[["__scopeId","data-v-345bba1f"]]);function m2(t){if(!t||typeof t!="string")return null;const e=/^(\d+),(\d+)$/,n=t.trim().match(e);return n?{row:parseInt(n[1],10),col:parseInt(n[2],10)}:null}function Wh(t){if(!t||typeof t!="string")return null;const e=t.trim(),n=/^(\d+),(\d+)$/,o=e.match(n);if(o)return{row:parseInt(o[1],10),col:parseInt(o[2],10)};const i=/^(\d+),$/,s=e.match(i);if(s)return{row:parseInt(s[1],10),col:null};const r=/^,(\d+)$/,l=e.match(r);return l?{row:null,col:parseInt(l[1],10)}:null}function g2(t){const e=new Map,n=new Map;return t.filter(i=>!i.decal&&!i.ghost).forEach(i=>{const s=i.labels?.[0],r=m2(s);if(!r)return;const{row:l,col:a}=r;e.has(l)||e.set(l,[]),e.get(l).push(i),n.has(a)||n.set(a,[]),n.get(a).push(i)}),e.forEach(i=>{i.sort((s,r)=>s.x-r.x)}),n.forEach(i=>{i.sort((s,r)=>s.y-r.y)}),{rows:e,cols:n}}function b2(t){const e=new Map,n=new Map;return t.filter(i=>!i.decal&&!i.ghost).forEach(i=>{const s=i.labels?.[0],r=Wh(s);if(!r)return;const{row:l,col:a}=r;l!==null&&(e.has(l)||e.set(l,[]),e.get(l).push(i)),a!==null&&(n.has(a)||n.set(a,[]),n.get(a).push(i))}),e.forEach(i=>{i.sort((s,r)=>s.x-r.x)}),n.forEach(i=>{i.sort((s,r)=>s.y-r.y)}),{rows:e,cols:n}}function Gd(t){const e=[],n=new Set;for(const o of t){if(n.has(o))continue;const i=o.rotation_angle||0,s=o.rotation_x,r=o.rotation_y,l=t.filter(a=>{if(n.has(a))return!1;const d=a.rotation_angle||0,h=a.rotation_x,c=a.rotation_y,p=Math.abs(i-d)<1e-6,m=s===void 0&&h===void 0||s!==void 0&&h!==void 0&&Math.abs(s-h)<1e-6,g=r===void 0&&c===void 0||r!==void 0&&c!==void 0&&Math.abs(r-c)<1e-6;return p&&m&&g});l.length>0&&(e.push({rotationAngle:i,rotationX:s,rotationY:r,keys:l}),l.forEach(a=>n.add(a)))}return e}function y2(t){const e=[];for(const n of t){const{rotationAngle:o,keys:i}=n;if(Math.abs(o)<1e-6){e.push(...i);continue}for(const s of i){const r=`DEROTATE:${o}`;s.labels?s.labels.length<7&&(s.labels=[...s.labels,...Array(12-s.labels.length).fill("")]):s.labels=Array(12).fill(""),s.labels[6]=r,s.rotation_angle=0,e.push(s)}}return e}function Zd(t){const e=[];for(const n of t){const o=n.labels?.[6];if(!o||typeof o!="string"){e.push(n);continue}if(!o.startsWith("DEROTATE:")){e.push(n);continue}const i=o.substring(9),s=parseFloat(i);isNaN(s)||(n.rotation_angle=s,n.labels&&n.labels.length>6&&(n.labels[6]="")),e.push(n)}return e}const w2={class:"panel-content"},x2={class:"panel-body"},D2={key:0},_2={key:0,class:"alert alert-success mb-3"},C2={class:"alert alert-warning mb-0"},E2={class:"d-flex align-items-start gap-3"},A2={class:"flex-grow-1"},S2={class:"mb-2 text-warning fw-bold"},F2={class:"mb-2 small"},k2={key:0,class:"mb-2 small"},M2={key:1,class:"draw-section"},T2={class:"draw-header"},$2={class:"info-section mb-3"},L2={class:"d-flex align-items-start gap-3"},I2={class:"flex-grow-1"},O2={class:"progress-info"},R2={class:"progress-item"},P2={class:"progress-label"},B2={class:"ms-1"},N2={class:"progress-stats"},V2={key:0,class:"text-muted small"},K2={key:1,class:"text-success small"},z2={class:"progress-item"},U2={class:"progress-label"},H2={class:"ms-1"},j2={class:"progress-stats"},W2={key:0,class:"text-muted small"},q2={key:1,class:"text-success small"},Y2={key:0,class:"alert alert-success mb-3"},X2={key:0,class:"d-flex align-items-start gap-3"},J2={key:1,class:"d-flex align-items-center gap-2"},G2={class:"flex-grow-1"},Z2={class:"mb-0 small"},Q2={key:1,class:"alert alert-warning mb-3"},eE={class:"d-flex align-items-start gap-3"},tE={class:"flex-grow-1"},nE={class:"mb-2 small"},oE={class:"mt-2"},sE={class:"mt-2 small"},iE={class:"ms-3 text-muted"},rE={class:"mb-3"},lE={class:"mb-3"},aE={class:"btn-group w-100",role:"group","aria-label":"Drawing type selector"},uE={class:"mb-3"},cE=["disabled"],dE={class:"panel-footer"},fE=At({__name:"MatrixCoordinatesModal",props:{visible:{type:Boolean,default:!1}},emits:["apply","cancel"],setup(t,{expose:e,emit:n}){const o=t,i=n,s=An(),r=ul(),l=Y("warning"),a=Y([]),d=Y([]),h=Y(!1),c=Y(null),{position:p,panelRef:m,handleMouseDown:g,handleHeaderMouseDown:D,initializePosition:T}=Ji({defaultPosition:{x:100,y:100},headerHeight:45}),y=Oe(()=>s.keys.some(me=>me.ghost||me.decal?!1:me.labels&&me.labels.length>0&&me.labels.some(j=>j&&j.trim()!==""))),C=Oe(()=>{const me=s.keys.filter(j=>!j.decal&&!j.ghost);return me.length===0?!1:me.every(j=>{const K=j.labels?.[0];return!K||K.trim()===""?!0:Wh(K)!==null})}),M=Oe(()=>s.keys.filter(me=>!me.ghost&&!me.decal)),E=Oe(()=>{const me=new Set;return a.value.forEach(j=>{j.keySequence.forEach(K=>me.add(K))}),me}),R=Oe(()=>{const me=new Set;return d.value.forEach(j=>{j.keySequence.forEach(K=>me.add(K))}),me}),L=Oe(()=>M.value.filter(me=>!E.value.has(me)).length),B=Oe(()=>M.value.filter(me=>!R.value.has(me)).length),x=Oe(()=>M.value.length),I=Oe(()=>x.value>0&&L.value===0&&B.value===0),N=()=>{W(),s.keys.forEach(me=>{me.labels=[]}),l.value="draw",r.enableDrawing("row")},z=()=>{const{rows:me,cols:j}=b2(s.keys);a.value=Array.from(me.entries()).sort(([K],[ie])=>K-ie).map(([K,ie])=>({id:`row-${K}-${Date.now()}`,index:K,keySequence:ie})),d.value=Array.from(j.entries()).sort(([K],[ie])=>K-ie).map(([K,ie])=>({id:`col-${K}-${Date.now()}`,index:K,keySequence:ie})),r.loadExistingAssignments(me,j),l.value="draw",r.enableDrawing("row")},F=()=>{const me=new Map,j=new Map;a.value.forEach(K=>{K.keySequence.forEach(ie=>{me.set(ie,K.index)})}),d.value.forEach(K=>{K.keySequence.forEach(ie=>{j.set(ie,K.index)})}),s.keys.forEach(K=>{if(K.ghost||K.decal)return;const ie=me.get(K),_e=j.get(K);ie!==void 0&&_e!==void 0?K.labels=[`${ie},${_e}`]:ie!==void 0?K.labels=[`${ie},`]:_e!==void 0?K.labels=[`,${_e}`]:K.labels=[]})},te=me=>{c.value={duplicates:me}},H=()=>{h.value=!1;const me=()=>{const k=s.keys.filter(P=>!P.decal&&!P.ghost);return Gd(k).some(P=>Math.abs(P.rotationAngle)>1e-6&&P.keys.length>=2)},j=k=>{const O=[];let P=!1;return k.forEach((oe,ne)=>{oe.length>1&&(P=!0,O.push({position:ne,keys:oe}))}),{hasDuplicates:P,duplicates:O}},K=k=>{const O=new Map;k.forEach(ne=>{if(ne.decal||ne.ghost)return;const re=Ln(ne),ue=Math.round(re.y),ve=Math.round(re.x),ce=`${ue},${ve}`;O.has(ce)||O.set(ce,[]),O.get(ce).push(ne)});const{hasDuplicates:P,duplicates:oe}=j(O);return{matrixMap:O,hasDuplicates:P,duplicates:oe}},ie=k=>{const O=new Set,P=new Set;k.forEach((re,ue)=>{const[ve,ce]=ue.split(",").map(Number);O.add(ve),P.add(ce)});const oe=Array.from(O).sort((re,ue)=>re-ue),ne=Array.from(P).sort((re,ue)=>re-ue);a.value=oe.map((re,ue)=>{const ve=[];return k.forEach((ce,fe)=>{const[Te]=fe.split(",").map(Number);Te===re&&ve.push(...ce)}),ve.sort((ce,fe)=>ce.x-fe.x),{id:`row-${ue}-${Date.now()}`,index:ue,keySequence:ve}}),d.value=ne.map((re,ue)=>{const ve=[];return k.forEach((ce,fe)=>{const[,Te]=fe.split(",").map(Number);Te===re&&ve.push(...ce)}),ve.sort((ce,fe)=>ce.y-fe.y),{id:`col-${ue}-${Date.now()}`,index:ue,keySequence:ve}})},_e=s.keys.filter(k=>!k.decal&&!k.ghost);if(me()){const k=Gd(_e),O=y2(k);s.keys=O;const{matrixMap:P,hasDuplicates:oe}=K(s.keys);if(oe){const ne=Zd(s.keys);s.keys=ne;const{matrixMap:re,hasDuplicates:ue,duplicates:ve}=K(_e);if(ue){const ce=new Map;re.forEach((fe,Te)=>{ce.set(Te,[fe[0]])}),ie(ce),te(ve)}else ie(re)}else{ie(P);const ne=Zd(s.keys);s.keys=ne,s.saveState()}}else{const{matrixMap:k,hasDuplicates:O}=K(_e);if(O){const P=new Map;k.forEach((oe,ne)=>{P.set(ne,[oe[0]])}),ie(P)}else ie(k)}r.clearDrawings(),r.enableDrawing("row"),a.value.forEach(k=>{k.keySequence.forEach(O=>{r.addKeyToSequence(O)}),r.completeSequence()}),r.enableDrawing("column"),d.value.forEach(k=>{k.keySequence.forEach(O=>{r.addKeyToSequence(O)}),r.completeSequence()}),r.disableDrawing(),F()},Q=()=>{h.value=!0;const{rows:me,cols:j}=g2(s.keys);a.value=Array.from(me.entries()).sort(([K],[ie])=>K-ie).map(([K,ie])=>({id:`row-${K}-${Date.now()}`,index:K,keySequence:ie})),d.value=Array.from(j.entries()).sort(([K],[ie])=>K-ie).map(([K,ie])=>({id:`col-${K}-${Date.now()}`,index:K,keySequence:ie})),r.clearDrawings(),r.enableDrawing("row"),a.value.forEach(K=>{K.keySequence.forEach(ie=>{r.addKeyToSequence(ie)}),r.completeSequence()}),r.enableDrawing("column"),d.value.forEach(K=>{K.keySequence.forEach(ie=>{r.addKeyToSequence(ie)}),r.completeSequence()}),r.disableDrawing()},W=()=>{r.clearDrawings()},J=()=>{r.isDrawing&&r.disableDrawing(),r.clearDrawings(),i("cancel")},G=()=>{i("cancel"),ye()},ye=()=>{l.value="warning",a.value=[],d.value=[],h.value=!1,c.value=null,r.isDrawing&&r.disableDrawing(),r.clearDrawings()},U=Y("row"),Fe=Oe(()=>r.hasDrawings),nt=me=>{U.value=me,r.enableDrawing(me)},Ce=()=>{h.value=!1,r.clearDrawings(),se()},se=()=>{const me=r.getCompletedDrawings();a.value=Array.from(me.rows.entries()).sort(([j],[K])=>j-K).map(([j,K])=>({id:`row-${j}-${Date.now()}`,index:j,keySequence:K})),d.value=Array.from(me.columns.entries()).sort(([j],[K])=>j-K).map(([j,K])=>({id:`col-${j}-${Date.now()}`,index:j,keySequence:K}))};at(()=>[r.completedRows.size,r.completedColumns.size,Array.from(r.completedRows.values()).reduce((me,j)=>me+j.length,0),Array.from(r.completedColumns.values()).reduce((me,j)=>me+j.length,0)],()=>{if(!(!o.visible||l.value!=="draw")){if(se(),r.skipNextSync){r.skipNextSync=!1;return}F()}}),at(()=>o.visible,me=>{me?(T({x:window.innerWidth-550-20,y:100}),ye(),s.isViaAnnotated?(Q(),l.value="draw",r.enableDrawing("row")):y.value?(C.value,l.value="warning"):(l.value="draw",r.enableDrawing("row"))):W()});let De=!1;at(()=>I.value,me=>{me&&!De&&(De=!0,F()),me||(De=!1)});const Me=me=>{me.key==="Escape"&&(r.currentSequence.length>0?r.clearCurrentSequence():G())};return at(()=>o.visible,me=>{r.setModalOpen(me),me?(document.addEventListener("keydown",Me),document.body.classList.add("modal-open")):(document.removeEventListener("keydown",Me),document.body.classList.remove("modal-open"))}),Qt(()=>{o.visible&&(document.addEventListener("keydown",Me),document.body.classList.add("modal-open"))}),an(()=>{document.removeEventListener("keydown",Me),document.body.classList.remove("modal-open")}),e({getCompletedRows:()=>a.value,getCompletedColumns:()=>d.value}),(me,j)=>me.visible?(ae(),pe("div",{key:0,class:"matrix-modal",ref_key:"panelRef",ref:m,style:en({transform:`translate(${Ue(p).x}px, ${Ue(p).y}px)`}),onMousedown:j[15]||(j[15]=(...K)=>Ue(g)&&Ue(g)(...K))},[f("div",w2,[f("div",{class:"panel-header",onMousedown:j[1]||(j[1]=(...K)=>Ue(D)&&Ue(D)(...K))},[j[16]||(j[16]=f("div",{class:"panel-title"},[f("i",{class:"bi bi-grip-vertical me-2 drag-handle"}),f("i",{class:"bi bi-grid-3x3 me-2"}),$e(" Add Switch Matrix Coordinates ")],-1)),f("button",{type:"button",class:"btn-close",onClick:G,onMousedown:j[0]||(j[0]=pt(()=>{},["stop"])),"aria-label":"Close"},null,32)],32),f("div",x2,[l.value==="warning"?(ae(),pe("div",D2,[Ue(s).isViaAnnotated?(ae(),pe("div",_2,[...j[17]||(j[17]=[Fs('<div class="d-flex align-items-start gap-3" data-v-fc6ad7c6><i class="bi bi-check-circle-fill text-success" style="font-size:1.5rem;" data-v-fc6ad7c6></i><div class="flex-grow-1" data-v-fc6ad7c6><h6 class="mb-2 text-success fw-bold" data-v-fc6ad7c6>Layout Already Annotated</h6><p class="mb-2 small" data-v-fc6ad7c6> This layout appears to already have VIA matrix coordinates. All keys have valid &quot;row,column&quot; annotations in the top-left position. </p><p class="mb-0 small" data-v-fc6ad7c6><i class="bi bi-eye me-1" data-v-fc6ad7c6></i> The matrix overlay is currently visible on the canvas showing the existing row and column connections. </p></div></div>',1)])])):Ke("",!0),j[21]||(j[21]=Fs('<div class="info-section mb-3" data-v-fc6ad7c6><div class="d-flex align-items-start gap-3" data-v-fc6ad7c6><i class="bi bi-info-circle text-primary" style="font-size:1.5rem;" data-v-fc6ad7c6></i><div class="flex-grow-1" data-v-fc6ad7c6><p class="mb-2 small" data-v-fc6ad7c6> Matrix coordinates map the physical layout to the electrical switch matrix, enabling proper key mapping in VIA configurator. </p><p class="mb-2 small" data-v-fc6ad7c6> You can use <strong data-v-fc6ad7c6>automatic annotation</strong> (based on key positions) or <strong data-v-fc6ad7c6>draw manually</strong> by clicking keys in sequence. </p><p class="mb-0 small" data-v-fc6ad7c6> Learn more: <a href="https://www.caniusevia.com/docs/layouts" target="_blank" rel="noopener noreferrer" class="text-decoration-none" data-v-fc6ad7c6> VIA Documentation <i class="bi bi-box-arrow-up-right ms-1" data-v-fc6ad7c6></i></a></p></div></div></div>',1)),f("div",C2,[f("div",E2,[j[20]||(j[20]=f("i",{class:"bi bi-exclamation-triangle-fill text-warning",style:{"font-size":"1.5rem"}},null,-1)),f("div",A2,[f("h6",S2,Ve(C.value?"Continue Matrix Annotation":"Important Notice"),1),f("p",F2,[f("strong",null,Ve(C.value?"Partial annotation detected, choose your approach:":"Proceeding will clear all existing labels"),1)]),C.value?(ae(),pe("ul",k2,[...j[18]||(j[18]=[f("li",null,[f("strong",null,"Continue"),$e(": Continue with existing matrix annotations")],-1),f("li",null,[f("strong",null,"Start over"),$e(": Clear all labels and start fresh")],-1),f("li",null,[f("strong",null,"Cancel"),$e(": Close this tool")],-1)])])):Ke("",!0),j[19]||(j[19]=f("p",{class:"mb-0 small"}," The matrix coordinates will be placed in the top-left legend position (position 0) on each key, following the VIA format standard. ",-1))])])])])):Ke("",!0),l.value==="draw"?(ae(),pe("div",M2,[f("div",T2,[f("div",$2,[f("div",L2,[f("div",I2,[f("div",O2,[f("div",R2,[f("div",P2,[j[22]||(j[22]=f("i",{class:"bi bi-diagram-3 me-1 text-primary"},null,-1)),j[23]||(j[23]=f("span",{class:"fw-bold"},"Rows:",-1)),f("span",B2,Ve(a.value.length)+" defined",1)]),f("div",N2,[L.value>0?(ae(),pe("span",V2,Ve(L.value)+" keys left ",1)):(ae(),pe("span",K2,[...j[24]||(j[24]=[f("i",{class:"bi bi-check-circle-fill me-1"},null,-1),$e("Complete ",-1)])]))])]),f("div",z2,[f("div",U2,[j[25]||(j[25]=f("i",{class:"bi bi-diagram-2 me-1 text-success"},null,-1)),j[26]||(j[26]=f("span",{class:"fw-bold"},"Columns:",-1)),f("span",H2,Ve(d.value.length)+" defined",1)]),f("div",j2,[B.value>0?(ae(),pe("span",W2,Ve(B.value)+" keys left ",1)):(ae(),pe("span",q2,[...j[27]||(j[27]=[f("i",{class:"bi bi-check-circle-fill me-1"},null,-1),$e("Complete ",-1)])]))])])])])])]),I.value&&!c.value?(ae(),pe("div",Y2,[h.value?(ae(),pe("div",X2,[...j[28]||(j[28]=[Fs('<i class="bi bi-check-circle-fill text-success" style="font-size:1.5rem;" data-v-fc6ad7c6></i><div class="flex-grow-1" data-v-fc6ad7c6><h6 class="mb-2 text-success fw-bold" data-v-fc6ad7c6>Layout Already Annotated</h6><p class="mb-2 small" data-v-fc6ad7c6> This layout appears to already have VIA matrix coordinates. All keys have valid &quot;row,column&quot; annotations in the top-left position. </p><p class="mb-0 small" data-v-fc6ad7c6><i class="bi bi-eye me-1" data-v-fc6ad7c6></i> The matrix overlay is currently visible on the canvas showing the existing row and column connections. </p></div>',2)])])):(ae(),pe("div",J2,[j[30]||(j[30]=f("i",{class:"bi bi-check-circle-fill",style:{"font-size":"1.2rem"}},null,-1)),f("div",G2,[j[29]||(j[29]=f("strong",null,"Annotation Complete!",-1)),f("p",Z2," All "+Ve(x.value)+" keys have been assigned. Coordinates are applied automatically. You can close the tool or continue editing. ",1)])]))])):Ke("",!0),c.value?(ae(),pe("div",Q2,[f("div",eE,[j[34]||(j[34]=f("i",{class:"bi bi-exclamation-triangle-fill text-warning",style:{"font-size":"1.5rem"}},null,-1)),f("div",tE,[j[32]||(j[32]=f("h6",{class:"mb-2 text-warning fw-bold"}," Automatic Annotation Complete with Issues ",-1)),f("p",nE," Matrix coordinates have been assigned to all "+Ve(x.value)+" keys, but "+Ve(c.value.duplicates.length)+" duplicate position"+Ve(c.value.duplicates.length===1?"":"s")+" were found. ",1),j[33]||(j[33]=f("p",{class:"mb-2 small"}," Only the first key in each duplicate position was assigned coordinates. You may need to manually adjust the matrix coordinates for the affected keys. ",-1)),f("details",oE,[j[31]||(j[31]=f("summary",{class:"small fw-bold cursor-pointer"},"View duplicate positions",-1)),f("div",sE,[(ae(!0),pe(xt,null,En(c.value.duplicates,K=>(ae(),pe("div",{key:K.position,class:"mb-2"},[f("strong",null,"Position "+Ve(K.position)+":",1),$e(" "+Ve(K.keys.length)+" keys ",1),f("div",iE,[(ae(!0),pe(xt,null,En(K.keys,(ie,_e)=>(ae(),pe("div",{key:_e}," - Key #"+Ve(Ue(s).keys.indexOf(ie))+" "+Ve(_e===0?"(kept)":"(removed)"),1))),128))])]))),128))])])])])])):Ke("",!0),f("div",rE,[f("button",{type:"button",class:"btn btn-outline-primary btn-sm w-100",onClick:H,onMousedown:j[2]||(j[2]=pt(()=>{},["stop"])),title:"Automatically assign matrix coordinates based on key positions"},[...j[35]||(j[35]=[f("i",{class:"bi bi-magic me-1"},null,-1),$e(" Annotate Automatically ",-1)])],32)]),f("div",lE,[j[39]||(j[39]=f("p",{class:"mb-0 mt-1 small"},"Select editing mode:",-1)),f("div",aE,[f("button",{type:"button",class:vt(["btn btn-sm btn-primary-outline",U.value==="row"?"btn-draw-rows":"btn-outline-secondary"]),onClick:j[3]||(j[3]=K=>nt("row")),onMousedown:j[4]||(j[4]=pt(()=>{},["stop"])),title:"Draw rows"},[...j[36]||(j[36]=[f("i",{class:"bi bi-diagram-3 me-1"},null,-1),$e(" Draw Rows ",-1)])],34),f("button",{type:"button",class:vt(["btn btn-sm btn-primary-outline",U.value==="column"?"btn-draw-columns":"btn-outline-secondary"]),onClick:j[5]||(j[5]=K=>nt("column")),onMousedown:j[6]||(j[6]=pt(()=>{},["stop"])),title:"Draw columns"},[...j[37]||(j[37]=[f("i",{class:"bi bi-diagram-2 me-1"},null,-1),$e(" Draw Columns ",-1)])],34),f("button",{type:"button",class:vt(["btn btn-sm",U.value==="remove"?"btn-danger":"btn-outline-secondary"]),onClick:j[7]||(j[7]=K=>nt("remove")),onMousedown:j[8]||(j[8]=pt(()=>{},["stop"])),title:"Remove elements"},[...j[38]||(j[38]=[f("i",{class:"bi bi-trash me-1"},null,-1),$e(" Remove ",-1)])],34)])]),f("div",uE,[f("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100",onClick:Ce,onMousedown:j[9]||(j[9]=pt(()=>{},["stop"])),disabled:!Fe.value},[...j[40]||(j[40]=[f("i",{class:"bi bi-trash me-1"},null,-1),$e(" Clear All Drawings ",-1)])],40,cE)]),j[41]||(j[41]=Fs('<div class="info-section-light mb-0" data-v-fc6ad7c6><h6 class="small fw-bold mb-2" data-v-fc6ad7c6><i class="bi bi-info-circle me-1" data-v-fc6ad7c6></i> Instructions </h6><ul class="small mb-0 ps-3" data-v-fc6ad7c6><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Draw Rows/Columns Mode</strong><ul class="small mb-0 ps-3" data-v-fc6ad7c6><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Left-click</strong> to start and complete segments</li><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Right-click or Escape</strong> to cancel while drawing</li><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Click existing wire</strong> to append/continue</li></ul></li><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Remove Mode:</strong> Click on rows, columns, or nodes to delete</li><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Change Row/Column number</strong><ul class="small mb-0 ps-3" data-v-fc6ad7c6><li data-v-fc6ad7c6>Type new value while hovering over element</li><li data-v-fc6ad7c6><strong data-v-fc6ad7c6>Enter</strong> to confirm or <strong data-v-fc6ad7c6>Escape</strong> to cancel</li></ul></li></ul></div>',1))])])):Ke("",!0)]),f("div",dE,[l.value==="draw"?(ae(),pe("button",{key:0,type:"button",class:"btn btn-secondary btn-sm",onClick:J,onMousedown:j[10]||(j[10]=pt(()=>{},["stop"])),"aria-label":"Close"},[...j[42]||(j[42]=[f("i",{class:"bi bi-x-circle me-1"},null,-1),$e(" Close ",-1)])],32)):Ke("",!0),l.value==="warning"&&!C.value?(ae(),pe("button",{key:1,type:"button",class:"btn btn-primary btn-sm",onClick:N,onMousedown:j[11]||(j[11]=pt(()=>{},["stop"])),"aria-label":"Ok"},[...j[43]||(j[43]=[f("i",{class:"bi bi-check-circle me-1"},null,-1),$e(" OK (clear all labels) ",-1)])],32)):Ke("",!0),l.value==="warning"&&C.value?(ae(),pe("button",{key:2,type:"button",class:"btn btn-primary btn-sm",onClick:z,onMousedown:j[12]||(j[12]=pt(()=>{},["stop"])),"aria-label":"Continue"},[...j[44]||(j[44]=[f("i",{class:"bi bi-arrow-right-circle me-1"},null,-1),$e(" Continue ",-1)])],32)):Ke("",!0),l.value==="warning"&&C.value?(ae(),pe("button",{key:3,type:"button",class:"btn btn-warning btn-sm",onClick:N,onMousedown:j[13]||(j[13]=pt(()=>{},["stop"])),"aria-label":"Start over"},[...j[45]||(j[45]=[f("i",{class:"bi bi-arrow-right-circle me-1"},null,-1),$e(" Start over ",-1)])],32)):Ke("",!0),l.value==="warning"?(ae(),pe("button",{key:4,type:"button",class:"btn btn-secondary btn-sm",onClick:G,onMousedown:j[14]||(j[14]=pt(()=>{},["stop"])),"aria-label":"Cancel"},[...j[46]||(j[46]=[f("i",{class:"bi bi-x-circle me-1"},null,-1),$e(" Cancel ",-1)])],32)):Ke("",!0)])])],36)):Ke("",!0)}}),hE=St(fE,[["__scopeId","data-v-fc6ad7c6"]]),pE={class:"canvas-toolbar"},vE={class:"toolbar-section"},mE={class:"tool-buttons"},gE={class:"btn-group-vertical add-key-group"},bE=["onClick","title"],yE=["disabled"],wE={class:"toolbar-section"},xE={class:"tool-buttons"},DE=["disabled"],_E=["disabled"],CE={class:"btn-group-vertical mirror-group"},EE=["disabled"],AE=["disabled"],SE={class:"btn-group-vertical extra-tools-group"},FE=["onClick","title","disabled"],kE={class:"toolbar-section"},ME={class:"tool-buttons"},TE=["disabled"],$E=["disabled"],LE=At({__name:"CanvasToolbar",setup(t){const e=An(),n=Y(!1),o=yC,i=Y(),s=Y(),r=Y(!1),l=Y(),a=Y(),d=Y(!1),h=Y(),c=Y(),p=Y(!1),m=Y(!1),g=Y(!1),D=Y(null),T=Oe(()=>[{id:"legend-tools",name:"Legend Tools",description:"Remove, align, and move legends on keys",disabled:!1,action:()=>{p.value=!0}},{id:"add-matrix-coordinates",name:"Add Switch Matrix Coordinates",description:"Assign matrix coordinates for VIA - automatic or manual drawing",disabled:!1,action:()=>{g.value=!0}},{id:"move-rotation-origins",name:"Move Rotation Origins",description:e.selectedKeys.length===0?"Move rotation origins for all keys":"Move rotation origins for selected keys",disabled:!1,action:()=>{m.value=!0}}]),y=Oe(()=>e.canvasMode),C=Oe(()=>e.selectedKeys.length>0),M=Oe(()=>e.canUndo),E=Oe(()=>e.canRedo),R=Oe(()=>e.selectedKeys.length>0),L=Oe(()=>e.selectedKeys.length>0),B=Oe(()=>e.selectedKeys.length>0),x=()=>{window.dispatchEvent(new CustomEvent("request-canvas-focus"))},I=Ce=>{e.setCanvasMode(Ce),x()},N=()=>{e.addKey(),x()},z=()=>{if(n.value){n.value=!1;return}if(s.value){const Ce=s.value.getBoundingClientRect(),se=window.innerWidth,De=window.innerHeight,Me=150,me=Math.min(300,o.length*32+40);let j=Ce.right+10,K=Ce.top;j+Me>se&&(j=Ce.left-Me-10),j<10&&(j=10),K+me>De&&(K=Ce.bottom-me),K<10&&(K=10),n.value=!0,je(()=>{if(i.value){const ie=i.value;ie.style.left=`${j}px`,ie.style.top=`${K}px`,ie.style.opacity="1"}})}},F=Ce=>{e.addKey(Ce.data),n.value=!1,x()},te=()=>{if(r.value){r.value=!1;return}if(a.value){const Ce=a.value.getBoundingClientRect(),se=window.innerWidth,De=window.innerHeight,Me=180,me=100;let j=Ce.right+10,K=Ce.top;j+Me>se&&(j=Ce.left-Me-10),j<10&&(j=10),K+me>De&&(K=Ce.bottom-me),K<10&&(K=10),r.value=!0,je(()=>{if(l.value){const ie=l.value;ie.style.left=`${j}px`,ie.style.top=`${K}px`,ie.style.opacity="1"}})}},H=Ce=>{I(Ce),r.value=!1,x()},Q=()=>{e.deleteKeys(),x()},W=()=>{e.undo(),x()},J=()=>{e.redo(),x()},G=()=>{g.value=!1,x()},ye=()=>{g.value=!1},U=()=>{if(d.value){d.value=!1;return}if(c.value){const Ce=c.value.getBoundingClientRect(),se=window.innerWidth,De=window.innerHeight,Me=200,me=Math.min(300,T.value.length*32+40);let j=Ce.right+10,K=Ce.top;j+Me>se&&(j=Ce.left-Me-10),j<10&&(j=10),K+me>De&&(K=Ce.bottom-me),K<10&&(K=10),d.value=!0,je(()=>{if(h.value){const ie=h.value;ie.style.left=`${j}px`,ie.style.top=`${K}px`,ie.style.opacity="1"}})}},Fe=Ce=>{Ce.action(),d.value=!1,x()},nt=Ce=>{if(n.value){const se=Ce.target,De=s.value,Me=i.value;De&&!De.contains(se)&&Me&&!Me.contains(se)&&(n.value=!1)}if(r.value){const se=Ce.target,De=a.value,Me=l.value;De&&!De.contains(se)&&Me&&!Me.contains(se)&&(r.value=!1)}if(d.value){const se=Ce.target,De=c.value,Me=h.value;De&&!De.contains(se)&&Me&&!Me.contains(se)&&(d.value=!1)}};return Qt(()=>{document.addEventListener("click",nt)}),an(()=>{document.removeEventListener("click",nt)}),(Ce,se)=>(ae(),pe(xt,null,[f("div",pE,[f("div",vE,[se[12]||(se[12]=f("label",{class:"section-label"},"Edit",-1)),f("div",mE,[f("div",gE,[f("button",{class:"tool-button primary-add-btn",onClick:N,title:"Add Standard Key"},[...se[8]||(se[8]=[f("i",{class:"bi bi-plus-circle"},null,-1)])]),f("button",{ref_key:"dropdownBtnRef",ref:s,class:"tool-button dropdown-btn",onClick:z,title:"Add Special Key"},[...se[9]||(se[9]=[f("i",{class:"bi bi-chevron-down"},null,-1)])],512)]),n.value?(ae(),pe("div",{key:0,ref_key:"dropdownRef",ref:i,class:"special-keys-dropdown",style:{opacity:"0"}},[se[10]||(se[10]=f("div",{class:"dropdown-header"},"Special Keys",-1)),(ae(!0),pe(xt,null,En(Ue(o),De=>(ae(),pe("button",{key:De.name,onClick:Me=>F(De),class:"dropdown-item",title:De.description},Ve(De.name),9,bE))),128))],512)):Ke("",!0),f("button",{class:"tool-button",onClick:Q,disabled:!C.value,title:"Delete Keys"},[...se[11]||(se[11]=[f("i",{class:"bi bi-trash"},null,-1)])],8,yE)])]),f("div",wE,[se[23]||(se[23]=f("label",{class:"section-label"},"Tools",-1)),f("div",xE,[f("button",{class:vt({"tool-button":!0,active:y.value==="select"}),onClick:se[0]||(se[0]=De=>I("select")),title:"Selection Mode - Left click to select, middle drag to move"},[...se[13]||(se[13]=[f("i",{class:"bi bi-cursor"},null,-1)])],2),f("button",{class:vt({"tool-button":!0,active:y.value==="move-exactly"}),disabled:!B.value,onClick:se[1]||(se[1]=De=>I("move-exactly")),title:"Move Exactly - Move selected keys by exact X/Y values"},[...se[14]||(se[14]=[f("i",{class:"bi bi-arrows-move"},null,-1)])],10,DE),f("button",{class:vt({"tool-button":!0,active:y.value==="rotate"}),disabled:!L.value,onClick:se[2]||(se[2]=De=>I("rotate")),title:"Rotate Selection"},[...se[15]||(se[15]=[f("i",{class:"bi bi-arrow-repeat"},null,-1)])],10,_E),f("div",CE,[f("button",{class:vt({"tool-button":!0,"primary-mirror-btn":!0,active:y.value==="mirror-v"||y.value==="mirror-h"}),disabled:!R.value,onClick:se[3]||(se[3]=De=>I("mirror-v")),title:"Mirror Vertical"},[...se[16]||(se[16]=[f("i",{class:"bi bi-symmetry-vertical"},null,-1)])],10,EE),f("button",{ref_key:"mirrorDropdownBtnRef",ref:a,class:"tool-button dropdown-btn",disabled:!R.value,onClick:te,title:"Mirror Options"},[...se[17]||(se[17]=[f("i",{class:"bi bi-chevron-down"},null,-1)])],8,AE)]),r.value?(ae(),pe("div",{key:0,ref_key:"mirrorDropdownRef",ref:l,class:"mirror-dropdown",style:{opacity:"0"}},[se[20]||(se[20]=f("div",{class:"dropdown-header"},"Mirror Direction",-1)),f("button",{onClick:se[4]||(se[4]=De=>H("mirror-v")),class:vt(["dropdown-item",{active:y.value==="mirror-v"}]),title:"Mirror keys across a vertical line"},[...se[18]||(se[18]=[f("i",{class:"bi bi-symmetry-vertical"},null,-1),$e(" Mirror Vertical ",-1)])],2),f("button",{onClick:se[5]||(se[5]=De=>H("mirror-h")),class:vt(["dropdown-item",{active:y.value==="mirror-h"}]),title:"Mirror keys across a horizontal line"},[...se[19]||(se[19]=[f("i",{class:"bi bi-symmetry-horizontal"},null,-1),$e(" Mirror Horizontal ",-1)])],2)],512)):Ke("",!0),f("div",SE,[f("button",{ref_key:"extraToolsBtnRef",ref:c,class:"tool-button",onClick:U,title:"Extra Tools"},[...se[21]||(se[21]=[f("i",{class:"bi bi-tools"},null,-1)])],512)])]),d.value?(ae(),pe("div",{key:0,ref_key:"extraToolsDropdownRef",ref:h,class:"extra-tools-dropdown",style:{opacity:"0"}},[se[22]||(se[22]=f("div",{class:"dropdown-header"},"Extra Tools",-1)),(ae(!0),pe(xt,null,En(T.value,De=>(ae(),pe("button",{key:De.id,onClick:Me=>De.disabled?null:Fe(De),class:vt(["dropdown-item",{disabled:De.disabled}]),title:De.description,disabled:De.disabled},Ve(De.name),11,FE))),128))],512)):Ke("",!0)]),f("div",kE,[se[26]||(se[26]=f("label",{class:"section-label"},"History",-1)),f("div",ME,[f("button",{class:"tool-button",onClick:W,disabled:!M.value,title:"Undo"},[...se[24]||(se[24]=[f("i",{class:"bi bi-arrow-counterclockwise"},null,-1)])],8,TE),f("button",{class:"tool-button",onClick:J,disabled:!E.value,title:"Redo"},[...se[25]||(se[25]=[f("i",{class:"bi bi-arrow-clockwise"},null,-1)])],8,$E)])])]),Ee(GC,{visible:p.value,onClose:se[6]||(se[6]=De=>p.value=!1)},null,8,["visible"]),Ee(v2,{visible:m.value,onClose:se[7]||(se[7]=De=>m.value=!1)},null,8,["visible"]),Ee(hE,{ref_key:"matrixModalRef",ref:D,visible:g.value,onApply:G,onCancel:ye},null,8,["visible"])],64))}}),IE=St(LE,[["__scopeId","data-v-a8eaa53a"]]),OE={class:"card-footer canvas-footer"},RE={class:"d-flex flex-column flex-lg-row align-items-stretch align-items-lg-center justify-content-lg-between gap-2 gap-lg-3"},PE={class:"canvas-status d-flex flex-wrap align-items-center gap-1 gap-sm-2 justify-content-center justify-content-lg-start"},BE={class:"canvas-focus-indicator d-flex align-items-center gap-1"},NE=["title"],VE={class:"small"},KE={class:"keys-counter small"},zE={class:"fw-semibold"},UE={class:"selected-counter small"},HE={class:"fw-semibold"},jE={class:"move-step-control d-flex align-items-center gap-1"},WE={class:"lock-rotations-control d-flex align-items-center gap-1"},qE=["checked"],YE={class:"d-flex flex-wrap align-items-center gap-1 gap-sm-2 justify-content-center justify-content-lg-end"},XE={class:"zoom-control d-flex align-items-center gap-1"},JE={class:"position-indicator"},GE={class:"position-values"},ZE=.1,QE=5,e3=At({__name:"CanvasFooter",setup(t){const e=An(),n=Y(1),o=Y({x:0,y:0,visible:!1}),i=Y(!1),s=Oe(()=>Math.round(n.value*100)),r=()=>{window.dispatchEvent(new CustomEvent("request-canvas-focus"))},l=c=>{if(c!==void 0){const p=Math.max(ZE,Math.min(QE,c/100));n.value=p,window.dispatchEvent(new CustomEvent("canvas-zoom",{detail:p})),r()}},a=c=>{c!==void 0&&e.setMoveStep(c),r()},d=()=>{e.setLockRotations(!e.lockRotations),r()},h=c=>c.toFixed(2).padStart(6," ");return window.addEventListener("canvas-zoom-update",c=>{const p=c;n.value=p.detail}),window.addEventListener("canvas-mouse-position",c=>{const p=c;o.value=p.detail}),window.addEventListener("canvas-focus-change",c=>{const p=c;i.value=p.detail.focused}),(c,p)=>(ae(),pe("div",OE,[f("div",RE,[f("div",PE,[f("div",BE,[f("div",{class:vt(["focus-status-dot",{active:i.value}]),title:i.value?"Canvas is active (accepts keyboard shortcuts)":"Canvas is inactive (click to activate)"},null,10,NE),f("span",VE,Ve(i.value?"Active":"Inactive"),1)]),f("div",KE,[p[0]||(p[0]=$e(" Keys: ",-1)),f("span",zE,Ve(Ue(e).keys.length),1)]),f("div",UE,[p[1]||(p[1]=$e(" Selected: ",-1)),f("span",HE,Ve(Ue(e).selectedKeys.length),1)]),f("div",jE,[p[3]||(p[3]=f("label",{class:"move-step-label small mb-0"},"Step:",-1)),Ee(lt,{"model-value":Ue(e).moveStep,onChange:a,step:.05,min:.05,max:5,"value-on-clear":.25,"disable-wheel":!0,size:"compact"},{suffix:Yn(()=>[...p[2]||(p[2]=[$e("U",-1)])]),_:1},8,["model-value"])]),f("div",WE,[f("input",{id:"lockRotations",type:"checkbox",checked:Ue(e).lockRotations,onChange:d,class:"form-check-input lock-rotations-checkbox"},null,40,qE),p[4]||(p[4]=f("label",{for:"lockRotations",class:"form-check-label small mb-0",title:"When enabled, rotation origins move with keys to maintain relative offset"}," Lock rotations ",-1))])]),f("div",YE,[f("div",XE,[p[6]||(p[6]=f("label",{class:"zoom-label small mb-0"},"Zoom:",-1)),Ee(lt,{"model-value":s.value,onChange:l,step:10,min:10,max:500,"value-on-clear":100,"disable-wheel":!0,size:"compact"},{suffix:Yn(()=>[...p[5]||(p[5]=[$e("%",-1)])]),_:1},8,["model-value"])]),f("div",JE,[p[7]||(p[7]=f("span",{class:"position-label"},"Mouse:",-1)),f("span",GE,Ve(`${h(o.value.x)}, ${h(o.value.y)}`),1)])])])]))}}),t3=St(e3,[["__scopeId","data-v-9d9096ab"]]),n3=At({__name:"CanvasHelpModal",props:{isVisible:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const n=t,o=e,i=()=>{o("close")},s=r=>{r.key==="Escape"&&i()};return at(()=>n.isVisible,r=>{r?(document.addEventListener("keydown",s),document.body.classList.add("modal-open")):(document.removeEventListener("keydown",s),document.body.classList.remove("modal-open"))}),Qt(()=>{n.isVisible&&(document.addEventListener("keydown",s),document.body.classList.add("modal-open"))}),an(()=>{document.removeEventListener("keydown",s),document.body.classList.remove("modal-open")}),(r,l)=>r.isVisible?(ae(),pe("div",{key:0,class:"modal fade show d-block",tabindex:"-1",onClick:pt(i,["self"])},[f("div",{class:"modal-dialog modal-help"},[f("div",{class:"modal-content"},[f("div",{class:"modal-header"},[l[0]||(l[0]=f("h5",{class:"modal-title"},[f("i",{class:"bi bi-question-circle"}),$e(" Keyboard Layout Editor NG - Help ")],-1)),f("button",{type:"button",class:"btn-close",onClick:i,"aria-label":"Close"})]),l[1]||(l[1]=Fs('<div class="modal-body scrollable-content" data-v-1e669133><div class="interactions-grid" data-v-1e669133><div class="left-column" data-v-1e669133><div class="interaction-column" data-v-1e669133><h6 class="section-title" data-v-1e669133>Mouse Controls</h6><div class="controls-list" data-v-1e669133><div class="control-item" data-v-1e669133><i class="bi bi-mouse control-icon" data-v-1e669133></i><div data-v-1e669133><strong data-v-1e669133>Left Click</strong><div data-v-1e669133>Select keys, drag for multi-select</div></div></div><div class="control-item" data-v-1e669133><i class="bi bi-mouse control-icon" data-v-1e669133></i><div data-v-1e669133><strong data-v-1e669133>Middle Click and Drag</strong><div data-v-1e669133>Move selected keys</div></div></div></div></div><div class="interaction-column" data-v-1e669133><h6 class="section-title" data-v-1e669133>Tips &amp; Hints</h6><div class="tips-list" data-v-1e669133><div class="tip-item" data-v-1e669133><i class="bi bi-book control-icon text-primary" data-v-1e669133></i><div data-v-1e669133><strong data-v-1e669133>Detailed Documentation</strong><div data-v-1e669133> For comprehensive help, visit the <a href="https://github.com/adamws/kle-ng" target="_blank" rel="noopener noreferrer" class="github-link" data-v-1e669133> GitHub repository <i class="bi bi-box-arrow-up-right" data-v-1e669133></i></a></div></div></div><div class="tip-item" data-v-1e669133><i class="bi bi-lightbulb control-icon text-warning" data-v-1e669133></i><div data-v-1e669133><strong data-v-1e669133>Export Resolution</strong><div data-v-1e669133>Zoom in on the canvas to increase PNG export resolution</div></div></div><div class="tip-item" data-v-1e669133><i class="bi bi-clipboard-plus control-icon text-info" data-v-1e669133></i><div data-v-1e669133><strong data-v-1e669133>Cross-Instance Copy &amp; Paste</strong><div data-v-1e669133> Copy keys in one browser tab/window and paste them in another KLE-NG instance </div></div></div><div class="tip-item" data-v-1e669133><i class="bi bi-image control-icon text-success" data-v-1e669133></i><div data-v-1e669133><strong data-v-1e669133>Image &amp; SVG Labels</strong><div data-v-1e669133> Use <code data-v-1e669133>&lt;img src=&quot;...&quot;&gt;</code> for external images or <code data-v-1e669133>&lt;svg&gt;...&lt;/svg&gt;</code> for inline SVG graphics </div></div></div></div></div></div><div class="interaction-column" data-v-1e669133><h6 class="section-title" data-v-1e669133>Keyboard Shortcuts</h6><div class="controls-list" data-v-1e669133><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Ctrl</kbd><kbd data-v-1e669133>C</kbd></div><div data-v-1e669133><strong data-v-1e669133>Copy</strong><div data-v-1e669133>Copy selected keys</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Ctrl</kbd><kbd data-v-1e669133>V</kbd></div><div data-v-1e669133><strong data-v-1e669133>Paste</strong><div data-v-1e669133>Paste keys from clipboard</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Ctrl</kbd><kbd data-v-1e669133>X</kbd></div><div data-v-1e669133><strong data-v-1e669133>Cut</strong><div data-v-1e669133>Cut selected keys</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Del</kbd>/<kbd data-v-1e669133>Backspace</kbd></div><div data-v-1e669133><strong data-v-1e669133>Delete</strong><div data-v-1e669133>Remove selected keys</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Ctrl</kbd><kbd data-v-1e669133>]</kbd></div><div data-v-1e669133><strong data-v-1e669133>Next Key</strong><div data-v-1e669133>Select next key in layout order</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Ctrl</kbd><kbd data-v-1e669133>[</kbd></div><div data-v-1e669133><strong data-v-1e669133>Previous Key</strong><div data-v-1e669133>Select previous key in layout order</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Ctrl</kbd><kbd data-v-1e669133>Z</kbd></div><div data-v-1e669133><strong data-v-1e669133>Undo</strong><div data-v-1e669133>Undo last action</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Arrows</kbd></div><div data-v-1e669133><strong data-v-1e669133>Move keys</strong><div data-v-1e669133>Nudge selected keys</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>A</kbd></div><div data-v-1e669133><strong data-v-1e669133>Add key</strong><div data-v-1e669133>Add new key to layout</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Shift</kbd><kbd data-v-1e669133>←</kbd><kbd data-v-1e669133>→</kbd></div><div data-v-1e669133><strong data-v-1e669133>Adjust width</strong><div data-v-1e669133>Change width of selected keys</div></div></div><div class="control-item" data-v-1e669133><div class="kbd-combo" data-v-1e669133><kbd data-v-1e669133>Shift</kbd><kbd data-v-1e669133>↑</kbd><kbd data-v-1e669133>↓</kbd></div><div data-v-1e669133><strong data-v-1e669133>Adjust height</strong><div data-v-1e669133>Change height of selected keys</div></div></div></div></div></div></div>',1)),f("div",{class:"modal-footer"},[f("button",{type:"button",class:"btn btn-primary",onClick:i},"Got it!")])])])])):Ke("",!0)}}),o3=St(n3,[["__scopeId","data-v-1e669133"]]),s3={class:"toast-content"},i3={key:0,class:"toast-icon"},r3={key:0,class:"bi bi-check-circle-fill"},l3={key:1,class:"bi bi-exclamation-triangle-fill"},a3={key:2,class:"bi bi-exclamation-triangle-fill"},u3={key:3,class:"bi bi-info-circle-fill"},c3={class:"toast-message"},d3={key:0,class:"toast-title"},f3={class:"toast-text"},h3=At({__name:"ToastNotification",props:{message:{},title:{},type:{default:"info"},duration:{default:4e3},showIcon:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const n=t,o=e,i=Y(!0);let s=null;const r=()=>{i.value=!1,s&&(clearTimeout(s),s=null),setTimeout(()=>{o("close")},300)};return Qt(()=>{n.duration>0&&(s=window.setTimeout(()=>{r()},n.duration))}),an(()=>{s&&clearTimeout(s)}),(l,a)=>i.value?(ae(),pe("div",{key:0,class:vt(["toast-notification",[`toast-${l.type}`,{"toast-with-icon":l.showIcon}]]),role:"alert","aria-live":"polite"},[f("div",s3,[l.showIcon?(ae(),pe("div",i3,[l.type==="success"?(ae(),pe("i",r3)):l.type==="error"?(ae(),pe("i",l3)):l.type==="warning"?(ae(),pe("i",a3)):(ae(),pe("i",u3))])):Ke("",!0),f("div",c3,[l.title?(ae(),pe("div",d3,Ve(l.title),1)):Ke("",!0),f("div",f3,Ve(l.message),1)]),l.showCloseButton?(ae(),pe("button",{key:1,onClick:r,class:"toast-close",type:"button","aria-label":"Close notification"},[...a[0]||(a[0]=[f("i",{class:"bi bi-x"},null,-1)])])):Ke("",!0)])],2)):Ke("",!0)}}),p3=St(h3,[["__scopeId","data-v-c60961b8"]]),v3={class:"toast-container"},m3=At({__name:"ToastContainer",setup(t){const{toasts:e,removeToast:n}=Be;return(o,i)=>(ae(),zn(Rm,{to:"body"},[f("div",v3,[Ee(u0,{name:"toast-stack",tag:"div"},{default:Yn(()=>[(ae(!0),pe(xt,null,En(Ue(e),(s,r)=>(ae(),zn(p3,{key:s.id,message:s.message,title:s.title,type:s.type,duration:s.duration,"show-icon":s.showIcon,"show-close-button":s.showCloseButton,style:en({"--toast-index":r}),onClose:l=>Ue(n)(s.id)},null,8,["message","title","type","duration","show-icon","show-close-button","style","onClose"]))),128))]),_:1})])]))}}),g3=St(m3,[["__scopeId","data-v-8553a294"]]),ra=Y("auto");let Es=null;function qh(){const t=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",e=r=>{r==="auto"?document.documentElement.setAttribute("data-bs-theme",t()):document.documentElement.setAttribute("data-bs-theme",r)},n=r=>{ra.value=r,e(r),localStorage.setItem("kle-theme",r),Es&&(Es.removeEventListener("change",o),Es=null),r==="auto"&&(Es=window.matchMedia("(prefers-color-scheme: dark)"),Es.addEventListener("change",o))},o=()=>{ra.value==="auto"&&e("auto")},i=()=>{const r=localStorage.getItem("kle-theme");return r&&["light","dark","auto"].includes(r)?r:"auto"},s=()=>{const r=i();n(r)};return Qt(()=>{s()}),an(()=>{Es&&Es.removeEventListener("change",o)}),{theme:Xa(ra),setTheme:n,initializeTheme:s}}const b3={class:"dropdown"},y3=["title"],w3={class:"dropdown-menu dropdown-menu-end"},x3=At({__name:"ThemeToggle",setup(t){const{theme:e,setTheme:n}=qh(),o=Oe(()=>{switch(e.value){case"light":return"bi bi-sun-fill";case"dark":return"bi bi-moon-stars-fill";default:return"bi bi-circle-half"}});return(i,s)=>(ae(),pe("div",b3,[f("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",title:`Current theme: ${Ue(e)}`},[f("i",{class:vt(o.value)},null,2)],8,y3),f("ul",w3,[f("li",null,[f("button",{class:vt(["dropdown-item d-flex align-items-center",{active:Ue(e)==="light"}]),onClick:s[0]||(s[0]=r=>Ue(n)("light"))},[...s[3]||(s[3]=[f("i",{class:"bi bi-sun-fill me-2"},null,-1),$e(" Light ",-1)])],2)]),f("li",null,[f("button",{class:vt(["dropdown-item d-flex align-items-center",{active:Ue(e)==="dark"}]),onClick:s[1]||(s[1]=r=>Ue(n)("dark"))},[...s[4]||(s[4]=[f("i",{class:"bi bi-moon-stars-fill me-2"},null,-1),$e(" Dark ",-1)])],2)]),f("li",null,[f("button",{class:vt(["dropdown-item d-flex align-items-center",{active:Ue(e)==="auto"}]),onClick:s[2]||(s[2]=r=>Ue(n)("auto"))},[...s[5]||(s[5]=[f("i",{class:"bi bi-circle-half me-2"},null,-1),$e(" Auto ",-1)])],2)])])]))}}),D3=St(x3,[["__scopeId","data-v-79dec4d2"]]),_3={key:0,class:"github-star-popup"},yr="kle-ng-github-star-popup-dismissed",Qd="kle-ng-first-visit-time",la=6e4,C3=At({__name:"GitHubStarPopup",setup(t){const e=Y(!1);let n=null;const o=()=>{e.value=!1,localStorage.setItem(yr,"true")},i=()=>{o()},s=()=>{const r=typeof globalThis.describe<"u",l=typeof navigator<"u"&&navigator.webdriver&&window.__ALLOW_POPUP_IN_E2E__;if(r&&!l||localStorage.getItem(yr)==="true")return;const d=localStorage.getItem(Qd),h=Date.now();if(!d)localStorage.setItem(Qd,h.toString()),n=window.setTimeout(()=>{localStorage.getItem(yr)!=="true"&&(e.value=!0)},la);else{const c=h-parseInt(d,10);if(c<la){const p=la-c;n=window.setTimeout(()=>{localStorage.getItem(yr)!=="true"&&(e.value=!0)},p)}else e.value=!0}};return Qt(()=>{s()}),an(()=>{n&&clearTimeout(n)}),(r,l)=>e.value?(ae(),pe("div",_3,[f("button",{onClick:o,class:"btn btn-sm btn-outline-secondary close-btn",type:"button","aria-label":"Close"},[...l[0]||(l[0]=[f("i",{class:"bi bi-x"},null,-1)])]),f("div",{class:"popup-content"},[l[2]||(l[2]=f("div",{class:"popup-message"},[f("h6",{class:"popup-title"},"Enjoying KLE-NG?"),f("p",{class:"popup-text"}," If you find this tool useful, please consider starring it on GitHub to support the project! ")],-1)),f("a",{href:"https://github.com/adamws/kle-ng",target:"_blank",rel:"noopener noreferrer",class:"star-button",onClick:i},[...l[1]||(l[1]=[f("i",{class:"bi bi-github"},null,-1),$e(" Star on GitHub ",-1)])])])])):Ke("",!0)}}),E3=St(C3,[["__scopeId","data-v-a7e41432"]]),A3={id:"app",class:"d-flex flex-column min-vh-100"},S3={class:"navbar app-header border-bottom py-2"},F3={class:"container-fluid"},k3={class:"w-100 d-flex flex-column flex-md-row align-items-stretch align-items-md-center gap-2"},M3={class:"d-flex flex-row flex-grow-1 align-items-center gap-2"},T3={class:"flex-grow-1"},$3={class:"d-flex align-items-center flex-shrink-0"},L3={class:"flex-grow-1"},I3=["onDragover","onDrop"],O3={class:"card mb-3 draggable-section"},R3={class:"card-header d-flex align-items-center justify-content-between py-1 drag-handle"},P3={class:"d-flex align-items-center gap-2"},B3={key:0,class:"section-tabs"},N3={key:1,class:"section-title"},V3={key:2,class:"small text-warning"},K3={class:"d-flex align-items-center gap-2"},z3=["onClick","title"],U3=["onDragstart"],H3={key:0,class:"card-body"},j3={class:"canvas-area flex-grow-1"},W3={key:4,class:"card-body"},Ys=530,q3=At({__name:"App",setup(t){const e=Y(),n=An();qh();const o=Y(["canvas","properties","json"]),i=Y(null),s=Y(null),r=Y("properties"),l=Y({properties:!1,canvas:!1,json:!1});Qt(()=>{const F=localStorage.getItem("kle-ng-section-order");if(F)try{const Q=JSON.parse(F);Array.isArray(Q)&&Q.length===3&&(o.value=Q)}catch(Q){console.warn("Failed to parse saved section order:",Q)}const te=localStorage.getItem("kle-ng-section-collapsed");if(te)try{const Q=JSON.parse(te);typeof Q=="object"&&(l.value={...l.value,...Q})}catch(Q){console.warn("Failed to parse saved collapsed states:",Q)}const H=localStorage.getItem("kle-ng-layout-editor-height");if(H){const Q=parseInt(H,10);Q>=Ys&&Q<=window.innerHeight-200?R.value=Q:Q>0&&Q<Ys&&(R.value=Ys)}else R.value=Math.max(R.value,Ys)});const a=()=>{localStorage.setItem("kle-ng-section-order",JSON.stringify(o.value))},d=()=>{localStorage.setItem("kle-ng-section-collapsed",JSON.stringify(l.value))},h=F=>{l.value[F]=!l.value[F],d()},c=F=>{i.value=F},p=(F,te)=>{F.preventDefault(),i.value&&(s.value=te)},m=()=>{i.value&&(s.value=null)},g=(F,te)=>{if(F.preventDefault(),!i.value||i.value===te){i.value=null,s.value=null;return}const H=o.value.indexOf(i.value),Q=o.value.indexOf(te);if(H!==-1&&Q!==-1){const W=[...o.value],[J]=W.splice(H,1);W.splice(Q,0,J),o.value=W,a()}i.value=null,s.value=null},D=()=>{i.value=null,s.value=null},T=Oe(()=>({canvas:{id:"canvas",title:"Layout Editor",component:"CanvasSection"},properties:{id:"properties",title:"Key Properties",component:"KeyPropertiesPanel"},json:{id:"json",title:"JSON Editor",component:"JsonEditorPanel"}})),y=Oe(()=>o.value.map(F=>T.value[F])),C=Y(!1),M=()=>{C.value=!0},E=()=>{C.value=!1},R=Y(Ys),L=Y(!1),B=Y(0),x=Y(0),I=F=>{L.value=!0,B.value=F.clientY,x.value=R.value,document.addEventListener("mousemove",N),document.addEventListener("mouseup",z),document.body.style.cursor="ns-resize",document.body.style.userSelect="none"},N=F=>{if(!L.value)return;const te=F.clientY-B.value,H=Math.max(Ys,Math.min(window.innerHeight-200,x.value+te));R.value=H},z=()=>{L.value=!1,document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",z),document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem("kle-ng-layout-editor-height",R.value.toString())};return(F,te)=>(ae(),pe("div",A3,[f("header",S3,[f("div",F3,[f("div",k3,[te[3]||(te[3]=f("h1",{class:"navbar-brand mb-0 flex-shrink-0 text-center text-md-start"},[f("strong",null,"Keyboard Layout Editor NG")],-1)),f("div",M3,[f("div",T3,[Ee(Cb)]),f("div",$3,[Ee(D3)])])])])]),f("div",L3,[(ae(!0),pe(xt,null,En(y.value,H=>(ae(),pe("div",{key:H.id,class:vt(["draggable-container",{dragging:i.value===H.id,"drag-over":s.value===H.id}]),onDragover:Q=>p(Q,H.id),onDragleave:m,onDrop:Q=>g(Q,H.id)},[f("div",O3,[f("div",R3,[f("div",P3,[H.id==="properties"?(ae(),pe("div",B3,[f("button",{class:vt(["tab-btn",{active:r.value==="properties"}]),onClick:te[0]||(te[0]=pt(Q=>r.value="properties",["stop"]))}," Key Properties ",2),f("button",{class:vt(["tab-btn",{active:r.value==="metadata"}]),onClick:te[1]||(te[1]=pt(Q=>r.value="metadata",["stop"]))}," Keyboard Metadata ",2),f("button",{class:vt(["tab-btn",{active:r.value==="summary"}]),onClick:te[2]||(te[2]=pt(Q=>r.value="summary",["stop"]))}," Summary ",2)])):(ae(),pe("span",N3,Ve(H.title),1)),H.id==="canvas"&&Ue(n).dirty?(ae(),pe("div",V3," • Unsaved changes ")):Ke("",!0)]),f("div",K3,[H.id==="canvas"?(ae(),pe("button",{key:0,onClick:pt(M,["stop"]),class:"btn btn-sm btn-outline-secondary help-btn",title:"Help"},[...te[4]||(te[4]=[f("i",{class:"bi bi-question-circle"},null,-1)])])):Ke("",!0),f("button",{onClick:pt(Q=>h(H.id),["stop"]),class:"btn btn-sm btn-outline-secondary collapse-btn",title:l.value[H.id]?"Expand":"Collapse"},[f("i",{class:vt(l.value[H.id]?"bi bi-chevron-down":"bi bi-chevron-up")},null,2)],8,z3),f("span",{class:"drag-grip",title:"Drag to reorder",draggable:"true",onDragstart:Q=>c(H.id),onDragend:D},[...te[5]||(te[5]=[f("i",{class:"bi bi-grip-vertical"},null,-1)])],40,U3)])]),H.id==="properties"&&!l.value[H.id]?(ae(),pe("div",H3,[r.value==="properties"?(ae(),zn(VD,{key:0})):r.value==="metadata"?(ae(),zn(v_,{key:1})):r.value==="summary"?(ae(),zn(J_,{key:2})):Ke("",!0)])):H.id==="canvas"&&!l.value[H.id]?(ae(),pe("div",{key:1,class:"card-body p-0 d-flex layout-editor-container",style:en({height:R.value+"px"})},[Ee(IE),f("div",j3,[Ee(ww,{ref_for:!0,ref_key:"canvasRef",ref:e},null,512)])],4)):Ke("",!0),H.id==="canvas"&&!l.value[H.id]?(ae(),zn(t3,{key:2})):Ke("",!0),H.id==="canvas"&&!l.value[H.id]?(ae(),pe("div",{key:3,class:vt(["layout-editor-resize-handle",{active:L.value}]),onMousedown:I},[...te[6]||(te[6]=[f("div",{class:"resize-handle-line"},null,-1)])],34)):H.id==="json"&&!l.value[H.id]?(ae(),pe("div",W3,[Ee(uC)])):Ke("",!0)])],42,I3))),128))]),Ee(bC),Ee(o3,{"is-visible":C.value,onClose:E},null,8,["is-visible"]),Ee(g3),Ee(E3)]))}}),Y3=St(q3,[["__scopeId","data-v-4eca8344"]]),Yh=x0(Y3),X3=C0();Yh.use(X3);Yh.mount("#app");
